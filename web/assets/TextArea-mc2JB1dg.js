import{r as e,ba as t,am as n,b1 as a,b2 as r,b6 as o,b0 as i,aT as l,b7 as s,aj as u,a$ as c,a6 as d,W as f,an as p,a7 as m,a8 as g,af as v,bs as x,bt as b,aA as h,bu as w,ag as y}from"./requestIdleCallbackPolyfill-MO-SmkoS.js";import{r as C,B as z,s as S,i as E,a as $,t as A,v as R,u as N,w as I,l as O,m as j}from"./getAllowClear-R1g-sqG4.js";var P,F=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],H={};function T(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;P||((P=document.createElement("textarea")).setAttribute("tab-index","-1"),P.setAttribute("aria-hidden","true"),P.setAttribute("name","hiddenTextarea"),document.body.appendChild(P)),e.getAttribute("wrap")?P.setAttribute("wrap",e.getAttribute("wrap")):P.removeAttribute("wrap");var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&H[n])return H[n];var a=window.getComputedStyle(e),r=a.getPropertyValue("box-sizing")||a.getPropertyValue("-moz-box-sizing")||a.getPropertyValue("-webkit-box-sizing"),o=parseFloat(a.getPropertyValue("padding-bottom"))+parseFloat(a.getPropertyValue("padding-top")),i=parseFloat(a.getPropertyValue("border-bottom-width"))+parseFloat(a.getPropertyValue("border-top-width")),l={sizingStyle:F.map((function(e){return"".concat(e,":").concat(a.getPropertyValue(e))})).join(";"),paddingSize:o,borderSize:i,boxSizing:r};return t&&n&&(H[n]=l),l}(e,t),o=r.paddingSize,i=r.borderSize,l=r.boxSizing,s=r.sizingStyle;P.setAttribute("style","".concat(s,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),P.value=e.value||e.placeholder||"";var u,c=void 0,d=void 0,f=P.scrollHeight;if("border-box"===l?f+=i:"content-box"===l&&(f-=o),null!==n||null!==a){P.value=" ";var p=P.scrollHeight-o;null!==n&&(c=p*n,"border-box"===l&&(c=c+o+i),f=Math.max(c,f)),null!==a&&(d=p*a,"border-box"===l&&(d=d+o+i),u=f>d?"":"hidden",f=Math.min(d,f))}var m={height:f,overflowY:u,resize:"none"};return c&&(m.minHeight=c),d&&(m.maxHeight=d),m}var V=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],k=e.forwardRef((function(f,p){var m=f,g=m.prefixCls,v=m.defaultValue,x=m.value,b=m.autoSize,h=m.onResize,w=m.className,y=m.style,C=m.disabled,z=m.onChange;m.onInternalAutoSize;var S=t(m,V),E=n(v,{value:x,postState:function(e){return null!=e?e:""}}),$=a(E,2),A=$[0],R=$[1],N=e.useRef();e.useImperativeHandle(p,(function(){return{textArea:N.current}}));var I=e.useMemo((function(){return b&&"object"===r(b)?[b.minRows,b.maxRows]:[]}),[b]),O=a(I,2),j=O[0],P=O[1],F=!!b,H=e.useState(2),k=a(H,2),D=k[0],L=k[1],M=e.useState(),W=a(M,2),B=W[0],q=W[1],K=function(){L(0)};o((function(){F&&K()}),[x,j,P,F]),o((function(){if(0===D)L(1);else if(1===D){var e=T(N.current,!1,j,P);L(2),q(e)}else!function(){try{if(document.activeElement===N.current){var e=N.current,t=e.selectionStart,n=e.selectionEnd,a=e.scrollTop;N.current.setSelectionRange(t,n),N.current.scrollTop=a}}catch(r){}}()}),[D]);var X=e.useRef(),Y=function(){d.cancel(X.current)};e.useEffect((function(){return Y}),[]);var G=F?B:null,J=i(i({},y),G);return 0!==D&&1!==D||(J.overflowY="hidden",J.overflowX="hidden"),e.createElement(l,{onResize:function(e){2===D&&(null==h||h(e),b&&(Y(),X.current=d((function(){K()}))))},disabled:!(b||h)},e.createElement("textarea",s({},S,{ref:N,style:J,className:u(g,w,c({},"".concat(g,"-disabled"),C)),disabled:C,value:A,onChange:function(e){R(e.target.value),null==z||z(e)}})))})),D=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],L=f.forwardRef((function(r,o){var l,d=r.defaultValue,m=r.value,g=r.onFocus,v=r.onBlur,x=r.onChange,b=r.allowClear,h=r.maxLength,w=r.onCompositionStart,y=r.onCompositionEnd,E=r.suffix,$=r.prefixCls,A=void 0===$?"rc-textarea":$,R=r.showCount,N=r.count,I=r.className,O=r.style,j=r.disabled,P=r.hidden,F=r.classNames,H=r.styles,T=r.onResize,V=r.onClear,L=r.onPressEnter,M=r.readOnly,W=r.autoSize,B=r.onKeyDown,q=t(r,D),K=n(d,{value:m,defaultValue:d}),X=a(K,2),Y=X[0],G=X[1],J=null==Y?"":String(Y),Q=f.useState(!1),U=a(Q,2),Z=U[0],_=U[1],ee=f.useRef(!1),te=f.useState(null),ne=a(te,2),ae=ne[0],re=ne[1],oe=e.useRef(null),ie=e.useRef(null),le=function(){var e;return null===(e=ie.current)||void 0===e?void 0:e.textArea},se=function(){le().focus()};e.useImperativeHandle(o,(function(){var e;return{resizableTextArea:ie.current,focus:se,blur:function(){le().blur()},nativeElement:(null===(e=oe.current)||void 0===e?void 0:e.nativeElement)||le()}})),e.useEffect((function(){_((function(e){return!j&&e}))}),[j]);var ue=f.useState(null),ce=a(ue,2),de=ce[0],fe=ce[1];f.useEffect((function(){var e;de&&(e=le()).setSelectionRange.apply(e,p(de))}),[de]);var pe,me=C(N,R),ge=null!==(l=me.max)&&void 0!==l?l:h,ve=Number(ge)>0,xe=me.strategy(J),be=!!ge&&xe>ge,he=function(e,t){var n=t;!ee.current&&me.exceedFormatter&&me.max&&me.strategy(t)>me.max&&t!==(n=me.exceedFormatter(t,{max:me.max}))&&fe([le().selectionStart||0,le().selectionEnd||0]),G(n),S(e.currentTarget,e,x,n)},we=E;me.show&&(pe=me.showFormatter?me.showFormatter({value:J,count:xe,maxLength:ge}):"".concat(xe).concat(ve?" / ".concat(ge):""),we=f.createElement(f.Fragment,null,we,f.createElement("span",{className:u("".concat(A,"-data-count"),null==F?void 0:F.count),style:null==H?void 0:H.count},pe)));var ye=!W&&!R&&!b;return f.createElement(z,{ref:oe,value:J,allowClear:b,handleReset:function(e){G(""),se(),S(le(),e,x)},suffix:we,prefixCls:A,classNames:i(i({},F),{},{affixWrapper:u(null==F?void 0:F.affixWrapper,c(c({},"".concat(A,"-show-count"),R),"".concat(A,"-textarea-allow-clear"),b))}),disabled:j,focused:Z,className:u(I,be&&"".concat(A,"-out-of-range")),style:i(i({},O),ae&&!ye?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"==typeof pe?pe:void 0}},hidden:P,readOnly:M,onClear:V},f.createElement(k,s({},q,{autoSize:W,maxLength:h,onKeyDown:function(e){"Enter"===e.key&&L&&L(e),null==B||B(e)},onChange:function(e){he(e,e.target.value)},onFocus:function(e){_(!0),null==g||g(e)},onBlur:function(e){_(!1),null==v||v(e)},onCompositionStart:function(e){ee.current=!0,null==w||w(e)},onCompositionEnd:function(e){ee.current=!1,he(e,e.currentTarget.value),null==y||y(e)},className:u(null==F?void 0:F.textarea),style:i(i({},null==H?void 0:H.textarea),{},{resize:null==O?void 0:O.resize}),disabled:j,prefixCls:A,onResize:function(e){var t;null==T||T(e),null!==(t=le())&&void 0!==t&&t.style.height&&re(!0)},ref:ie,readOnly:M})))}));const M=e=>{const{componentCls:t,paddingLG:n}=e,a=`${t}-textarea`;return{[`textarea${t}`]:{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}`,resize:"vertical",[`&${t}-mouse-active`]:{transition:`all ${e.motionDurationSlow}, height 0s, width 0s`}},[`${t}-textarea-affix-wrapper-resize-dirty`]:{width:"auto"},[a]:{position:"relative","&-show-count":{[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`\n        &-allow-clear > ${t},\n        &-affix-wrapper${a}-has-feedback ${t}\n      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent",minHeight:e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),"&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${a}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-rtl`]:{[`${t}-suffix`]:{[`${t}-data-count`]:{direction:"ltr",insetInlineStart:0}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},W=m(["Input","TextArea"],(e=>{const t=g(e,E(e));return[M(t)]}),$,{resetFont:!1});const B=e.forwardRef(((t,n)=>{var a;const{prefixCls:r,bordered:o=!0,size:i,disabled:l,status:s,allowClear:c,classNames:d,rootClassName:f,className:p,style:m,styles:g,variant:C,showCount:z,onMouseDown:S,onResize:E}=t,$=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant","showCount","onMouseDown","onResize"]),{getPrefixCls:P,direction:F,allowClear:H,autoComplete:T,className:V,style:k,classNames:D,styles:M}=v("textArea"),B=e.useContext(x),q=null!=l?l:B,{status:K,hasFeedback:X,feedbackIcon:Y}=e.useContext(b),G=j(K,s),J=e.useRef(null);e.useImperativeHandle(n,(()=>{var e;return{resizableTextArea:null===(e=J.current)||void 0===e?void 0:e.resizableTextArea,focus:e=>{var t,n;A(null===(n=null===(t=J.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:()=>{var e;return null===(e=J.current)||void 0===e?void 0:e.blur()}}}));const Q=P("input",r),U=h(Q),[Z,_,ee]=R(Q,f),[te]=W(Q,U),{compactSize:ne,compactItemClassnames:ae}=w(Q,F),re=y((e=>{var t;return null!==(t=null!=i?i:ne)&&void 0!==t?t:e})),[oe,ie]=N("textArea",C,o),le=I(null!=c?c:H),[se,ue]=e.useState(!1),[ce,de]=e.useState(!1);return Z(te(e.createElement(L,Object.assign({autoComplete:T},$,{style:Object.assign(Object.assign({},k),m),styles:Object.assign(Object.assign({},M),g),disabled:q,allowClear:le,className:u(ee,U,p,f,ae,V,ce&&`${Q}-textarea-affix-wrapper-resize-dirty`),classNames:Object.assign(Object.assign(Object.assign({},d),D),{textarea:u({[`${Q}-sm`]:"small"===re,[`${Q}-lg`]:"large"===re},_,null==d?void 0:d.textarea,D.textarea,se&&`${Q}-mouse-active`),variant:u({[`${Q}-${oe}`]:ie},O(Q,G)),affixWrapper:u(`${Q}-textarea-affix-wrapper`,{[`${Q}-affix-wrapper-rtl`]:"rtl"===F,[`${Q}-affix-wrapper-sm`]:"small"===re,[`${Q}-affix-wrapper-lg`]:"large"===re,[`${Q}-textarea-show-count`]:z||(null===(a=t.count)||void 0===a?void 0:a.show)},_)}),prefixCls:Q,suffix:X&&e.createElement("span",{className:`${Q}-textarea-suffix`},Y),showCount:z,ref:J,onResize:e=>{var t,n;if(null==E||E(e),se&&"function"==typeof getComputedStyle){const e=null===(n=null===(t=J.current)||void 0===t?void 0:t.nativeElement)||void 0===n?void 0:n.querySelector("textarea");e&&"both"===getComputedStyle(e).resize&&de(!0)}},onMouseDown:e=>{ue(!0),null==S||S(e);const t=()=>{ue(!1),document.removeEventListener("mouseup",t)};document.addEventListener("mouseup",t)}}))))}));export{k as R,B as T,L as a};
