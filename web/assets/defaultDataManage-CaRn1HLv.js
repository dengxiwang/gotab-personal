import{r as e,I as t,c as s,j as i,a as r,n as o,B as l,Z as n,Q as a,F as d,o as c,l as m,v as f}from"./requestIdleCallbackPolyfill-CtDwfsUZ.js";import{u}from"./useFresh-DTv3j9aH.js";import{M as j,R as p}from"./myTable-BtT9OxnD.js";import{C as x}from"./contentLayout-yZopseij.js";import{R as h}from"./ReloadOutlined-DLlZa5vB.js";import{C as y}from"./ClearOutlined-CT7898ko.js";import{R as b}from"./QuestionCircleOutlined-CkNAwQab.js";import{T as _}from"./index-CrqaPBvZ.js";import{R as g}from"./UserOutlined-BeNgIw4z.js";import"./index-UWLYAeVo.js";import"./index-DIke7Pqw.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-BwnHbOG1.js";import"./Overflow-JRxk-Rwv.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-Dd_gbJpw.js";import"./getAllowClear-B-mQjCaT.js";import"./Input-xSkHu2w0.js";import"./transformData-Cq-lyu6X.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-DCuBEOQv.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-BEMgawXL.js";import"./styleChecker-DxQT0z-O.js";import"./AlipayOutlined-KHllwbhK.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useUpdateEffect-CQJp-VqD.js";import"./useBreakpoint-kMM__v-J.js";import"./index-DYsh6Zab.js";import"./ReloadOutlined-B00s2TmV.js";import"./QuestionCircleOutlined-DSm95oJP.js";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},k.apply(this,arguments)}const O=(s,i)=>e.createElement(t,k({},s,{ref:i,icon:y})),w=e.forwardRef(O);function C(){const t=s.c(27),{key:m,refresh:f}=u(),[p,y]=e.useState(!1);let _,g,k,O;t[0]===Symbol.for("react.memo_cache_sentinel")?(_={title:"用户名",key:"username",width:160,fixed:"left",render:D},g={title:"状态",key:"deleted_at",width:80,render:S},k={type:"time",title:"更新时间",key:"updated_at",width:200},t[0]=_,t[1]=g,t[2]=k):(_=t[0],g=t[1],k=t[2]),t[3]!==f?(O=[_,g,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(v,{record:t,refresh:f})}],t[3]=f,t[4]=O):O=t[4];const C=O;let R;t[5]!==f?(R=function(){y(!0);const e=r.getState().user.token;o({url:c.clearDefaultData,token:e}).then(e=>{200===e.code&&f()}).finally(()=>{y(!1)})},t[5]=f,t[6]=R):R=t[6];const N=R;let Q,T,L,M,U,A,F,I,z,B;return t[7]===Symbol.for("react.memo_cache_sentinel")?(Q=i.jsx(h,{}),t[7]=Q):Q=t[7],t[8]!==f?(T=i.jsx(l,{type:"primary",icon:Q,onClick:()=>{f()},children:"刷新列表"}),t[8]=f,t[9]=T):T=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(L=i.jsx(w,{}),t[10]=L):L=t[10],t[11]!==p?(M=i.jsx(l,{variant:"filled",color:"danger",icon:L,loading:p,children:"清理数据（只保留 10 条）"}),t[11]=p,t[12]=M):M=t[12],t[13]!==N||t[14]!==M?(U=i.jsx(n,{title:"是否确认清理？",onConfirm:N,children:M}),t[13]=N,t[14]=M,t[15]=U):U=t[15],t[16]!==T||t[17]!==U?(A=i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[T,U]}),t[16]=T,t[17]=U,t[18]=A):A=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(F=i.jsx(a,{type:"warning",description:i.jsxs(i.Fragment,{children:[i.jsx(b,{className:"mr-1"}),"默认数据为最新的启用数据，且数据会随着管理员在主页设置默认主页数据而更新！管理员保存新的默认数据后，所有先前启用数据均会禁用！"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),I=i.jsx(d,{className:"my-3"}),t[19]=F,t[20]=I):(F=t[19],I=t[20]),t[21]!==C||t[22]!==m?(z=i.jsx(j,{columns:C,getListUrl:c.getDefaultDataList,dataKey:"data.list",tableKey:m}),t[21]=C,t[22]=m,t[23]=z):z=t[23],t[24]!==A||t[25]!==z?(B=i.jsxs(x,{children:[A,F,I,z]}),t[24]=A,t[25]=z,t[26]=B):B=t[26],B}function S(e){return i.jsx(_,{color:e?"red":"green",children:e?"禁用":"启用"})}function D(e){return i.jsx(_,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(g,{}),children:e||"已注销"})}const v=e.memo(t=>{const a=s.c(33),{record:d,refresh:u}=t;let j;a[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],a[0]=j):j=a[0];const[x,h]=e.useState(j);let y;a[1]!==d.id||a[2]!==u?(y=function(){m(0,h);const e=r.getState().user.token;setTimeout(()=>{o({url:c.enableDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&u()}).finally(()=>{f(0,h)})},500)},a[1]=d.id,a[2]=u,a[3]=y):y=a[3];const b=y;let _;a[4]!==d.id||a[5]!==u?(_=function(){m(0,h);const e=r.getState().user.token;setTimeout(()=>{o({url:c.disableDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&u()}).finally(()=>{f(0,h)})},500)},a[4]=d.id,a[5]=u,a[6]=_):_=a[6];const g=_;let k;a[7]!==d.id||a[8]!==u?(k=function(){m(1,h);const e=r.getState().user.token;setTimeout(()=>{o({url:c.deleteDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&u()}).finally(()=>{f(1,h)})},500)},a[7]=d.id,a[8]=u,a[9]=k):k=a[9];const O=k,w=d.deleted_at?"是否确认恢复？":"是否确认禁用？",C=d.deleted_at?b:g;let S,D,v,R,N,Q,T,L,M;return a[10]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},a[10]=S):S=a[10],a[11]!==x[0]||a[12]!==d.deleted_at?(D=x[0]?i.jsx(p,{}):d.deleted_at?"恢复":"禁用",a[11]=x[0],a[12]=d.deleted_at,a[13]=D):D=a[13],a[14]!==x[0]||a[15]!==D?(v=i.jsx(l,{type:"link",size:"small",disabled:x[0],style:S,children:D}),a[14]=x[0],a[15]=D,a[16]=v):v=a[16],a[17]!==w||a[18]!==C||a[19]!==v?(R=i.jsx(n,{title:w,onConfirm:C,children:v}),a[17]=w,a[18]=C,a[19]=v,a[20]=R):R=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(N={width:"44px"},a[21]=N):N=a[21],a[22]!==x[1]?(Q=x[1]?i.jsx(p,{}):"删除",a[22]=x[1],a[23]=Q):Q=a[23],a[24]!==x[1]||a[25]!==Q?(T=i.jsx(l,{danger:!0,type:"link",size:"small",disabled:x[1],style:N,children:Q}),a[24]=x[1],a[25]=Q,a[26]=T):T=a[26],a[27]!==O||a[28]!==T?(L=i.jsx(n,{title:"是否确认删除？",onConfirm:O,children:T}),a[27]=O,a[28]=T,a[29]=L):L=a[29],a[30]!==L||a[31]!==R?(M=i.jsxs("div",{className:"flex flex-wrap",children:[R,L]}),a[30]=L,a[31]=R,a[32]=M):M=a[32],M});export{C as default};
