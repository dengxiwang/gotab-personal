import{c as e,r as t,j as r,B as l,F as s,o as i,k as a,l as o,a as n,n as m,v as c,a6 as d,Z as f}from"./main-BznldwrR.js";import{I as p}from"./assets-B8Bi78Vh.js";import{u as h}from"./useFresh-BBfhmAj4.js";import{r as u}from"./transformData-W7IqF1wa.js";import{M as j,R as x}from"./myTable-CoesqfYG.js";import{C as y}from"./contentLayout-CRmsUyuP.js";import{F as b}from"./index-CM88uxhR.js";import{I as _}from"./index-CU_E_toA.js";import{S as k}from"./index-pOq2t2PQ.js";import{R as w,a as S}from"./SearchOutlined-DHK_Zbuv.js";import{T as g}from"./index-BJB7vPB3.js";import{R as v}from"./UserOutlined-CKr-E0CC.js";import{I as C}from"./index-DbTnZT_A.js";import{R as O}from"./MailOutlined-CI-nFNPu.js";import"./index-B5NmSUX2.js";import"./Overflow-t0s94lkY.js";import"./MoneyCollectOutlined-4U8275jN.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DiYt940-.js";import"./styleChecker-CNiLJu-y.js";import"./AlipayOutlined-i_cP3CWs.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-BajckZld.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./getAllowClear-Bhk0ADw3.js";import"./index-DJHRXG-n.js";import"./Input-MFSIJ5db.js";import"./row-CgX7p7wl.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-CUVoyy7V.js";import"./LeftOutlined-D9Sp279J.js";function F(){const a=e.c(43),{key:o,refresh:n}=h(),[m]=b.useForm();let c;a[0]===Symbol.for("react.memo_cache_sentinel")?(c={},a[0]=c):c=a[0];const[d,f]=t.useState(c);let p,x,g,v,C,O,F,A;a[1]===Symbol.for("react.memo_cache_sentinel")?(p={title:"用户",key:"username",width:160,fixed:"left",render:M},x={title:"预览",key:"filePath",width:200,className:"flex-center",render:B},g={title:"资源类型",key:"srcType",width:120,render:P},v={title:"文件类型",key:"fileType",width:120},C={title:"文件大小",key:"fileSize",width:120,render:I},O={title:"文件地址",key:"filePath",width:420,render:T},F={type:"time",title:"上传时间",key:"createdTime",width:200},a[1]=p,a[2]=x,a[3]=g,a[4]=v,a[5]=C,a[6]=O,a[7]=F):(p=a[1],x=a[2],g=a[3],v=a[4],C=a[5],O=a[6],F=a[7]),a[8]!==n?(A=[p,x,g,v,C,O,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>r.jsx(N,{record:t,refresh:n})}],a[8]=n,a[9]=A):A=a[9];const z=A;let R,U,$,L,K,Q,V,D,G,H,X,Y,Z,q,E,J,W;return a[10]!==m?(R=()=>{const e=m.getFieldsValue();e[Math.random()]=!0,f(u(e))},a[10]=m,a[11]=R):R=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(U={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},a[12]=U):U=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?($=r.jsx(b.Item,{name:"username",children:r.jsx(_,{placeholder:"用户名"})}),a[13]=$):$=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?(L=r.jsx(b.Item,{name:"filePath",children:r.jsx(_,{placeholder:"文件地址"})}),a[14]=L):L=a[14],a[15]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:U,children:[$,L,r.jsx(b.Item,{name:"srcType",children:r.jsx(k,{placeholder:"资源类型",options:[{label:"头像",value:1},{label:"静态壁纸",value:2},{label:"动态壁纸",value:3},{label:"上传的图标",value:4},{label:"自动获取的图标",value:5},{label:"资源库的图标",value:6},{label:"其他图片",value:0}],allowClear:!0})})]}),a[15]=K):K=a[15],a[16]!==m?(Q=()=>{m.submit()},a[16]=m,a[17]=Q):Q=a[17],a[18]===Symbol.for("react.memo_cache_sentinel")?(V=r.jsx(w,{}),a[18]=V):V=a[18],a[19]!==Q?(D=r.jsx(l,{type:"primary",onClick:Q,icon:V,children:"查询"}),a[19]=Q,a[20]=D):D=a[20],a[21]!==m?(G=()=>{m.resetFields();const e={};e[Math.random()]=!0,f(e)},a[21]=m,a[22]=G):G=a[22],a[23]===Symbol.for("react.memo_cache_sentinel")?(H=r.jsx(S,{}),a[23]=H):H=a[23],a[24]!==G?(X=r.jsx(l,{onClick:G,icon:H,children:"重置"}),a[24]=G,a[25]=X):X=a[25],a[26]!==D||a[27]!==X?(Y=r.jsxs("div",{className:"flex flex-wrap gap-3",children:[D,X]}),a[26]=D,a[27]=X,a[28]=Y):Y=a[28],a[29]!==m||a[30]!==Y||a[31]!==R?(Z=r.jsxs(b,{className:"w-full",form:m,onFinish:R,children:[K,Y]}),a[29]=m,a[30]=Y,a[31]=R,a[32]=Z):Z=a[32],a[33]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx(s,{className:"my-3"}),a[33]=q):q=a[33],a[34]!==d?(E={searchParams:d},a[34]=d,a[35]=E):E=a[35],a[36]!==z||a[37]!==o||a[38]!==E?(J=r.jsx(j,{columns:z,getListUrl:i.getUploadSrcList,dataKey:"data.list",tableKey:o,params:E}),a[36]=z,a[37]=o,a[38]=E,a[39]=J):J=a[39],a[40]!==Z||a[41]!==J?(W=r.jsxs(y,{children:[Z,q,J]}),a[40]=Z,a[41]=J,a[42]=W):W=a[42],W}function T(e){return r.jsx(g,{color:"blue",onClick:()=>{e&&window.open(a(e),"_blank")},className:"cursor-pointer",icon:r.jsx(O,{}),children:e||"-"})}function I(e){return r.jsx("span",{children:e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(2)}KB`:e<1073741824?`${(e/1024/1024).toFixed(2)}MB`:`${(e/1024/1024/1024).toFixed(2)}GB`})}function P(e){return r.jsx(g,{color:0===e?"blue":1===e?"green":2===e?"purple":3===e?"cyan":4===e?"red":5===e?"orange":6===e?"magenta":"volcano",children:0===e?"其他图片":1===e?"头像":2===e?"静态壁纸":3===e?"动态壁纸":4===e?"上传的图标":5===e?"自动获取的图标":6===e?"资源库的图标":e})}function B(e){return r.jsx(C,{src:a(e),height:48,fallback:p,loading:"lazy"})}function M(e,t){return r.jsx(g,{color:e||"0"===t.userId?"geekblue":"red",bordered:!1,icon:r.jsx(v,{}),children:e||("0"===t.userId?"游客":"已注销")})}const N=t.memo(s=>{const p=e.c(20),{record:h,refresh:u}=s;let j;p[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],p[0]=j):j=p[0];const[y,b]=t.useState(j);let _;p[1]!==h.id||p[2]!==u?(_=function(){o(1,b);const e=n.getState().user.token;setTimeout(()=>{m({url:i.deleteUploadSrc,token:e,data:{ids:[h.id]}}).then(e=>{200===e.code&&u()}).finally(()=>{c(1,b)})},500)},p[1]=h.id,p[2]=u,p[3]=_):_=p[3];const k=_;let w;p[4]===Symbol.for("react.memo_cache_sentinel")?(w=function(e){fetch(a(e),{headers:new Headers({Authorization:"Bearer "+n.getState().user.token})}).then(A).then(t=>{d.saveAs(t,e.split("/").pop()||"file")}).catch(z)},p[4]=w):w=p[4];const S=w;let g,v,C,O,F,T,I;return p[5]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},p[5]=g):g=p[5],p[6]!==h.filePath?(v=r.jsx(l,{type:"link",size:"small",style:g,onClick:()=>{S(h.filePath)},children:"下载"}),p[6]=h.filePath,p[7]=v):v=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},p[8]=C):C=p[8],p[9]!==y[1]?(O=y[1]?r.jsx(x,{}):"删除",p[9]=y[1],p[10]=O):O=p[10],p[11]!==y[1]||p[12]!==O?(F=r.jsx(l,{danger:!0,type:"link",size:"small",disabled:y[1],style:C,children:O}),p[11]=y[1],p[12]=O,p[13]=F):F=p[13],p[14]!==k||p[15]!==F?(T=r.jsx(f,{title:"是否删除附件？",onConfirm:k,children:F}),p[14]=k,p[15]=F,p[16]=T):T=p[16],p[17]!==v||p[18]!==T?(I=r.jsxs("div",{className:"flex flex-wrap",children:[v,T]}),p[17]=v,p[18]=T,p[19]=I):I=p[19],I});function A(e){return e.blob()}function z(){return alert("文件下载失败")}export{F as default};
