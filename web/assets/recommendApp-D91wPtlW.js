import{c as e,j as t,r as s,B as i,Q as r,F as o,o as l,a as n,l as a,n as m,v as c,Z as d}from"./requestIdleCallbackPolyfill-BBqTMjVZ.js";import{u as p}from"./useFresh-C2jU4g9r.js";import{M as j,R as u}from"./myTable-B6j-UrPs.js";import{C as f}from"./contentLayout-DITYlNIr.js";import{R as h}from"./ReloadOutlined-pVDTKq58.js";import{R as x}from"./QuestionCircleOutlined-CdhcZ_SG.js";import{I as y}from"./index-bvImoje0.js";import{T as k}from"./index-CBxFLZp0.js";import{R as w}from"./UserOutlined-Dznz72c2.js";import"./index-B1HoNlNX.js";import"./MailOutlined-D1K95yFQ.js";import"./Overflow-BXYGHNtC.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-DF0Jxszk.js";import"./getAllowClear-DdLfhXWE.js";import"./Input-0IrDrwpC.js";import"./transformData-Bw124DHj.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-Dcs4YRmJ.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index--pePff0C.js";import"./styleChecker-L4PEriNA.js";import"./AlipayOutlined-XzMwrMmo.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useUpdateEffect-DHeLVxef.js";import"./useBreakpoint-CEAbgQvq.js";import"./index-BdV7gE6d.js";import"./ReloadOutlined-B00s2TmV.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./LeftOutlined-D9Sp279J.js";function b(){const s=e.c(21),{key:n,refresh:a}=p();let m,c,d,u,y,k,w,b;s[0]===Symbol.for("react.memo_cache_sentinel")?(m={title:"应用标题",key:"title",width:160,fixed:"left"},c={title:"应用描述",key:"description",width:460},d={title:"图标",key:"icon",width:100,render:O},u={title:"链接",key:"link",width:120,render:C},y={title:"标签",width:120,render:_},k={title:"提交人",key:"username",width:160,render:g},w={type:"time",title:"提交时间",key:"createdTime",width:200},s[0]=m,s[1]=c,s[2]=d,s[3]=u,s[4]=y,s[5]=k,s[6]=w):(m=s[0],c=s[1],d=s[2],u=s[3],y=s[4],k=s[5],w=s[6]),s[7]!==a?(b=[m,c,d,u,y,k,w,{title:"操作",fixed:"right",width:180,render:(e,s)=>t.jsx(R,{record:s,refresh:a})}],s[7]=a,s[8]=b):b=s[8];const S=b;let A,v,N,T,Q,z,L;return s[9]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(h,{}),s[9]=A):A=s[9],s[10]!==a?(v=t.jsx(i,{type:"primary",icon:A,onClick:()=>{a()},children:"刷新列表"}),s[10]=a,s[11]=v):v=s[11],s[12]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(r,{type:"warning",description:t.jsxs(t.Fragment,{children:[t.jsx(x,{className:"mr-1"}),"应用推荐将展示在 “ 每日宝藏 ” 中，服务端设置了 5 分钟缓存，如需查看最新的 “ 每日宝藏 ” 列表，请等待缓存失效或重启服务"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),T=t.jsx(o,{className:"my-3"}),s[12]=N,s[13]=T):(N=s[12],T=s[13]),s[14]===Symbol.for("react.memo_cache_sentinel")?(Q={searchParams:{status:0}},s[14]=Q):Q=s[14],s[15]!==S||s[16]!==n?(z=t.jsx(j,{columns:S,getListUrl:l.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:n,params:Q}),s[15]=S,s[16]=n,s[17]=z):z=s[17],s[18]!==z||s[19]!==v?(L=t.jsxs(f,{children:[v,N,T,z]}),s[18]=z,s[19]=v,s[20]=L):L=s[20],L}function g(e){return t.jsx(k,{color:e?"geekblue":"red",bordered:!1,icon:t.jsx(w,{}),children:e||"已注销"})}function _(e,s){return t.jsx(k,{color:s.tagColor,children:s.tagText||"-"})}function C(e){return t.jsx(i,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function O(e,s){return e?t.jsx(y,{src:e,width:"auto",height:32,className:"p-2 rounded-lg",style:{backgroundColor:s.iconBackground},preview:{maskClassName:"rounded-lg"}}):"-"}const R=s.memo(r=>{const o=e.c(42),{record:p,refresh:j}=r;let f;o[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],o[0]=f):f=o[0];const[h,x]=s.useState(f);let y;o[1]!==p||o[2]!==j?(y=function(){const e=n.getState().user.token;a(0,x),setTimeout(()=>{m({url:l.approveRecommendApp,token:e,data:{id:p.id}}).then(e=>{200===e.code&&j()}).finally(()=>{c(0,x)})},500)},o[1]=p,o[2]=j,o[3]=y):y=o[3];const k=y;let w;o[4]!==p||o[5]!==j?(w=function(e,t){a(t,x);const s=n.getState().user.token;setTimeout(()=>{m({url:"reject"===e?l.rejectRecommendApp:l.deleteRecommendApp,token:s,data:{id:p.id}}).then(e=>{200===e.code&&j()}).finally(()=>{c(t,x)})},500)},o[4]=p,o[5]=j,o[6]=w):w=o[6];const b=w;let g,_,C,O,R;o[7]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},o[7]=g):g=o[7],o[8]!==h[0]?(_=h[0]?t.jsx(u,{}):"通过",o[8]=h[0],o[9]=_):_=o[9],o[10]!==h[0]||o[11]!==_?(C=t.jsx(i,{type:"link",size:"small",disabled:h[0],style:g,children:_}),o[10]=h[0],o[11]=_,o[12]=C):C=o[12],o[13]!==k||o[14]!==C?(O=t.jsx(d,{title:"是否确认审核通过？",onConfirm:k,children:C}),o[13]=k,o[14]=C,o[15]=O):O=o[15],o[16]!==b?(R=()=>{b("reject",1)},o[16]=b,o[17]=R):R=o[17];const S=h[1]||h[2];let A,v,N,T,Q;o[18]===Symbol.for("react.memo_cache_sentinel")?(A={width:"44px"},o[18]=A):A=o[18],o[19]!==h[1]?(v=h[1]?t.jsx(u,{}):"驳回",o[19]=h[1],o[20]=v):v=o[20],o[21]!==v||o[22]!==S?(N=t.jsx(i,{danger:!0,type:"link",size:"small",disabled:S,style:A,children:v}),o[21]=v,o[22]=S,o[23]=N):N=o[23],o[24]!==N||o[25]!==R?(T=t.jsx(d,{title:"是否确认驳回申请",onConfirm:R,children:N}),o[24]=N,o[25]=R,o[26]=T):T=o[26],o[27]!==b?(Q=()=>{b("delete",2)},o[27]=b,o[28]=Q):Q=o[28];const z=h[1]||h[2];let L,M,U,B,F;return o[29]===Symbol.for("react.memo_cache_sentinel")?(L={width:"44px"},o[29]=L):L=o[29],o[30]!==h[2]?(M=h[2]?t.jsx(u,{}):"删除",o[30]=h[2],o[31]=M):M=o[31],o[32]!==z||o[33]!==M?(U=t.jsx(i,{danger:!0,type:"link",size:"small",disabled:z,style:L,children:M}),o[32]=z,o[33]=M,o[34]=U):U=o[34],o[35]!==Q||o[36]!==U?(B=t.jsx(d,{title:"是否确认删除该申请？",onConfirm:Q,children:U}),o[35]=Q,o[36]=U,o[37]=B):B=o[37],o[38]!==T||o[39]!==B||o[40]!==O?(F=t.jsxs("div",{className:"flex flex-wrap",children:[O,T,B]}),o[38]=T,o[39]=B,o[40]=O,o[41]=F):F=o[41],F});export{b as default};
