import{e,bw as t,bo as n,br as r,bi as a,k as s,aO as o,z as l,f as u,bh as c,bg as i,v as f,u as p,aX as m,bJ as d,aK as v,bH as g,bI as C,b9 as b,bN as x}from"./requestIdleCallbackPolyfill-BoNiFUcB.js";import{r as w,B as y,t as h,s as E,v as N,q as O,w as S,u as R,l as $,m as j}from"./getAllowClear-CmTZZq-n.js";var F={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},B=function(r,a){return e.createElement(t,n({},r,{ref:a,icon:F}))},z=e.forwardRef(B),A=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],I=e.forwardRef((function(t,p){var m=t.autoComplete,d=t.onChange,v=t.onFocus,g=t.onBlur,C=t.onPressEnter,b=t.onKeyDown,x=t.onKeyUp,N=t.prefixCls,O=void 0===N?"rc-input":N,S=t.disabled,R=t.htmlSize,$=t.className,j=t.maxLength,F=t.suffix,B=t.showCount,z=t.count,I=t.type,P=void 0===I?"text":I,K=t.classes,k=t.classNames,L=t.styles,D=t.onCompositionStart,T=t.onCompositionEnd,U=r(t,A),q=e.useState(!1),H=a(q,2),M=H[0],V=H[1],W=e.useRef(!1),J=e.useRef(!1),X=e.useRef(null),G=e.useRef(null),Q=function(e){X.current&&h(X.current,e)},Y=s(t.defaultValue,{value:t.value}),Z=a(Y,2),_=Z[0],ee=Z[1],te=null==_?"":String(_),ne=e.useState(null),re=a(ne,2),ae=re[0],se=re[1],oe=w(z,B),le=oe.max||j,ue=oe.strategy(te),ce=!!le&&ue>le;e.useImperativeHandle(p,(function(){var e;return{focus:Q,blur:function(){var e;null===(e=X.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var r;null===(r=X.current)||void 0===r||r.setSelectionRange(e,t,n)},select:function(){var e;null===(e=X.current)||void 0===e||e.select()},input:X.current,nativeElement:(null===(e=G.current)||void 0===e?void 0:e.nativeElement)||X.current}})),e.useEffect((function(){J.current&&(J.current=!1),V((function(e){return(!e||!S)&&e}))}),[S]);var ie=function(e,t,n){var r,a,s=t;if(!W.current&&oe.exceedFormatter&&oe.max&&oe.strategy(t)>oe.max)t!==(s=oe.exceedFormatter(t,{max:oe.max}))&&se([(null===(r=X.current)||void 0===r?void 0:r.selectionStart)||0,(null===(a=X.current)||void 0===a?void 0:a.selectionEnd)||0]);else if("compositionEnd"===n.source)return;ee(s),X.current&&E(X.current,e,d,s)};e.useEffect((function(){var e;ae&&(null===(e=X.current)||void 0===e||e.setSelectionRange.apply(e,o(ae)))}),[ae]);var fe,pe=function(e){ie(e,e.target.value,{source:"change"})},me=function(e){W.current=!1,ie(e,e.currentTarget.value,{source:"compositionEnd"}),null==T||T(e)},de=function(e){C&&"Enter"===e.key&&!J.current&&(J.current=!0,C(e)),null==b||b(e)},ve=function(e){"Enter"===e.key&&(J.current=!1),null==x||x(e)},ge=function(e){V(!0),null==v||v(e)},Ce=function(e){J.current&&(J.current=!1),V(!1),null==g||g(e)},be=ce&&"".concat(O,"-out-of-range");return l.createElement(y,n({},U,{prefixCls:O,className:u($,be),handleReset:function(e){ee(""),Q(),X.current&&E(X.current,e,d)},value:te,focused:M,triggerFocus:Q,suffix:function(){var e=Number(le)>0;if(F||oe.show){var t=oe.showFormatter?oe.showFormatter({value:te,count:ue,maxLength:le}):"".concat(ue).concat(e?" / ".concat(le):"");return l.createElement(l.Fragment,null,oe.show&&l.createElement("span",{className:u("".concat(O,"-show-count-suffix"),i({},"".concat(O,"-show-count-has-suffix"),!!F),null==k?void 0:k.count),style:c({},null==L?void 0:L.count)},t),F)}return null}(),disabled:S,classes:K,classNames:k,styles:L,ref:G}),(fe=f(t,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]),l.createElement("input",n({autoComplete:m},fe,{onChange:pe,onFocus:ge,onBlur:Ce,onKeyDown:de,onKeyUp:ve,className:u(O,i({},"".concat(O,"-disabled"),S),null==k?void 0:k.input),style:null==L?void 0:L.input,ref:X,size:R,type:P,onCompositionStart:function(e){W.current=!0,null==D||D(e)},onCompositionEnd:me}))))}));function P(t,n){const r=e.useRef([]),a=()=>{r.current.push(setTimeout((()=>{var e,n,r,a;(null===(e=t.current)||void 0===e?void 0:e.input)&&"password"===(null===(n=t.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=t.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(a=t.current)||void 0===a||a.input.removeAttribute("value"))})))};return e.useEffect((()=>(n&&a(),()=>r.current.forEach((e=>{e&&clearTimeout(e)})))),[]),a}const K=e.forwardRef(((t,n)=>{const{prefixCls:r,bordered:a=!0,status:s,size:o,disabled:c,onBlur:i,onFocus:f,suffix:w,allowClear:y,addonAfter:h,addonBefore:E,className:F,style:B,styles:z,rootClassName:A,onChange:K,classNames:k,variant:L}=t,D=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}(t,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:T,direction:U,allowClear:q,autoComplete:H,className:M,style:V,classNames:W,styles:J}=p("input"),X=T("input",r),G=e.useRef(null),Q=m(X),[Y,Z,_]=N(X,A),[ee]=O(X,Q),{compactSize:te,compactItemClassnames:ne}=d(X,U),re=v((e=>{var t;return null!==(t=null!=o?o:te)&&void 0!==t?t:e})),ae=l.useContext(g),se=null!=c?c:ae,{status:oe,hasFeedback:le,feedbackIcon:ue}=e.useContext(C),ce=j(oe,s),ie=function(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}(t)||!!le;e.useRef(ie);const fe=P(G,!0),pe=(le||w)&&l.createElement(l.Fragment,null,w,le&&ue),me=S(null!=y?y:q),[de,ve]=R("input",L,a);return Y(ee(l.createElement(I,Object.assign({ref:b(n,G),prefixCls:X,autoComplete:H},D,{disabled:se,onBlur:e=>{fe(),null==i||i(e)},onFocus:e=>{fe(),null==f||f(e)},style:Object.assign(Object.assign({},V),B),styles:Object.assign(Object.assign({},J),z),suffix:pe,allowClear:me,className:u(F,A,_,Q,ne,M),onChange:e=>{fe(),null==K||K(e)},addonBefore:E&&l.createElement(x,{form:!0,space:!0},E),addonAfter:h&&l.createElement(x,{form:!0,space:!0},h),classNames:Object.assign(Object.assign(Object.assign({},k),W),{input:u({[`${X}-sm`]:"small"===re,[`${X}-lg`]:"large"===re,[`${X}-rtl`]:"rtl"===U},null==k?void 0:k.input,W.input,Z),variant:u({[`${X}-${de}`]:ve},$(X,ce)),affixWrapper:u({[`${X}-affix-wrapper-sm`]:"small"===re,[`${X}-affix-wrapper-lg`]:"large"===re,[`${X}-affix-wrapper-rtl`]:"rtl"===U},Z),wrapper:u({[`${X}-group-rtl`]:"rtl"===U},Z),groupWrapper:u({[`${X}-group-wrapper-sm`]:"small"===re,[`${X}-group-wrapper-lg`]:"large"===re,[`${X}-group-wrapper-rtl`]:"rtl"===U,[`${X}-group-wrapper-${de}`]:ve},$(`${X}-group-wrapper`,ce,le),Z)})}))))}));export{K as I,z as R,F as S,I as a,P as u};
