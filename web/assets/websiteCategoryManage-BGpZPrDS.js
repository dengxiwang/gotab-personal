import{x as e,e as t,j as s,B as r,ao as i,a8 as o,ax as a,ah as l,a0 as n,ag as m,af as c,aj as d}from"./main-CD0zUXTL.js";import{u as j,R as p}from"./useFresh-C0ydC2D3.js";import{r as h}from"./transformData-BQH7chON.js";import{M as f,R as x}from"./myTable-ZSYYS2U8.js";import{C as u}from"./contentLayout-BsKw27WM.js";import{F as y}from"./index-CPWVZU1v.js";import{I as b}from"./index-CS9jTL4o.js";import{R as _,a as g}from"./SearchOutlined-DoicOXKf.js";import{T as S}from"./index-DRF0O40K.js";import{R as C}from"./SortAscendingOutlined-BHGeVpRu.js";import{T as w}from"./index-B1ITt1Ri.js";import{P as k}from"./main-j5iLq8Sk.js";import"./index-Bn4721qN.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-Cl2XolnV.js";import"./Overflow-Dth-jHIb.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-BxI9IZHD.js";import"./getAllowClear-CZO_kcqc.js";import"./Input-DAmAjPDT.js";import"./assets-CmvcfQKP.js";import"./MoneyCollectOutlined-FkshC0iu.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-Cl-JmkYn.js";import"./styleChecker-D6YSF6t4.js";import"./AlipayOutlined-C8qbQhus.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-Cuy2s8Sf.js";import"./useBreakpoint-BfXG9374.js";import"./index-CYN5EPmR.js";import"./row-D5tVqh3E.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-CFMh1Qsp.js";import"./SortAscendingOutlined-8bEGxkuH.js";function O(){const n=e.c(40),{key:m,refresh:c}=j(),[d]=y.useForm();let p;n[0]===Symbol.for("react.memo_cache_sentinel")?(p={},n[0]=p):p=n[0];const[x,S]=t.useState(p);let C,w,k,O;n[1]===Symbol.for("react.memo_cache_sentinel")?(C={title:"分类名称",key:"name",width:160,fixed:"left"},w={title:"排序",key:"sort",width:80,render:F},k={title:"更新时间",key:"updatedTime",width:200,render:T},n[1]=C,n[2]=w,n[3]=k):(C=n[1],w=n[2],k=n[3]),n[4]!==c?(O=[C,w,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(I,{record:t,refresh:c})}],n[4]=c,n[5]=O):O=n[5];const A=O;let M,N,L,R,W,z,K,U,V,q,B,D,P,Q,E,G;return n[6]!==d?(M=()=>{const e=d.getFieldsValue();e[Math.random()]=!0,S(h(e))},n[6]=d,n[7]=M):M=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(N={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},n[8]=N):N=n[8],n[9]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:N,children:s.jsx(y.Item,{name:"name",children:s.jsx(b,{placeholder:"分类名称"})})}),n[9]=L):L=n[9],n[10]!==d?(R=()=>{d.submit()},n[10]=d,n[11]=R):R=n[11],n[12]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(_,{}),n[12]=W):W=n[12],n[13]!==R?(z=s.jsx(r,{type:"primary",onClick:R,icon:W,children:"查询"}),n[13]=R,n[14]=z):z=n[14],n[15]!==d?(K=()=>{d.resetFields();const e={};e[Math.random()]=!0,S(e)},n[15]=d,n[16]=K):K=n[16],n[17]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(g,{}),n[17]=U):U=n[17],n[18]!==K?(V=s.jsx(r,{onClick:K,icon:U,children:"重置"}),n[18]=K,n[19]=V):V=n[19],n[20]!==z||n[21]!==V?(q=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[z,V]}),n[20]=z,n[21]=V,n[22]=q):q=n[22],n[23]!==d||n[24]!==q||n[25]!==M?(B=s.jsxs(y,{className:"w-full",form:d,onFinish:M,children:[L,q]}),n[23]=d,n[24]=q,n[25]=M,n[26]=B):B=n[26],n[27]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(i,{className:"my-3"}),n[27]=D):D=n[27],n[28]!==c?(P=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{o.show(a,{title:"新增分类",children:s.jsx(v,{refresh:c,type:"add"})})},children:"新增分类"})}),n[28]=c,n[29]=P):P=n[29],n[30]!==x?(Q={searchParams:x},n[30]=x,n[31]=Q):Q=n[31],n[32]!==A||n[33]!==m||n[34]!==Q?(E=s.jsx(f,{columns:A,getListUrl:l.getWebsiteCategoryList,dataKey:"data.list",tableKey:m,params:Q}),n[32]=A,n[33]=m,n[34]=Q,n[35]=E):E=n[35],n[36]!==B||n[37]!==P||n[38]!==E?(G=s.jsxs(u,{children:[B,D,P,E]}),n[36]=B,n[37]=P,n[38]=E,n[39]=G):G=n[39],G}function T(e,t){return s.jsx(S,{icon:s.jsx(p,{}),children:e||t.createdTime})}function F(e){return s.jsx(S,{color:"gold",icon:s.jsx(C,{}),children:e||"-"})}const v=i=>{const c=e.c(16),{editItem:d,refresh:j,type:p}=i,h=void 0===p?"add":p,[f]=y.useForm(),[x,u]=t.useState(!1);let _;c[0]!==d||c[1]!==j||c[2]!==h?(_=function(e){u(!0);const t=n.getState().user.token;m({url:"add"===h?l.addWebsiteCategory:l.editWebsiteCategory,token:t,data:"add"===h?e:{...e,id:d.id}}).then((e=>{200===e.code&&(o.hide(a),j&&j())})).finally((()=>{u(!1)}))},c[0]=d,c[1]=j,c[2]=h,c[3]=_):_=c[3];const g=_;let S,C,k,O;c[4]===Symbol.for("react.memo_cache_sentinel")?(S={flex:"82px"},c[4]=S):S=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(y.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(b,{placeholder:"分类名称"})}),c[5]=C):C=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(y.Item,{name:"sort",label:"排序",children:s.jsx(w,{placeholder:"排序"})}),c[6]=k):k=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(r,{onClick:A,children:"取消"}),c[7]=O):O=c[7];const T="add"===h?"新增分类":"编辑";let F,v;return c[8]!==x||c[9]!==T?(F=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[O,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:T})]}),c[8]=x,c[9]=T,c[10]=F):F=c[10],c[11]!==d||c[12]!==f||c[13]!==g||c[14]!==F?(v=s.jsx(s.Fragment,{children:s.jsxs(y,{form:f,autoComplete:"off",variant:"filled",initialValues:d,labelCol:S,onFinish:g,children:[C,k,F]})}),c[11]=d,c[12]=f,c[13]=g,c[14]=F,c[15]=v):v=c[15],v},I=t.memo((i=>{const j=e.c(20),{record:p,refresh:h}=i;let f;j[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],j[0]=f):f=j[0];const[u,y]=t.useState(f);let b;j[1]!==p||j[2]!==h?(b=function(){c(1,y);const e=n.getState().user.token;setTimeout((()=>{m({url:l.deleteWebsiteCategory,token:e,data:{id:p.id}}).then((e=>{200===e.code&&h()})).finally((()=>{d(1,y)}))}),500)},j[1]=p,j[2]=h,j[3]=b):b=j[3];const _=b;let g,S,C,w,O,T,F;return j[4]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},j[4]=g):g=j[4],j[5]!==p||j[6]!==h?(S=s.jsx(r,{type:"link",size:"small",style:g,onClick:()=>{o.show(a,{title:"编辑分类",children:s.jsx(v,{editItem:p,refresh:h,type:"edit"})})},children:"编辑"}),j[5]=p,j[6]=h,j[7]=S):S=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},j[8]=C):C=j[8],j[9]!==u[1]?(w=u[1]?s.jsx(x,{}):"删除",j[9]=u[1],j[10]=w):w=j[10],j[11]!==u[1]||j[12]!==w?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:u[1],style:C,children:w}),j[11]=u[1],j[12]=w,j[13]=O):O=j[13],j[14]!==_||j[15]!==O?(T=s.jsx(k,{title:"是否确认删除？",onConfirm:_,children:O}),j[14]=_,j[15]=O,j[16]=T):T=j[16],j[17]!==S||j[18]!==T?(F=s.jsxs("div",{className:"flex flex-wrap",children:[S,T]}),j[17]=S,j[18]=T,j[19]=F):F=j[19],F}));function A(){o.hide(a)}export{O as default};
