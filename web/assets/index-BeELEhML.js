import{z as e,e as l,C as a,bH as t,bG as n,b9 as s,aX as r,f as o,e0 as i,bN as u,v as c,aO as d}from"./requestIdleCallbackPolyfill-DVdtTnyH.js";import{u as p,C as f}from"./index-3_wMreGH.js";import{s as m}from"./useFresh-CBaqby8v.js";const v=e.createContext(null);const b=(e,c)=>{var d;const{prefixCls:b,className:C,rootClassName:g,children:y,indeterminate:O=!1,style:x,onMouseEnter:h,onMouseLeave:N,skipGroup:E=!1,disabled:j}=e,k=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:w,direction:P,checkbox:$}=l.useContext(a),M=l.useContext(v),{isFormItemInput:V}=l.useContext(t),I=l.useContext(n),S=null!==(d=(null==M?void 0:M.disabled)||j)&&void 0!==d?d:I,G=l.useRef(k.value),R=l.useRef(null),q=s(c,R);l.useEffect((()=>{null==M||M.registerValue(k.value)}),[]),l.useEffect((()=>{if(!E)return k.value!==G.current&&(null==M||M.cancelValue(G.current),null==M||M.registerValue(k.value),G.current=k.value),()=>null==M?void 0:M.cancelValue(k.value)}),[k.value]),l.useEffect((()=>{var e;(null===(e=R.current)||void 0===e?void 0:e.input)&&(R.current.input.indeterminate=O)}),[O]);const L=w("checkbox",b),X=r(L),[_,F,H]=m(L,X),z=Object.assign({},k);M&&!E&&(z.onChange=(...e)=>{k.onChange&&k.onChange.apply(k,e),M.toggleOption&&M.toggleOption({label:y,value:k.value})},z.name=M.name,z.checked=M.value.includes(k.value));const A=o(`${L}-wrapper`,{[`${L}-rtl`]:"rtl"===P,[`${L}-wrapper-checked`]:z.checked,[`${L}-wrapper-disabled`]:S,[`${L}-wrapper-in-form-item`]:V},null==$?void 0:$.className,C,g,H,X,F),B=o({[`${L}-indeterminate`]:O},i,F),[K,T]=p(z.onClick);return _(l.createElement(u,{component:"Checkbox",disabled:S},l.createElement("label",{className:A,style:Object.assign(Object.assign({},null==$?void 0:$.style),x),onMouseEnter:h,onMouseLeave:N,onClick:K},l.createElement(f,Object.assign({},z,{onClick:T,prefixCls:L,className:B,disabled:S,ref:q})),null!=y&&l.createElement("span",{className:`${L}-label`},y))))},C=l.forwardRef(b);const g=l.forwardRef(((e,t)=>{const{defaultValue:n,children:s,options:i=[],prefixCls:u,className:p,rootClassName:f,style:b,onChange:g}=e,y=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:O,direction:x}=l.useContext(a),[h,N]=l.useState(y.value||n||[]),[E,j]=l.useState([]);l.useEffect((()=>{"value"in y&&N(y.value||[])}),[y.value]);const k=l.useMemo((()=>i.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e))),[i]),w=e=>{j((l=>l.filter((l=>l!==e))))},P=e=>{j((l=>[].concat(d(l),[e])))},$=e=>{const l=h.indexOf(e.value),a=d(h);-1===l?a.push(e.value):a.splice(l,1),"value"in y||N(a),null==g||g(a.filter((e=>E.includes(e))).sort(((e,l)=>k.findIndex((l=>l.value===e))-k.findIndex((e=>e.value===l)))))},M=O("checkbox",u),V=`${M}-group`,I=r(M),[S,G,R]=m(M,I),q=c(y,["value","disabled"]),L=i.length?k.map((e=>l.createElement(C,{prefixCls:M,key:e.value.toString(),disabled:"disabled"in e?e.disabled:y.disabled,value:e.value,checked:h.includes(e.value),onChange:e.onChange,className:o(`${V}-item`,e.className),style:e.style,title:e.title,id:e.id,required:e.required},e.label))):s,X=l.useMemo((()=>({toggleOption:$,value:h,disabled:y.disabled,name:y.name,registerValue:P,cancelValue:w})),[$,h,y.disabled,y.name,P,w]),_=o(V,{[`${V}-rtl`]:"rtl"===x},p,f,R,I,G);return S(l.createElement("div",Object.assign({className:_,style:b},q,{ref:t}),l.createElement(v.Provider,{value:X},L)))})),y=C;y.Group=g,y.__ANT_CHECKBOX=!0;export{y as C};
