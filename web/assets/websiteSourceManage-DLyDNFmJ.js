import{c as e,u as t,h as r,r as s,j as i,O as l,a3 as o,a4 as n,B as a,F as m,$ as c,a0 as d,o as p,k as h,l as j,n as u,v as f,Z as x}from"./requestIdleCallbackPolyfill-D8B_BKnT.js";import{u as y}from"./useFresh-BUuBr55E.js";import{r as b}from"./transformData-I6KNoMyM.js";import{M as k,R as g}from"./myTable-Bw5nZYMM.js";import{S as w}from"./submitForInclusion-CxZkXDoU.js";import{C as _}from"./contentLayout-Cec8vBj1.js";import{F as S}from"./index-B2ixuohe.js";import{I as C}from"./index-TisZiSXW.js";import{S as O}from"./index-D4WtNhOo.js";import{R as I,a as N}from"./SearchOutlined-CS-O8CoH.js";import{T as v}from"./index-BCDvAev9.js";import{R as A}from"./SortAscendingOutlined--DGE7phQ.js";import{R as F}from"./UserOutlined-BslMzFSD.js";import"./index-CI9JbC4F.js";import"./index-DnSEZuBE.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-R82Bt56K.js";import"./Overflow-BfGTIhT_.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-BSdsMMzq.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-CWgDWLMJ.js";import"./styleChecker-DVoz1gP1.js";import"./AlipayOutlined-wNzKHUw3.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-wRQlRSG9.js";import"./getAllowClear-CQLKcf9H.js";import"./index-Cygrp0aV.js";import"./Input-D9mDpepV.js";import"./myModal-DBZvI2Sk.js";import"./CloudUploadOutlined-C9h1FgUY.js";import"./ColorPicker-CgJeeHlX.js";import"./index-Bn_GhTBI.js";import"./index-DGmv9TK2.js";import"./row-4ykR7CPL.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-B6IaI5ik.js";import"./SortAscendingOutlined-8bEGxkuH.js";function M(){const h=e.c(60),{key:j,refresh:u}=y(),f=t(),x=r(B);let g;h[0]!==x?(g=x.filter(Q).map(z),h[0]=x,h[1]=g):g=h[1];const v=g,[A]=S.useForm();let F;h[2]===Symbol.for("react.memo_cache_sentinel")?(F={},h[2]=F):F=h[2];const[M,V]=s.useState(F);let Z;h[3]!==x||h[4]!==f?(Z=function(){l({url:p.getCategoryListWithAll}).then(e=>{if(200===e.code&&e.data){const t=e.data.map(W);o(t,x)||f(n(t))}})},h[3]=x,h[4]=f,h[5]=Z):Z=h[5];const q=Z;let D,E,X,Y,$,G,H,J,ee,te,re,se;h[6]!==x.length||h[7]!==q?(D=()=>{0===x.length&&q()},h[6]=x.length,h[7]=q,h[8]=D):D=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(E=[],h[9]=E):E=h[9],s.useEffect(D,E),h[10]===Symbol.for("react.memo_cache_sentinel")?(H={title:"网站名称",key:"title",width:200,fixed:"left"},J={title:"状态",key:"status",width:80,render:P},ee={title:"排序",key:"sort",width:80,render:U},te={title:"网站描述",key:"description",width:450},re={title:"图标",key:"icon",width:140,render:R},X={title:"链接",key:"url",width:120,render:L},Y={title:"所属分类",key:"categoryName",width:120},$={title:"提交人",key:"username",width:160,render:T},G={type:"time",title:"更新时间",key:"createdTime",width:200},h[10]=X,h[11]=Y,h[12]=$,h[13]=G,h[14]=H,h[15]=J,h[16]=ee,h[17]=te,h[18]=re):(X=h[10],Y=h[11],$=h[12],G=h[13],H=h[14],J=h[15],ee=h[16],te=h[17],re=h[18]),h[19]!==u?(se=[H,J,ee,te,re,X,Y,$,G,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(K,{record:t,refresh:u})}],h[19]=u,h[20]=se):se=h[20];const ie=se;let le,oe,ne,ae,me,ce,de,pe,he,je,ue,fe,xe,ye,be,ke,ge,we,_e;return h[21]!==A?(le=()=>{const e=A.getFieldsValue();e[Math.random()]=!0,V(b(e))},h[21]=A,h[22]=le):le=h[22],h[23]===Symbol.for("react.memo_cache_sentinel")?(oe={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},h[23]=oe):oe=h[23],h[24]===Symbol.for("react.memo_cache_sentinel")?(ne=i.jsx(S.Item,{name:"title",children:i.jsx(C,{placeholder:"标题"})}),h[24]=ne):ne=h[24],h[25]===Symbol.for("react.memo_cache_sentinel")?(ae=i.jsx(S.Item,{name:"link",children:i.jsx(C,{placeholder:"链接"})}),h[25]=ae):ae=h[25],h[26]===Symbol.for("react.memo_cache_sentinel")?(me=i.jsx(S.Item,{name:"username",children:i.jsx(C,{placeholder:"用户名"})}),h[26]=me):me=h[26],h[27]!==v?(ce=i.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:oe,children:[ne,ae,me,i.jsx(S.Item,{name:"categoryId",children:i.jsx(O,{placeholder:"分类",options:v,allowClear:!0})})]}),h[27]=v,h[28]=ce):ce=h[28],h[29]!==A?(de=()=>{A.submit()},h[29]=A,h[30]=de):de=h[30],h[31]===Symbol.for("react.memo_cache_sentinel")?(pe=i.jsx(I,{}),h[31]=pe):pe=h[31],h[32]!==de?(he=i.jsx(a,{type:"primary",onClick:de,icon:pe,children:"查询"}),h[32]=de,h[33]=he):he=h[33],h[34]!==A?(je=()=>{A.resetFields();const e={};e[Math.random()]=!0,V(e)},h[34]=A,h[35]=je):je=h[35],h[36]===Symbol.for("react.memo_cache_sentinel")?(ue=i.jsx(N,{}),h[36]=ue):ue=h[36],h[37]!==je?(fe=i.jsx(a,{onClick:je,icon:ue,children:"重置"}),h[37]=je,h[38]=fe):fe=h[38],h[39]!==he||h[40]!==fe?(xe=i.jsxs("div",{className:"flex flex-wrap gap-3",children:[he,fe]}),h[39]=he,h[40]=fe,h[41]=xe):xe=h[41],h[42]!==A||h[43]!==le||h[44]!==ce||h[45]!==xe?(ye=i.jsxs(S,{className:"w-full",form:A,onFinish:le,children:[ce,xe]}),h[42]=A,h[43]=le,h[44]=ce,h[45]=xe,h[46]=ye):ye=h[46],h[47]===Symbol.for("react.memo_cache_sentinel")?(be=i.jsx(m,{className:"my-3"}),h[47]=be):be=h[47],h[48]!==u?(ke=i.jsx("div",{className:"mb-3",children:i.jsx(a,{type:"primary",onClick:()=>{c.show(d,{title:"新增收录",children:i.jsx(w,{refresh:u})})},children:"新增收录"})}),h[48]=u,h[49]=ke):ke=h[49],h[50]!==M?(ge={searchParams:M},h[50]=M,h[51]=ge):ge=h[51],h[52]!==ie||h[53]!==j||h[54]!==ge?(we=i.jsx(k,{columns:ie,getListUrl:p.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:j,params:ge}),h[52]=ie,h[53]=j,h[54]=ge,h[55]=we):we=h[55],h[56]!==ye||h[57]!==ke||h[58]!==we?(_e=i.jsxs(_,{children:[ye,be,ke,we]}),h[56]=ye,h[57]=ke,h[58]=we,h[59]=_e):_e=h[59],_e}function T(e){return i.jsx(v,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(F,{}),children:e||"已注销"})}function L(e){return i.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function R(e,t){return e?i.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[i.jsx("img",{src:h(e),className:"rounded-sm",style:{width:"32px",height:"32px"}}),i.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function U(e){return i.jsx(v,{color:"gold",icon:i.jsx(A,{}),children:e||"-"})}function P(e){return i.jsx(v,{color:0===e?"blue":1===e?"green":2===e?"default":"red",children:0===e?"待审核":1===e?"正常":2===e?"隐藏":"被驳回"})}function W(e){return{label:e.label,key:e.id}}function z(e){return{label:e.label,value:String(e.key)}}function Q(e){return e&&0!==e.key}function B(e){return e.stateUtils.categoryList}const K=s.memo(t=>{const l=e.c(24),{record:o,refresh:n}=t;let m;l[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],l[0]=m):m=l[0];const[h,y]=s.useState(m),b=r(V);let k;l[1]!==o||l[2]!==n||l[3]!==b?(k=function(){j(1,y),setTimeout(()=>{u({url:p.deleteWebsiteInfo,token:b,data:{id:o.id}}).then(e=>{200===e.code&&n()}).finally(()=>{f(1,y)})},500)},l[1]=o,l[2]=n,l[3]=b,l[4]=k):k=l[4];const _=k;let S,C,O,I,N,v,A,F;return l[5]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},l[5]=S):S=l[5],l[6]!==o||l[7]!==n?(C=()=>{c.show(d,{title:"编辑收录信息",children:i.jsx(w,{editItem:o,refresh:n,type:"edit"})})},l[6]=o,l[7]=n,l[8]=C):C=l[8],l[9]!==h[0]||l[10]!==C?(O=i.jsx(a,{type:"link",size:"small",disabled:h[0],style:S,onClick:C,children:"编辑"}),l[9]=h[0],l[10]=C,l[11]=O):O=l[11],l[12]===Symbol.for("react.memo_cache_sentinel")?(I={width:"44px"},l[12]=I):I=l[12],l[13]!==h[1]?(N=h[1]?i.jsx(g,{}):"删除",l[13]=h[1],l[14]=N):N=l[14],l[15]!==h[1]||l[16]!==N?(v=i.jsx(a,{danger:!0,type:"link",size:"small",disabled:h[1],style:I,children:N}),l[15]=h[1],l[16]=N,l[17]=v):v=l[17],l[18]!==_||l[19]!==v?(A=i.jsx(x,{title:"是否确认删除该收录？",onConfirm:_,children:v}),l[18]=_,l[19]=v,l[20]=A):A=l[20],l[21]!==O||l[22]!==A?(F=i.jsxs("div",{className:"flex flex-wrap",children:[O,A]}),l[21]=O,l[22]=A,l[23]=F):F=l[23],F});function V(e){return e.user.token}export{M as default};
