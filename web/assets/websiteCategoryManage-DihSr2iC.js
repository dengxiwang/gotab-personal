import{c as e,r as t,j as s,B as r,Q as i,F as l,$ as o,a0 as a,o as n,a as m,n as c,l as d,v as p,Z as j}from"./main-BznldwrR.js";import{u as h,R as f}from"./useFresh-BBfhmAj4.js";import{r as x}from"./transformData-W7IqF1wa.js";import{M as u,R as y}from"./myTable-CoesqfYG.js";import{C as b}from"./contentLayout-CRmsUyuP.js";import{F as _}from"./index-CM88uxhR.js";import{I as g}from"./index-CU_E_toA.js";import{R as S,a as w}from"./SearchOutlined-DHK_Zbuv.js";import{R as C}from"./QuestionCircleOutlined-Cbz-ZHDf.js";import{T as k}from"./index-BJB7vPB3.js";import{R as O}from"./SortAscendingOutlined-DZ_1GySp.js";import{T as F}from"./index-Cv7tdZmO.js";import"./index-B5NmSUX2.js";import"./index-DbTnZT_A.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-CI-nFNPu.js";import"./Overflow-t0s94lkY.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-pOq2t2PQ.js";import"./getAllowClear-Bhk0ADw3.js";import"./Input-MFSIJ5db.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-4U8275jN.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DiYt940-.js";import"./styleChecker-CNiLJu-y.js";import"./AlipayOutlined-i_cP3CWs.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-BajckZld.js";import"./index-DJHRXG-n.js";import"./row-CgX7p7wl.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-CUVoyy7V.js";import"./SortAscendingOutlined-8bEGxkuH.js";function T(){const m=e.c(41),{key:c,refresh:d}=h(),[p]=_.useForm();let j;m[0]===Symbol.for("react.memo_cache_sentinel")?(j={},m[0]=j):j=m[0];const[f,y]=t.useState(j);let k,O,F,T;m[1]===Symbol.for("react.memo_cache_sentinel")?(k={title:"分类名称",key:"name",width:160,fixed:"left"},O={title:"排序",key:"sort",width:80,render:N},F={title:"更新时间",key:"updatedTime",width:200,render:v},m[1]=k,m[2]=O,m[3]=F):(k=m[1],O=m[2],F=m[3]),m[4]!==d?(T=[k,O,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(A,{record:t,refresh:d})}],m[4]=d,m[5]=T):T=m[5];const M=T;let R,W,L,Q,V,q,z,B,K,P,U,D,X,Y,Z,$,E;return m[6]!==p?(R=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,y(x(e))},m[6]=p,m[7]=R):R=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(W={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},m[8]=W):W=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:W,children:s.jsx(_.Item,{name:"name",children:s.jsx(g,{placeholder:"分类名称"})})}),m[9]=L):L=m[9],m[10]!==p?(Q=()=>{p.submit()},m[10]=p,m[11]=Q):Q=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(S,{}),m[12]=V):V=m[12],m[13]!==Q?(q=s.jsx(r,{type:"primary",onClick:Q,icon:V,children:"查询"}),m[13]=Q,m[14]=q):q=m[14],m[15]!==p?(z=()=>{p.resetFields();const e={};e[Math.random()]=!0,y(e)},m[15]=p,m[16]=z):z=m[16],m[17]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(w,{}),m[17]=B):B=m[17],m[18]!==z?(K=s.jsx(r,{onClick:z,icon:B,children:"重置"}),m[18]=z,m[19]=K):K=m[19],m[20]!==q||m[21]!==K?(P=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[q,K]}),m[20]=q,m[21]=K,m[22]=P):P=m[22],m[23]!==p||m[24]!==P||m[25]!==R?(U=s.jsxs(_,{className:"w-full",form:p,onFinish:R,children:[L,P]}),m[23]=p,m[24]=P,m[25]=R,m[26]=U):U=m[26],m[27]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(i,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(C,{className:"mr-1"}),"收录分类在前端获取列表时做了 10 分钟的缓存效果，可能存在数据不及时更新情况，请重启或等待缓存失效"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),X=s.jsx(l,{className:"my-3"}),m[27]=D,m[28]=X):(D=m[27],X=m[28]),m[29]!==d?(Y=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{o.show(a,{title:"新增分类",children:s.jsx(I,{refresh:d,type:"add"})})},children:"新增分类"})}),m[29]=d,m[30]=Y):Y=m[30],m[31]!==f?(Z={searchParams:f},m[31]=f,m[32]=Z):Z=m[32],m[33]!==M||m[34]!==c||m[35]!==Z?($=s.jsx(u,{columns:M,getListUrl:n.getWebsiteCategoryList,dataKey:"data.list",tableKey:c,params:Z}),m[33]=M,m[34]=c,m[35]=Z,m[36]=$):$=m[36],m[37]!==U||m[38]!==Y||m[39]!==$?(E=s.jsxs(b,{children:[U,D,X,Y,$]}),m[37]=U,m[38]=Y,m[39]=$,m[40]=E):E=m[40],E}function v(e,t){return s.jsx(k,{icon:s.jsx(f,{}),children:e||t.createdTime})}function N(e){return s.jsx(k,{color:"gold",icon:s.jsx(O,{}),children:e||"-"})}const I=i=>{const l=e.c(16),{editItem:d,refresh:p,type:j}=i,h=void 0===j?"add":j,[f]=_.useForm(),[x,u]=t.useState(!1);let y;l[0]!==d||l[1]!==p||l[2]!==h?(y=function(e){u(!0);const t=m.getState().user.token;c({url:"add"===h?n.addWebsiteCategory:n.editWebsiteCategory,token:t,data:"add"===h?e:{...e,id:d.id}}).then(e=>{200===e.code&&(o.hide(a),p&&p())}).finally(()=>{u(!1)})},l[0]=d,l[1]=p,l[2]=h,l[3]=y):y=l[3];const b=y;let S,w,C,k;l[4]===Symbol.for("react.memo_cache_sentinel")?(S={flex:"82px"},l[4]=S):S=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(_.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(g,{placeholder:"分类名称",allowClear:!0})}),l[5]=w):w=l[5],l[6]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(_.Item,{name:"sort",label:"排序",children:s.jsx(F,{placeholder:"排序"})}),l[6]=C):C=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(r,{onClick:M,children:"取消"}),l[7]=k):k=l[7];const O="add"===h?"新增分类":"保存编辑";let T,v;return l[8]!==x||l[9]!==O?(T=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[k,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:O})]}),l[8]=x,l[9]=O,l[10]=T):T=l[10],l[11]!==d||l[12]!==f||l[13]!==b||l[14]!==T?(v=s.jsx(s.Fragment,{children:s.jsxs(_,{form:f,autoComplete:"off",variant:"filled",initialValues:d,labelCol:S,onFinish:b,children:[w,C,T]})}),l[11]=d,l[12]=f,l[13]=b,l[14]=T,l[15]=v):v=l[15],v},A=t.memo(i=>{const l=e.c(20),{record:h,refresh:f}=i;let x;l[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],l[0]=x):x=l[0];const[u,b]=t.useState(x);let _;l[1]!==h||l[2]!==f?(_=function(){d(1,b);const e=m.getState().user.token;setTimeout(()=>{c({url:n.deleteWebsiteCategory,token:e,data:{id:h.id}}).then(e=>{200===e.code&&f()}).finally(()=>{p(1,b)})},500)},l[1]=h,l[2]=f,l[3]=_):_=l[3];const g=_;let S,w,C,k,O,F,T;return l[4]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},l[4]=S):S=l[4],l[5]!==h||l[6]!==f?(w=s.jsx(r,{type:"link",size:"small",style:S,onClick:()=>{o.show(a,{title:"编辑分类",children:s.jsx(I,{editItem:h,refresh:f,type:"edit"})})},children:"编辑"}),l[5]=h,l[6]=f,l[7]=w):w=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},l[8]=C):C=l[8],l[9]!==u[1]?(k=u[1]?s.jsx(y,{}):"删除",l[9]=u[1],l[10]=k):k=l[10],l[11]!==u[1]||l[12]!==k?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:u[1],style:C,children:k}),l[11]=u[1],l[12]=k,l[13]=O):O=l[13],l[14]!==g||l[15]!==O?(F=s.jsx(j,{title:"是否确认删除？",onConfirm:g,children:O}),l[14]=g,l[15]=O,l[16]=F):F=l[16],l[17]!==w||l[18]!==F?(T=s.jsxs("div",{className:"flex flex-wrap",children:[w,F]}),l[17]=w,l[18]=F,l[19]=T):T=l[19],T});function M(){o.hide(a)}export{T as default};
