import{z as e,e as l,C as a,bI as t,bH as n,b9 as s,aX as r,f as o,e1 as i,bP as u,v as c,aO as d}from"./requestIdleCallbackPolyfill-BoNiFUcB.js";import{u as p,C as f}from"./index-BdYAwYNh.js";import{s as m}from"./useFresh-BHMdf25h.js";const v=e.createContext(null);const b=(e,c)=>{var d;const{prefixCls:b,className:C,rootClassName:g,children:y,indeterminate:O=!1,style:x,onMouseEnter:h,onMouseLeave:E,skipGroup:N=!1,disabled:j}=e,k=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:w,direction:P,checkbox:$}=l.useContext(a),I=l.useContext(v),{isFormItemInput:M}=l.useContext(t),V=l.useContext(n),S=null!==(d=(null==I?void 0:I.disabled)||j)&&void 0!==d?d:V,R=l.useRef(k.value),q=l.useRef(null),G=s(c,q);l.useEffect((()=>{null==I||I.registerValue(k.value)}),[]),l.useEffect((()=>{if(!N)return k.value!==R.current&&(null==I||I.cancelValue(R.current),null==I||I.registerValue(k.value),R.current=k.value),()=>null==I?void 0:I.cancelValue(k.value)}),[k.value]),l.useEffect((()=>{var e;(null===(e=q.current)||void 0===e?void 0:e.input)&&(q.current.input.indeterminate=O)}),[O]);const L=w("checkbox",b),X=r(L),[_,F,H]=m(L,X),z=Object.assign({},k);I&&!N&&(z.onChange=(...e)=>{k.onChange&&k.onChange.apply(k,e),I.toggleOption&&I.toggleOption({label:y,value:k.value})},z.name=I.name,z.checked=I.value.includes(k.value));const A=o(`${L}-wrapper`,{[`${L}-rtl`]:"rtl"===P,[`${L}-wrapper-checked`]:z.checked,[`${L}-wrapper-disabled`]:S,[`${L}-wrapper-in-form-item`]:M},null==$?void 0:$.className,C,g,H,X,F),B=o({[`${L}-indeterminate`]:O},i,F),[K,T]=p(z.onClick);return _(l.createElement(u,{component:"Checkbox",disabled:S},l.createElement("label",{className:A,style:Object.assign(Object.assign({},null==$?void 0:$.style),x),onMouseEnter:h,onMouseLeave:E,onClick:K},l.createElement(f,Object.assign({},z,{onClick:T,prefixCls:L,className:B,disabled:S,ref:G})),null!=y&&l.createElement("span",{className:`${L}-label`},y))))},C=l.forwardRef(b);const g=l.forwardRef(((e,t)=>{const{defaultValue:n,children:s,options:i=[],prefixCls:u,className:p,rootClassName:f,style:b,onChange:g}=e,y=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:O,direction:x}=l.useContext(a),[h,E]=l.useState(y.value||n||[]),[N,j]=l.useState([]);l.useEffect((()=>{"value"in y&&E(y.value||[])}),[y.value]);const k=l.useMemo((()=>i.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e))),[i]),w=e=>{j((l=>l.filter((l=>l!==e))))},P=e=>{j((l=>[].concat(d(l),[e])))},$=e=>{const l=h.indexOf(e.value),a=d(h);-1===l?a.push(e.value):a.splice(l,1),"value"in y||E(a),null==g||g(a.filter((e=>N.includes(e))).sort(((e,l)=>k.findIndex((l=>l.value===e))-k.findIndex((e=>e.value===l)))))},I=O("checkbox",u),M=`${I}-group`,V=r(I),[S,R,q]=m(I,V),G=c(y,["value","disabled"]),L=i.length?k.map((e=>l.createElement(C,{prefixCls:I,key:e.value.toString(),disabled:"disabled"in e?e.disabled:y.disabled,value:e.value,checked:h.includes(e.value),onChange:e.onChange,className:o(`${M}-item`,e.className),style:e.style,title:e.title,id:e.id,required:e.required},e.label))):s,X=l.useMemo((()=>({toggleOption:$,value:h,disabled:y.disabled,name:y.name,registerValue:P,cancelValue:w})),[$,h,y.disabled,y.name,P,w]),_=o(M,{[`${M}-rtl`]:"rtl"===x},p,f,q,V,R);return S(l.createElement("div",Object.assign({className:_,style:b},G,{ref:t}),l.createElement(v.Provider,{value:X},L)))})),y=C;y.Group=g,y.__ANT_CHECKBOX=!0;export{y as C};
