import{u as e,h as t,r as s,j as i,ct as r,cn as o,B as n,Z as a,gc as l,C as m,m as c,gd as d,ge as p,gf as u,y as j,gg as h,V as x,bO as g,z as f,gh as C}from"./requestIdleCallbackPolyfill-BD5NPSQj.js";import{u as b,l as y,a as v}from"./homePage-BCsd10iH.js";import{k,o as w}from"./sortableJsUtils-B0JfQ1Xm.js";import{R as S}from"./QuestionCircleOutlined-1ypGEnWW.js";import{C as D}from"./useFresh-INIxu_aQ.js";import{S as F}from"./index-CidvnNXb.js";import{C as O}from"./ColorPicker-CzFiMA7n.js";import"./fullSpin-wpsVVM3S.js";import"./index-Cdl6-4bg.js";import"./myDrawer2-C-oqvTPj.js";import"./handleButton-D4RfIqTL.js";import"./myModal-jNHIqIlD.js";import"./submitForInclusion-2hRB48kB.js";import"./useForm-P80KroQL.js";import"./index-CqantWh7.js";import"./row-CTw29iwW.js";import"./useBreakpoint-CTyXZ0FX.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-Dsiz6aUU.js";import"./getAllowClear-DZfOLlPe.js";import"./Input-CM5RHfMD.js";import"./TextArea-DuCqnwKh.js";import"./CloudUploadOutlined-CaAP327S.js";import"./index-B9RTJOki.js";import"./assets-B8Bi78Vh.js";import"./iconBase-C6rwz8RW.js";import"./index-BN17Klan.js";import"./MailOutlined-BExysytl.js";import"./Overflow-BZY2Mlq2.js";import"./index-CQVV-hov.js";import"./LeftOutlined-D9Sp279J.js";import"./PlusOutlined-CiuGRpBr.js";import"./useUpdateEffect-iFdTkaS9.js";import"./SearchOutlined-DiyKAgSy.js";import"./index-CEZ5Iqzn.js";import"./spinLoading-BcuqnZHK.js";import"./ExportOutlined-1DEvJHjY.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-CLYK2dIo.js";import"./styleChecker-BqlkXuI7.js";import"./UserOutlined-DnSacxTm.js";import"./sortable.esm-Bv0j-UjJ.js";import"./addRecommendAppForm-DYGRjPVI.js";import"./LikeFilled-DKIy8GB3.js";import"./myErrorPage-DzNvbly6.js";import"./markdownContent-DCYDYp71.js";import"./index-C-T9QWQH.js";import"./index-D_Goq9AT.js";function T(){const T=e(),P=t(e=>e.appData.listData),M=t(e=>e.appData.freeDragListData),I=t(e=>e.home.showFreeDrag),R=t(e=>e.home.freeDragGridX),$=t(e=>e.home.freeDragGridY),B=t(e=>e.card.gridColumnWidth),G=t(e=>e.card.gridRowHeight),L=t(e=>e.card.columnGap),U=t(e=>e.card.rowGap),[z,E]=s.useState("icon"),[Q,W]=s.useState("11"),[A,H]=s.useState("#ffffff"),[q,N]=s.useState("#000000"),[V,Y]=s.useState([]),[Z,J]=s.useState(0),{height:X,width:K}=b(),_=[{label:"展示样式",content:i.jsx(i.Fragment,{children:i.jsx(F,{value:z,onChange:e=>{E(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片展示样式",options:[{label:"纯图",value:"icon"},{label:"文本",value:"text"},{label:"横版",value:"icon-h"},{label:"竖版",value:"icon-v"}]})})},{label:"卡片大小",content:i.jsx(i.Fragment,{children:i.jsx(F,{value:Q,onChange:e=>{W(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片尺寸大小",options:y})})},{label:"背景颜色",content:i.jsx(i.Fragment,{children:i.jsx(O,{showText:!0,value:A,onChange:e=>{H(e.toHexString())}})})},{label:"文字颜色",content:i.jsx(i.Fragment,{children:i.jsx(O,{showText:!0,value:q,onChange:e=>{N(e.toHexString())}})})},{label:`图标间距（${Z}px）`,content:i.jsx(i.Fragment,{children:i.jsx(v,{value:Z,min:0,max:48,onChange:e=>{J(e)}})})}],[ee,te]=s.useState(!1);const se=s.useRef(null);s.useEffect(()=>()=>{se.current&&(clearTimeout(se.current),se.current=null)},[]);const ie=[{label:"卡片内字体颜色(非卡片名称）",content:i.jsx(i.Fragment,{children:i.jsx(a,{title:"是否确认调整",onConfirm:()=>{const e=l(P);T(m(e[0])),c.success(`成功调整了${e[1]}个字体颜色`)},children:i.jsx(n,{type:"link",children:"调整"})})})},{label:"移除相同ID、空文件夹",content:i.jsx(i.Fragment,{children:i.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=d(P),t=k(p(u(j(P)))),s=d(t);T(m(t)),c.success(`成功移除了${e-s}个数据`)},children:i.jsx(n,{type:"link",children:"移除"})})})},{label:"更新ID为文本类型",content:i.jsx(a,{icon:i.jsx(x,{style:{color:"blue"}}),title:"该更新有利无害",onConfirm:()=>{const e=h(j(P));T(m(e[0])),c.success(`成功移除了${e[1]}个数据ID`)},children:i.jsx(n,{type:"link",children:"更新"})})},{label:"移除所有空白占位卡片",content:i.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=j(P),t=g(e);T(m(t[0])),c.success(`成功移除了${t[1]}个空白占位卡片`)},children:i.jsx(n,{type:"link",children:"移除"})})},{label:"整理全屏自由拖拽",content:i.jsx(a,{title:"是否确认整理",onConfirm:()=>{if(!I)return void c.error("整理失败，全屏自由拖拽布局未启用");const e=j(M).map(e=>{const t=Math.round(e.x/R)*R,s=Math.round(e.y/$)*$,i=w(e.size,B,G,U,L),r=K-i.width,o=X-i.height,n=Math.min(r,t),a=Math.min(o,s);return{...e,x:n,y:a}});c.success("整理完成"),T(f(e))},children:i.jsx(n,{type:"link",children:"整理"})})}];return i.jsxs(i.Fragment,{children:[i.jsx(r,{items:ie,groupTitle:"一键优化",gap:20,bottomDivider:!0}),i.jsx(r,{items:_,groupTitle:"手动控制",gap:20,bottomDivider:!0}),i.jsx(o,{message:"请在下方选择需要调整的参数",type:"info",icon:i.jsx(S,{})}),i.jsx(D.Group,{options:[{label:"展示样式",value:"showType"},{label:"卡片大小",value:"size"},{label:"背景颜色",value:"bgColor"},{label:"文字颜色",value:"textColor"},{label:"图标间距",value:"iconPadding"}],className:"mb-6",value:V,onChange:e=>{Y(e)}}),i.jsx(n,{type:"primary",onClick:function(){V.length<=0?c.error("请选择确认调整的参数信息"):(te(!0),se.current&&clearTimeout(se.current),se.current=setTimeout(async()=>{try{const e=await async function(e,t,s){return new Promise((i,r)=>{try{i(C(e,t,s))}catch(o){r(o)}})}(P,V,{linkCardBgColor:A,linkCardShowType:z,linkCardSize:Q,linkCardTextColor:q,imgPaddingNum:Z});T(m(e[0])),c.success(`成功调整了${e[1]}个链接卡片`)}catch(e){c.error("调整链接卡片时发生错误")}finally{te(!1)}},500))},loading:ee,children:"调整卡片"})]})}export{T as default};
