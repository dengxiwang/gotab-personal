import{c as e,r as s,j as a,B as l,l as t,a as o,O as n,v as r,n as i,Q as c,o as m}from"./requestIdleCallbackPolyfill-CtDwfsUZ.js";import{C as u}from"./contentLayout-yZopseij.js";import{F as f}from"./index-BkTQwX_n.js";import{R as d}from"./index-UWLYAeVo.js";import{S as p}from"./index-DYsh6Zab.js";import{R as h}from"./QuestionCircleOutlined-CkNAwQab.js";import"./row-LjteOa45.js";import"./useBreakpoint-kMM__v-J.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";function j(){const j=e.c(21),[x]=f.useForm();let b;j[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],j[0]=b):b=j[0];const[y,_]=s.useState(b);let S;j[1]!==x?(S=function(){t(0,_);const e=o.getState().user.token;n({url:m.getFunctionSwitch,token:e}).then(e=>{e.data&&(e.data?.cardPush||(e.data.cardPush="close"),e.data?.offlineToUse||(e.data.offlineToUse="open"),x.setFieldsValue(e.data))}).finally(()=>{r(0,_)})},j[1]=x,j[2]=S):S=j[2];const g=S;let w,v,F;j[3]!==g?(w=()=>{g()},j[3]=g,j[4]=w):w=j[4],j[5]===Symbol.for("react.memo_cache_sentinel")?(v=[],j[5]=v):v=j[5],s.useEffect(w,v),j[6]===Symbol.for("react.memo_cache_sentinel")?(F=function(e){t(1,_);const s=o.getState().user.token;i({url:m.updateFunctionSwitch,token:s,data:e}).finally(()=>{r(1,_)})},j[6]=F):F=j[6];const N=F;let k,P,q,C,Q,T,U,I,O;return j[7]===Symbol.for("react.memo_cache_sentinel")?(k=a.jsx(c,{type:"warning",description:a.jsxs(a.Fragment,{children:[a.jsx(h,{className:"mr-1"}),"管理员可通过该页面动态决定某配置的可用性，请注意，配置的变更是修改了 siteConfig.js 文件的内容，所以请不要在 web 服务器中缓存它，同时配置变更后页面需刷新才生效，不刷新将继续使用先前配置！"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),j[7]=k):k=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(P={cardPush:"close",offlineToUse:"open"},j[8]=P):P=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(q=[{required:!0,message:"请选择配置项的状态"}],j[9]=q):q=j[9],j[10]===Symbol.for("react.memo_cache_sentinel")?(C=a.jsx(f.Item,{name:"cardPush",label:"添加卡片时推送至资源库（仅限资源库中不存在的链接，审核后展示）",required:!0,rules:q,children:a.jsx(d.Group,{options:[{label:"开启且默认推送",value:"open"},{label:"开启但不默认推送",value:"openNotPush"},{label:"关闭",value:"close"}]})}),j[10]=C):C=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(Q=[{required:!0,message:"请选择是否允许用户本地离线使用"}],j[11]=Q):Q=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(T=a.jsx(f.Item,{name:"offlineToUse",label:"用户本地离线使用",required:!0,rules:Q,children:a.jsx(d.Group,{options:[{label:"允许（用户非必须登录即可使用，默认数据需管理员手动操作）",value:"open"},{label:"禁用（管理员账号数据作为默认数据实时同步，停用注册）",value:"close"}]})}),j[12]=T):T=j[12],j[13]!==y[1]?(U=a.jsx("div",{className:"w-full flex justify-center",children:a.jsx(l,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:y[1],children:"保存配置"})}),j[13]=y[1],j[14]=U):U=j[14],j[15]!==x||j[16]!==U?(I=a.jsxs(f,{onFinish:N,form:x,className:"px-3 w-full",initialValues:P,children:[C,T,U]}),j[15]=x,j[16]=U,j[17]=I):I=j[17],j[18]!==y[0]||j[19]!==I?(O=a.jsxs(u,{children:[k,a.jsx("div",{className:"w-full",children:a.jsx(p,{spinning:y[0],children:I})})]}),j[18]=y[0],j[19]=I,j[20]=O):O=j[20],O}export{j as default};
