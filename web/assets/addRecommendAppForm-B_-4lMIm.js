import{e,I as l,x as o,ac as a,j as r,cf as t,B as n,ae as s,H as i,da as c,af as m,ag as d,ah as x,a8 as h,ax as f,aj as u,ai as p,ab as j,ad as g}from"./requestIdleCallbackPolyfill-DVdtTnyH.js";import{u as v,F as b}from"./index-HltPkFWT.js";import{I as y}from"./index-DtzU4EtU.js";import{C as _}from"./ColorPicker-D7YnKARn.js";import{T as C}from"./index-D_tOPW6n.js";import{R as w}from"./CloudUploadOutlined-LoBWrexg.js";import{T as S}from"./index-ByhWaRvl.js";var P={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V160a16 16 0 0116-16zm-52 68H212v200h200zm493.33 87.69a16 16 0 010 22.62L724.31 503.33a16 16 0 01-22.62 0L520.67 322.31a16 16 0 010-22.62l181.02-181.02a16 16 0 0122.62 0zm-84.85 11.3L713 203.53 605.52 311 713 418.48zM464 544a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H212v200h200zm452-68a16 16 0 0116 16v304a16 16 0 01-16 16H560a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H612v200h200z"}}]},name:"product",theme:"outlined"};function z(){return z=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},z.apply(this,arguments)}const I=(o,a)=>e.createElement(l,z({},o,{ref:a,icon:P})),N=e.forwardRef(I);function H(){return H=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var o=arguments[l];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},H.apply(this,arguments)}const B=(o,a)=>e.createElement(l,H({},o,{ref:a,icon:k})),L=e.forwardRef(B),{TextArea:T}=y;function O(){h.hide(f)}function R(e){return e.toHexString()}function V(e){return e.toHexString()}function A(e){return e.toHexString()}function F(e){return e.toHexString()}function q(e){return e.user.token}const M=e.memo((function(l){const j=o.c(53),{editItem:g,type:S,refresh:P}=l,k=void 0===S?"add":S,[z]=v(),I=a(q);let N;j[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],j[0]=N):N=j[0];const[H,B]=e.useState(N),[L,M]=e.useState(g);let E;j[1]!==g||j[2]!==P||j[3]!==I||j[4]!==k?(E=function(e){if(!I)return void i.error("请您先完成登录/注册");const l=c(e);m(1,B),d({url:"add"===k?x.submitRecommendApp:x.editRecommendApp,token:I,data:"add"===k?l:{...l,recommendAppId:g.id}}).then((e=>{200===e.code&&(h.hide(f),P&&P())})).finally((()=>{u(1,B)}))},j[1]=g,j[2]=P,j[3]=I,j[4]=k,j[5]=E):E=j[5];const W=E;let K,D,G,J,Q,X,Y,Z,$;j[6]!==L?(K=r.jsx(U,{showItem:L}),j[6]=L,j[7]=K):K=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(D={flex:"82px"},j[8]=D):D=j[8],j[9]!==z?(G=()=>{M(z.getFieldsValue())},j[9]=z,j[10]=G):G=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(J=r.jsx(b.Item,{label:"在线链接",name:"link",required:!0,rules:[{validator:(e,l)=>l&&""!==l?t(l)?l.length>200?Promise.reject("在线链接不能超过200个字符"):Promise.resolve():Promise.reject("请输入正确的在线链接"):Promise.reject("请输入在线链接")}],children:r.jsx(y,{placeholder:"在线链接",allowClear:!0,maxLength:200})}),j[11]=J):J=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(Q=[{validator:(e,l)=>l&&""!==l?l.length>20?Promise.reject("标题/名称不能超过20个字符"):Promise.resolve():Promise.reject("请输入标题/名称")}],j[12]=Q):Q=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(X=r.jsx(b.Item,{label:"标题名称",required:!0,rules:Q,name:"title",children:r.jsx(y,{placeholder:"标题名称",allowClear:!0,maxLength:20,showCount:!0})}),j[13]=X):X=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(Y=[{validator:(e,l)=>l&&""!==l?l.length>200?Promise.reject("推荐描述不能超过200个字符"):Promise.resolve():Promise.reject("请输入推荐描述")}],j[14]=Y):Y=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(Z=r.jsx(b.Item,{label:"推荐描述",required:!0,rules:Y,name:"description",children:r.jsx(T,{placeholder:"推荐描述",autoSize:{minRows:2,maxRows:2},maxLength:200,showCount:!0,allowClear:!0})}),j[15]=Z):Z=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?($=[{validator:(e,l)=>l&&""!==l?l.length>200?Promise.reject("图标地址不能超过200个字符"):Promise.resolve():Promise.reject("请输入或上传图标地址")}],j[16]=$):$=j[16];const ee=!I;let le,oe,ae,re,te,ne,se,ie,ce,me,de,xe;j[17]!==z||j[18]!==L||j[19]!==I?(le=e=>e.size>204800?(i.error("图标大小不能超过200KB！"),!1):(m(0,B),d({url:x.uploadIcon,token:I,data:p({file:e})}).then((e=>{200===e.code&&e.data&&(z.setFieldValue("icon",e.data.icon_url),z.validateFields({dirty:!0}),M({...L,icon:e.data.icon_url}))})).finally((()=>{u(0,B)})),!1),j[17]=z,j[18]=L,j[19]=I,j[20]=le):le=j[20],j[21]!==I?(oe=()=>{I||i.error("请您先完成登录/注册")},j[21]=I,j[22]=oe):oe=j[22],j[23]===Symbol.for("react.memo_cache_sentinel")?(ae=r.jsx(w,{}),j[23]=ae):ae=j[23],j[24]!==H[0]||j[25]!==oe?(re=r.jsx(n,{onClick:oe,loading:H[0],type:"text",className:"rounded-none",children:"上传",icon:ae}),j[24]=H[0],j[25]=oe,j[26]=re):re=j[26],j[27]!==ee||j[28]!==le||j[29]!==re?(te=r.jsx(b.Item,{label:"图标地址",name:"icon",required:!0,rules:$,children:r.jsx(y,{placeholder:"图标地址",allowClear:!0,maxLength:200,addonAfter:r.jsx(s,{disabled:ee,accept:".png, .jpg, .jpeg, .svg, .webp, .ico",showUploadList:!1,beforeUpload:le,children:re})})}),j[27]=ee,j[28]=le,j[29]=re,j[30]=te):te=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(ne=r.jsx(b.Item,{label:"标签名称",name:"tagText",rules:[{validator:(e,l)=>l&&l.length>200?Promise.reject("标签名称不能超过5个字符"):Promise.resolve()}],children:r.jsx(y,{placeholder:"标签名称",allowClear:!0,maxLength:5})}),j[31]=ne):ne=j[31],j[32]===Symbol.for("react.memo_cache_sentinel")?(se=r.jsxs("div",{className:"flex *:flex-1",children:[ne,r.jsx(b.Item,{label:"标签颜色",name:"tagColor",normalize:F,children:r.jsx(_,{allowClear:!0})})]}),j[32]=se):se=j[32],j[33]===Symbol.for("react.memo_cache_sentinel")?(ie=r.jsx(b.Item,{label:"字体颜色",name:"fontColor",normalize:A,children:r.jsx(_,{allowClear:!0})}),j[33]=ie):ie=j[33],j[34]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsx(b.Item,{label:"背景颜色",name:"background",normalize:V,children:r.jsx(_,{allowClear:!0})}),j[34]=ce):ce=j[34],j[35]===Symbol.for("react.memo_cache_sentinel")?(me=r.jsxs("div",{className:"flex *:flex-1",children:[ie,ce,r.jsx(b.Item,{label:"图标背景",name:"iconBackground",normalize:R,children:r.jsx(_,{allowClear:!0})})]}),j[35]=me):me=j[35],j[36]!==g?(de=g&&r.jsx(b.Item,{label:"排序",name:"sort",children:r.jsx(C,{placeholder:"排序"})}),j[36]=g,j[37]=de):de=j[37],j[38]===Symbol.for("react.memo_cache_sentinel")?(xe=r.jsx(n,{onClick:O,children:"取消"}),j[38]=xe):xe=j[38];const he="add"===k?"提交推荐":"编辑";let fe,ue,pe;return j[39]!==H[1]||j[40]!==he?(fe=r.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[xe,r.jsx(n,{type:"primary",htmlType:"submit",loading:H[1],children:he})]}),j[39]=H[1],j[40]=he,j[41]=fe):fe=j[41],j[42]!==g||j[43]!==z||j[44]!==W||j[45]!==te||j[46]!==de||j[47]!==fe||j[48]!==G?(ue=r.jsxs(b,{form:z,autoComplete:"off",variant:"filled",initialValues:g,labelCol:D,onFinish:W,className:"mt-1",onValuesChange:G,children:[J,X,Z,te,se,me,de,fe]}),j[42]=g,j[43]=z,j[44]=W,j[45]=te,j[46]=de,j[47]=fe,j[48]=G,j[49]=ue):ue=j[49],j[50]!==ue||j[51]!==K?(pe=r.jsxs(r.Fragment,{children:[K,ue]}),j[50]=ue,j[51]=K,j[52]=pe):pe=j[52],pe})),U=e.memo((e=>{const l=o.c(32),{showItem:a}=e,{token:t}=j.useToken(),s=null==a?void 0:a.background;let i,c,m;l[0]!==s||l[1]!==t.colorBorderSecondary?(i={background:s,borderColor:t.colorBorderSecondary},l[0]=s,l[1]=t.colorBorderSecondary,l[2]=i):i=l[2],l[3]!==a||l[4]!==t.colorPrimary?(c=(null==a?void 0:a.icon)?r.jsx("div",{style:{height:"42px",width:"42px",backgroundColor:a.iconBackground},className:"flex-center rounded-[10px]",children:r.jsx("img",{src:g(a.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):r.jsx(L,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:t.colorPrimary}}),l[3]=a,l[4]=t.colorPrimary,l[5]=c):c=l[5],l[6]!==(null==a?void 0:a.tagColor)||l[7]!==(null==a?void 0:a.tagText)?(m=(null==a?void 0:a.tagText)&&r.jsx(S,{color:null==a?void 0:a.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:null==a?void 0:a.tagText}),l[6]=null==a?void 0:a.tagColor,l[7]=null==a?void 0:a.tagText,l[8]=m):m=l[8];const d=null==a?void 0:a.fontColor;let x;l[9]!==d?(x={color:d},l[9]=d,l[10]=x):x=l[10];const h=(null==a?void 0:a.title)||"标题名称";let f,u;l[11]!==x||l[12]!==h?(f=r.jsx("h1",{style:x,children:h}),l[11]=x,l[12]=h,l[13]=f):f=l[13],l[14]!==m||l[15]!==f?(u=r.jsxs("div",{className:"text-sm mb-[4px] flex items-center flex-wrap",children:[m,f]}),l[14]=m,l[15]=f,l[16]=u):u=l[16];const p=null==a?void 0:a.fontColor;let v;l[17]!==p?(v={color:p},l[17]=p,l[18]=v):v=l[18];const b=(null==a?void 0:a.description)||"推荐描述";let y,_;l[19]!==v||l[20]!==b?(y=r.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:v,children:b}),l[19]=v,l[20]=b,l[21]=y):y=l[21],l[22]!==y||l[23]!==u?(_=r.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[u,y]}),l[22]=y,l[23]=u,l[24]=_):_=l[24];const C=null==a?void 0:a.fontColor;let w,P;return l[25]!==C?(w=r.jsx(N,{className:"opacity-50",style:{color:C}}),l[25]=C,l[26]=w):w=l[26],l[27]!==i||l[28]!==_||l[29]!==w||l[30]!==c?(P=r.jsx("div",{className:"h-[88px] pb-3 w-full flex flex-col mb-2",children:r.jsxs(n,{onClick:E,target:"_blank",style:i,type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:c,children:[_,w]})}),l[27]=i,l[28]=_,l[29]=w,l[30]=c,l[31]=P):P=l[31],P}));function E(){i.info("此为预览效果")}export{M as A,P as C,k as P,N as R,L as a};
