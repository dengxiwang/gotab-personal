import{r as e,I as t,c as i,j as s,a as r,n as l,B as o,Z as n,Q as a,F as d,o as c,l as m,v as f}from"./requestIdleCallbackPolyfill-DrbyOYxo.js";import{u}from"./useFresh-BwaxHEOd.js";import{M as j,R as p}from"./myTable-75RjSkyx.js";import{C as x}from"./contentLayout-C-OSk3fI.js";import{R as h}from"./ReloadOutlined-s-RdC5z7.js";import{C as y}from"./ClearOutlined-CT7898ko.js";import{R as _}from"./QuestionCircleOutlined-C90PHkIz.js";import{T as b}from"./index-wXrs50xs.js";import{R as g}from"./UserOutlined-9ln74CpO.js";import"./index-DtAQ0zSJ.js";import"./index-Dy164_-K.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-B72RYzGN.js";import"./Overflow-CYqTbEan.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-CWcW4QWM.js";import"./getAllowClear-DxH2wcUI.js";import"./Input-CHj16lBA.js";import"./transformData-DqRCM8Rz.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-cZCK45xC.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-CpHSqX2X.js";import"./styleChecker-BZ5qIWnG.js";import"./AlipayOutlined-DIg5ymCY.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-C_tmRwP1.js";import"./index-DmUoX8CG.js";import"./ReloadOutlined-B00s2TmV.js";import"./QuestionCircleOutlined-DSm95oJP.js";function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},k.apply(this,arguments)}const O=(i,s)=>e.createElement(t,k({},i,{ref:s,icon:y})),w=e.forwardRef(O);function C(){const t=i.c(27),{key:m,refresh:f}=u(),[p,y]=e.useState(!1);let b,g,k,O;t[0]===Symbol.for("react.memo_cache_sentinel")?(b={title:"用户名",key:"username",width:160,fixed:"left",render:D},g={title:"状态",key:"deleted_at",width:80,render:S},k={type:"time",title:"更新时间",key:"updated_at",width:200},t[0]=b,t[1]=g,t[2]=k):(b=t[0],g=t[1],k=t[2]),t[3]!==f?(O=[b,g,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(v,{record:t,refresh:f})}],t[3]=f,t[4]=O):O=t[4];const C=O;let R;t[5]!==f?(R=function(){y(!0);const e=r.getState().user.token;l({url:c.clearDefaultData,token:e}).then(e=>{200===e.code&&f()}).finally(()=>{y(!1)})},t[5]=f,t[6]=R):R=t[6];const N=R;let Q,T,L,M,A,F,I,P,U,z;return t[7]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(h,{}),t[7]=Q):Q=t[7],t[8]!==f?(T=s.jsx(o,{type:"primary",icon:Q,onClick:()=>{f()},children:"刷新列表"}),t[8]=f,t[9]=T):T=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(w,{}),t[10]=L):L=t[10],t[11]!==p?(M=s.jsx(o,{variant:"filled",color:"danger",icon:L,loading:p,children:"清理数据（只保留 10 条）"}),t[11]=p,t[12]=M):M=t[12],t[13]!==N||t[14]!==M?(A=s.jsx(n,{title:"是否确认清理？",onConfirm:N,children:M}),t[13]=N,t[14]=M,t[15]=A):A=t[15],t[16]!==T||t[17]!==A?(F=s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[T,A]}),t[16]=T,t[17]=A,t[18]=F):F=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(a,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(_,{className:"mr-1"}),"默认数据为最新的启用数据，且数据会随着管理员在主页设置默认主页数据而更新！管理员保存新的默认数据后，所有先前启用数据均会禁用！"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),P=s.jsx(d,{className:"my-3"}),t[19]=I,t[20]=P):(I=t[19],P=t[20]),t[21]!==C||t[22]!==m?(U=s.jsx(j,{columns:C,getListUrl:c.getDefaultDataList,dataKey:"data.list",tableKey:m}),t[21]=C,t[22]=m,t[23]=U):U=t[23],t[24]!==F||t[25]!==U?(z=s.jsxs(x,{children:[F,I,P,U]}),t[24]=F,t[25]=U,t[26]=z):z=t[26],z}function S(e){return s.jsx(b,{color:e?"red":"green",children:e?"禁用":"启用"})}function D(e){return s.jsx(b,{color:e?"geekblue":"red",bordered:!1,icon:s.jsx(g,{}),children:e||"已注销"})}const v=e.memo(t=>{const a=i.c(33),{record:d,refresh:u}=t;let j;a[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],a[0]=j):j=a[0];const[x,h]=e.useState(j);let y;a[1]!==d.id||a[2]!==u?(y=function(){m(0,h);const e=r.getState().user.token;setTimeout(()=>{l({url:c.enableDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&u()}).finally(()=>{f(0,h)})},500)},a[1]=d.id,a[2]=u,a[3]=y):y=a[3];const _=y;let b;a[4]!==d.id||a[5]!==u?(b=function(){m(0,h);const e=r.getState().user.token;setTimeout(()=>{l({url:c.disableDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&u()}).finally(()=>{f(0,h)})},500)},a[4]=d.id,a[5]=u,a[6]=b):b=a[6];const g=b;let k;a[7]!==d.id||a[8]!==u?(k=function(){m(1,h);const e=r.getState().user.token;setTimeout(()=>{l({url:c.deleteDefaultData,token:e,data:{id:d.id}}).then(e=>{200===e.code&&u()}).finally(()=>{f(1,h)})},500)},a[7]=d.id,a[8]=u,a[9]=k):k=a[9];const O=k,w=d.deleted_at?"是否确认恢复？":"是否确认禁用？",C=d.deleted_at?_:g;let S,D,v,R,N,Q,T,L,M;return a[10]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},a[10]=S):S=a[10],a[11]!==x[0]||a[12]!==d.deleted_at?(D=x[0]?s.jsx(p,{}):d.deleted_at?"恢复":"禁用",a[11]=x[0],a[12]=d.deleted_at,a[13]=D):D=a[13],a[14]!==x[0]||a[15]!==D?(v=s.jsx(o,{type:"link",size:"small",disabled:x[0],style:S,children:D}),a[14]=x[0],a[15]=D,a[16]=v):v=a[16],a[17]!==w||a[18]!==C||a[19]!==v?(R=s.jsx(n,{title:w,onConfirm:C,children:v}),a[17]=w,a[18]=C,a[19]=v,a[20]=R):R=a[20],a[21]===Symbol.for("react.memo_cache_sentinel")?(N={width:"44px"},a[21]=N):N=a[21],a[22]!==x[1]?(Q=x[1]?s.jsx(p,{}):"删除",a[22]=x[1],a[23]=Q):Q=a[23],a[24]!==x[1]||a[25]!==Q?(T=s.jsx(o,{danger:!0,type:"link",size:"small",disabled:x[1],style:N,children:Q}),a[24]=x[1],a[25]=Q,a[26]=T):T=a[26],a[27]!==O||a[28]!==T?(L=s.jsx(n,{title:"是否确认删除？",onConfirm:O,children:T}),a[27]=O,a[28]=T,a[29]=L):L=a[29],a[30]!==L||a[31]!==R?(M=s.jsxs("div",{className:"flex flex-wrap",children:[R,L]}),a[30]=L,a[31]=R,a[32]=M):M=a[32],M});export{C as default};
