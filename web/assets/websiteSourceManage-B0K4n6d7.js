import{x as e,E as t,ac as r,e as s,j as i,at as o,aA as l,aB as n,B as a,ao as m,a8 as c,ax as d,ah as p,ad as h,af as j,ag as u,aj as f}from"./main-CD0zUXTL.js";import{u as x}from"./useFresh-C0ydC2D3.js";import{r as y}from"./transformData-BQH7chON.js";import{M as b,R as g}from"./myTable-ZSYYS2U8.js";import{S as k}from"./submitForInclusion-BSkUuvHS.js";import{C as w}from"./contentLayout-BsKw27WM.js";import{F as _}from"./index-CPWVZU1v.js";import{I as S}from"./index-CS9jTL4o.js";import{S as C}from"./index-BxI9IZHD.js";import{R as O,a as A}from"./SearchOutlined-DoicOXKf.js";import{T as I}from"./index-DRF0O40K.js";import{R as N}from"./SortAscendingOutlined-BHGeVpRu.js";import{R as v}from"./UserOutlined-BiCaaNud.js";import{P as F}from"./main-FlqzP-we.js";import"./index-Bn4721qN.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-Cl2XolnV.js";import"./Overflow-Dth-jHIb.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./assets-CmvcfQKP.js";import"./MoneyCollectOutlined-FkshC0iu.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-Cl-JmkYn.js";import"./styleChecker-D6YSF6t4.js";import"./AlipayOutlined-C8qbQhus.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-Cuy2s8Sf.js";import"./useBreakpoint-BfXG9374.js";import"./getAllowClear-CZO_kcqc.js";import"./index-CYN5EPmR.js";import"./Input-DAmAjPDT.js";import"./myModal-BS4Tmmgl.js";import"./CloudUploadOutlined-BinTKSYW.js";import"./ColorPicker-CnU4NOEh.js";import"./index-Dk4rmiqF.js";import"./index-B1ITt1Ri.js";import"./row-D5tVqh3E.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-CFMh1Qsp.js";import"./SortAscendingOutlined-8bEGxkuH.js";function M(){const h=e.c(60),{key:j,refresh:u}=x(),f=t(),g=r(K);let I;h[0]!==g?(I=g.filter(E).map(B),h[0]=g,h[1]=I):I=h[1];const N=I,[v]=_.useForm();let F;h[2]===Symbol.for("react.memo_cache_sentinel")?(F={},h[2]=F):F=h[2];const[M,D]=s.useState(F);let Q;h[3]!==g||h[4]!==f?(Q=function(){o({url:p.getCategoryListWithAll}).then((e=>{if(200===e.code&&e.data){const t=e.data.map(W);l(t,g)||f(n(t))}}))},h[3]=g,h[4]=f,h[5]=Q):Q=h[5];const V=Q;let G,H,J,Y,Z,$,q,X,ee,te,re,se;h[6]!==g.length||h[7]!==V?(G=()=>{0===g.length&&V()},h[6]=g.length,h[7]=V,h[8]=G):G=h[8],h[9]===Symbol.for("react.memo_cache_sentinel")?(H=[],h[9]=H):H=h[9],s.useEffect(G,H),h[10]===Symbol.for("react.memo_cache_sentinel")?(q={title:"网站名称",key:"title",width:200,fixed:"left"},X={title:"状态",key:"status",width:80,render:z},ee={title:"排序",key:"sort",width:80,render:R},te={title:"网站描述",key:"description",width:450},re={title:"图标",key:"icon",width:140,render:U},J={title:"链接",key:"url",width:120,render:L},Y={title:"所属分类",key:"categoryName",width:120},Z={title:"提交人",key:"username",width:160,render:T},$={type:"time",title:"更新时间",key:"createdTime",width:200},h[10]=J,h[11]=Y,h[12]=Z,h[13]=$,h[14]=q,h[15]=X,h[16]=ee,h[17]=te,h[18]=re):(J=h[10],Y=h[11],Z=h[12],$=h[13],q=h[14],X=h[15],ee=h[16],te=h[17],re=h[18]),h[19]!==u?(se=[q,X,ee,te,re,J,Y,Z,$,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(P,{record:t,refresh:u})}],h[19]=u,h[20]=se):se=h[20];const ie=se;let oe,le,ne,ae,me,ce,de,pe,he,je,ue,fe,xe,ye,be,ge,ke,we,_e;return h[21]!==v?(oe=()=>{const e=v.getFieldsValue();e[Math.random()]=!0,D(y(e))},h[21]=v,h[22]=oe):oe=h[22],h[23]===Symbol.for("react.memo_cache_sentinel")?(le={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},h[23]=le):le=h[23],h[24]===Symbol.for("react.memo_cache_sentinel")?(ne=i.jsx(_.Item,{name:"title",children:i.jsx(S,{placeholder:"标题"})}),h[24]=ne):ne=h[24],h[25]===Symbol.for("react.memo_cache_sentinel")?(ae=i.jsx(_.Item,{name:"link",children:i.jsx(S,{placeholder:"链接"})}),h[25]=ae):ae=h[25],h[26]===Symbol.for("react.memo_cache_sentinel")?(me=i.jsx(_.Item,{name:"username",children:i.jsx(S,{placeholder:"用户名"})}),h[26]=me):me=h[26],h[27]!==N?(ce=i.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:le,children:[ne,ae,me,i.jsx(_.Item,{name:"categoryId",children:i.jsx(C,{placeholder:"分类",options:N})})]}),h[27]=N,h[28]=ce):ce=h[28],h[29]!==v?(de=()=>{v.submit()},h[29]=v,h[30]=de):de=h[30],h[31]===Symbol.for("react.memo_cache_sentinel")?(pe=i.jsx(O,{}),h[31]=pe):pe=h[31],h[32]!==de?(he=i.jsx(a,{type:"primary",onClick:de,icon:pe,children:"查询"}),h[32]=de,h[33]=he):he=h[33],h[34]!==v?(je=()=>{v.resetFields();const e={};e[Math.random()]=!0,D(e)},h[34]=v,h[35]=je):je=h[35],h[36]===Symbol.for("react.memo_cache_sentinel")?(ue=i.jsx(A,{}),h[36]=ue):ue=h[36],h[37]!==je?(fe=i.jsx(a,{onClick:je,icon:ue,children:"重置"}),h[37]=je,h[38]=fe):fe=h[38],h[39]!==he||h[40]!==fe?(xe=i.jsxs("div",{className:"flex flex-wrap gap-3",children:[he,fe]}),h[39]=he,h[40]=fe,h[41]=xe):xe=h[41],h[42]!==v||h[43]!==oe||h[44]!==ce||h[45]!==xe?(ye=i.jsxs(_,{className:"w-full",form:v,onFinish:oe,children:[ce,xe]}),h[42]=v,h[43]=oe,h[44]=ce,h[45]=xe,h[46]=ye):ye=h[46],h[47]===Symbol.for("react.memo_cache_sentinel")?(be=i.jsx(m,{className:"my-3"}),h[47]=be):be=h[47],h[48]!==u?(ge=i.jsx("div",{className:"mb-3",children:i.jsx(a,{type:"primary",onClick:()=>{c.show(d,{title:"新增收录",children:i.jsx(k,{refresh:u})})},children:"新增收录"})}),h[48]=u,h[49]=ge):ge=h[49],h[50]!==M?(ke={searchParams:M},h[50]=M,h[51]=ke):ke=h[51],h[52]!==ie||h[53]!==j||h[54]!==ke?(we=i.jsx(b,{columns:ie,getListUrl:p.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:j,params:ke}),h[52]=ie,h[53]=j,h[54]=ke,h[55]=we):we=h[55],h[56]!==ye||h[57]!==ge||h[58]!==we?(_e=i.jsxs(w,{children:[ye,be,ge,we]}),h[56]=ye,h[57]=ge,h[58]=we,h[59]=_e):_e=h[59],_e}function T(e){return i.jsx(I,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(v,{}),children:e||"已注销"})}function L(e){return i.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function U(e,t){return e?i.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[i.jsx("img",{src:h(e),className:"rounded-sm",style:{width:"32px",height:"32px"}}),i.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function R(e){return i.jsx(I,{color:"gold",icon:i.jsx(N,{}),children:e||"-"})}function z(e){return i.jsx(I,{color:0===e?"blue":1===e?"green":2===e?"default":"red",children:0===e?"待审核":1===e?"正常":2===e?"隐藏":"被驳回"})}function W(e){return{label:e.label,key:e.id}}function B(e){return{label:e.label,value:String(e.key)}}function E(e){return e&&0!==e.key}function K(e){return e.stateUtils.categoryList}const P=s.memo((t=>{const o=e.c(24),{record:l,refresh:n}=t;let m;o[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],o[0]=m):m=o[0];const[h,x]=s.useState(m),y=r(D);let b;o[1]!==l||o[2]!==n||o[3]!==y?(b=function(){j(1,x),setTimeout((()=>{u({url:p.deleteWebsiteInfo,token:y,data:{id:l.id}}).then((e=>{200===e.code&&n()})).finally((()=>{f(1,x)}))}),500)},o[1]=l,o[2]=n,o[3]=y,o[4]=b):b=o[4];const w=b;let _,S,C,O,A,I,N,v;return o[5]===Symbol.for("react.memo_cache_sentinel")?(_={width:"44px"},o[5]=_):_=o[5],o[6]!==l||o[7]!==n?(S=()=>{c.show(d,{title:"编辑收录信息",children:i.jsx(k,{editItem:l,refresh:n,type:"edit"})})},o[6]=l,o[7]=n,o[8]=S):S=o[8],o[9]!==h[0]||o[10]!==S?(C=i.jsx(a,{type:"link",size:"small",disabled:h[0],style:_,onClick:S,children:"编辑"}),o[9]=h[0],o[10]=S,o[11]=C):C=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(O={width:"44px"},o[12]=O):O=o[12],o[13]!==h[1]?(A=h[1]?i.jsx(g,{}):"删除",o[13]=h[1],o[14]=A):A=o[14],o[15]!==h[1]||o[16]!==A?(I=i.jsx(a,{danger:!0,type:"link",size:"small",disabled:h[1],style:O,children:A}),o[15]=h[1],o[16]=A,o[17]=I):I=o[17],o[18]!==w||o[19]!==I?(N=i.jsx(F,{title:"是否确认删除该收录？",onConfirm:w,children:I}),o[18]=w,o[19]=I,o[20]=N):N=o[20],o[21]!==C||o[22]!==N?(v=i.jsxs("div",{className:"flex flex-wrap",children:[C,N]}),o[21]=C,o[22]=N,o[23]=v):v=o[23],v}));function D(e){return e.user.token}export{M as default};
