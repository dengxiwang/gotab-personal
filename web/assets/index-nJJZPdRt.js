import{z as e,e as l,C as a,bH as t,bG as n,b9 as s,aW as r,f as o,d_ as i,bN as u,v as c,aN as d}from"./main-RpejCBsR.js";import{v as p,w as f,x as m}from"./useFresh-CPnGAo4P.js";const v=e.createContext(null);const b=(e,c)=>{var d;const{prefixCls:b,className:g,rootClassName:C,children:y,indeterminate:O=!1,style:x,onMouseEnter:h,onMouseLeave:N,skipGroup:E=!1,disabled:j}=e,k=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:w,direction:$,checkbox:P}=l.useContext(a),M=l.useContext(v),{isFormItemInput:V}=l.useContext(t),S=l.useContext(n),I=null!==(d=(null==M?void 0:M.disabled)||j)&&void 0!==d?d:S,G=l.useRef(k.value),R=l.useRef(null),_=s(c,R);l.useEffect((()=>{null==M||M.registerValue(k.value)}),[]),l.useEffect((()=>{if(!E)return k.value!==G.current&&(null==M||M.cancelValue(G.current),null==M||M.registerValue(k.value),G.current=k.value),()=>null==M?void 0:M.cancelValue(k.value)}),[k.value]),l.useEffect((()=>{var e;(null===(e=R.current)||void 0===e?void 0:e.input)&&(R.current.input.indeterminate=O)}),[O]);const L=w("checkbox",b),q=r(L),[F,H,T]=p(L,q),z=Object.assign({},k);M&&!E&&(z.onChange=function(){k.onChange&&k.onChange.apply(k,arguments),M.toggleOption&&M.toggleOption({label:y,value:k.value})},z.name=M.name,z.checked=M.value.includes(k.value));const A=o(`${L}-wrapper`,{[`${L}-rtl`]:"rtl"===$,[`${L}-wrapper-checked`]:z.checked,[`${L}-wrapper-disabled`]:I,[`${L}-wrapper-in-form-item`]:V},null==P?void 0:P.className,g,C,T,q,H),B=o({[`${L}-indeterminate`]:O},i,H),[K,W]=f(z.onClick);return F(l.createElement(u,{component:"Checkbox",disabled:I},l.createElement("label",{className:A,style:Object.assign(Object.assign({},null==P?void 0:P.style),x),onMouseEnter:h,onMouseLeave:N,onClick:K},l.createElement(m,Object.assign({},z,{onClick:W,prefixCls:L,className:B,disabled:I,ref:_})),null!=y&&l.createElement("span",{className:`${L}-label`},y))))},g=l.forwardRef(b);const C=l.forwardRef(((e,t)=>{const{defaultValue:n,children:s,options:i=[],prefixCls:u,className:f,rootClassName:m,style:b,onChange:C}=e,y=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:O,direction:x}=l.useContext(a),[h,N]=l.useState(y.value||n||[]),[E,j]=l.useState([]);l.useEffect((()=>{"value"in y&&N(y.value||[])}),[y.value]);const k=l.useMemo((()=>i.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e))),[i]),w=e=>{j((l=>l.filter((l=>l!==e))))},$=e=>{j((l=>[].concat(d(l),[e])))},P=e=>{const l=h.indexOf(e.value),a=d(h);-1===l?a.push(e.value):a.splice(l,1),"value"in y||N(a),null==C||C(a.filter((e=>E.includes(e))).sort(((e,l)=>k.findIndex((l=>l.value===e))-k.findIndex((e=>e.value===l)))))},M=O("checkbox",u),V=`${M}-group`,S=r(M),[I,G,R]=p(M,S),_=c(y,["value","disabled"]),L=i.length?k.map((e=>l.createElement(g,{prefixCls:M,key:e.value.toString(),disabled:"disabled"in e?e.disabled:y.disabled,value:e.value,checked:h.includes(e.value),onChange:e.onChange,className:o(`${V}-item`,e.className),style:e.style,title:e.title,id:e.id,required:e.required},e.label))):s,q=l.useMemo((()=>({toggleOption:P,value:h,disabled:y.disabled,name:y.name,registerValue:$,cancelValue:w})),[P,h,y.disabled,y.name,$,w]),F=o(V,{[`${V}-rtl`]:"rtl"===x},f,m,R,S,G);return I(l.createElement("div",Object.assign({className:F,style:b},_,{ref:t}),l.createElement(v.Provider,{value:q},L)))})),y=g;y.Group=C,y.__ANT_CHECKBOX=!0;export{y as C};
