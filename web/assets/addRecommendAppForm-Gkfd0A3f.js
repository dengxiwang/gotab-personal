import{e,I as o,x as l,ac as a,j as r,cf as t,B as n,ae as s,H as i,da as c,af as m,ag as d,ah as x,a8 as h,ax as f,aj as u,ai as p,ab as j,ad as g}from"./main-CZICg_9p.js";import{u as v,F as b}from"./index-DAZDoWYi.js";import{I as y}from"./index-tClK7lS-.js";import{C as _}from"./ColorPicker-Bcg0qSDt.js";import{R as C}from"./CloudUploadOutlined-C7wJf9Cu.js";import{T as w}from"./index-GE9Y8UJC.js";var S={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},P={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V160a16 16 0 0116-16zm-52 68H212v200h200zm493.33 87.69a16 16 0 010 22.62L724.31 503.33a16 16 0 01-22.62 0L520.67 322.31a16 16 0 010-22.62l181.02-181.02a16 16 0 0122.62 0zm-84.85 11.3L713 203.53 605.52 311 713 418.48zM464 544a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H212v200h200zm452-68a16 16 0 0116 16v304a16 16 0 01-16 16H560a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H612v200h200z"}}]},name:"product",theme:"outlined"};function k(){return k=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},k.apply(this,arguments)}const z=(l,a)=>e.createElement(o,k({},l,{ref:a,icon:S})),I=e.forwardRef(z);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var l=arguments[o];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},N.apply(this,arguments)}const H=(l,a)=>e.createElement(o,N({},l,{ref:a,icon:P})),L=e.forwardRef(H),{TextArea:B}=y;function O(){h.hide(f)}function T(e){return e.toHexString()}function R(e){return e.toHexString()}function A(e){return e.toHexString()}function V(e){return e.toHexString()}function F(e){return e.user.token}const q=e.memo((function(o){const j=l.c(50),{editItem:g,type:w,refresh:S}=o,P=void 0===w?"add":w,[k]=v(),z=a(F);let I;j[0]===Symbol.for("react.memo_cache_sentinel")?(I=[],j[0]=I):I=j[0];const[N,H]=e.useState(I),[L,q]=e.useState(g);let U;j[1]!==g||j[2]!==S||j[3]!==z||j[4]!==P?(U=function(e){if(!z)return void i.error("请您先完成登录/注册");const o=c(e);m(1,H),d({url:"add"===P?x.submitRecommendApp:x.editRecommendApp,token:z,data:"add"===P?o:{...o,recommendAppId:g.id}}).then((e=>{200===e.code&&(h.hide(f),S&&S())})).finally((()=>{u(1,H)}))},j[1]=g,j[2]=S,j[3]=z,j[4]=P,j[5]=U):U=j[5];const E=U;let K,W,D,G,J,Q,X,Y,Z;j[6]!==L?(K=r.jsx(M,{showItem:L}),j[6]=L,j[7]=K):K=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(W={flex:"82px"},j[8]=W):W=j[8],j[9]!==k?(D=()=>{q(k.getFieldsValue())},j[9]=k,j[10]=D):D=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(G=r.jsx(b.Item,{label:"在线链接",name:"link",required:!0,rules:[{validator:(e,o)=>o&&""!==o?t(o)?o.length>200?Promise.reject("在线链接不能超过200个字符"):Promise.resolve():Promise.reject("请输入正确的在线链接"):Promise.reject("请输入在线链接")}],children:r.jsx(y,{placeholder:"在线链接",allowClear:!0,maxLength:200})}),j[11]=G):G=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(J=[{validator:(e,o)=>o&&""!==o?o.length>20?Promise.reject("标题/名称不能超过20个字符"):Promise.resolve():Promise.reject("请输入标题/名称")}],j[12]=J):J=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(Q=r.jsx(b.Item,{label:"标题名称",required:!0,rules:J,name:"title",children:r.jsx(y,{placeholder:"标题名称",allowClear:!0,maxLength:20,showCount:!0})}),j[13]=Q):Q=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(X=[{validator:(e,o)=>o&&""!==o?o.length>200?Promise.reject("推荐描述不能超过200个字符"):Promise.resolve():Promise.reject("请输入推荐描述")}],j[14]=X):X=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(Y=r.jsx(b.Item,{label:"推荐描述",required:!0,rules:X,name:"description",children:r.jsx(B,{placeholder:"推荐描述",autoSize:{minRows:2,maxRows:2},maxLength:200,showCount:!0,allowClear:!0})}),j[15]=Y):Y=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(Z=[{validator:(e,o)=>o&&""!==o?o.length>200?Promise.reject("图标地址不能超过200个字符"):Promise.resolve():Promise.reject("请输入或上传图标地址")}],j[16]=Z):Z=j[16];const $=!z;let ee,oe,le,ae,re,te,ne,se,ie,ce,me;j[17]!==k||j[18]!==L||j[19]!==z?(ee=e=>e.size>204800?(i.error("图标大小不能超过200KB！"),!1):(m(0,H),d({url:x.uploadIcon,token:z,data:p({file:e})}).then((e=>{200===e.code&&e.data&&(k.setFieldValue("icon",e.data.icon_url),k.validateFields({dirty:!0}),q({...L,icon:e.data.icon_url}))})).finally((()=>{u(0,H)})),!1),j[17]=k,j[18]=L,j[19]=z,j[20]=ee):ee=j[20],j[21]!==z?(oe=()=>{z||i.error("请您先完成登录/注册")},j[21]=z,j[22]=oe):oe=j[22],j[23]===Symbol.for("react.memo_cache_sentinel")?(le=r.jsx(C,{}),j[23]=le):le=j[23],j[24]!==N[0]||j[25]!==oe?(ae=r.jsx(n,{onClick:oe,loading:N[0],type:"text",className:"rounded-none",children:"上传",icon:le}),j[24]=N[0],j[25]=oe,j[26]=ae):ae=j[26],j[27]!==$||j[28]!==ee||j[29]!==ae?(re=r.jsx(b.Item,{label:"图标地址",name:"icon",required:!0,rules:Z,children:r.jsx(y,{placeholder:"图标地址",allowClear:!0,maxLength:200,addonAfter:r.jsx(s,{disabled:$,accept:".png, .jpg, .jpeg, .svg, .webp, .ico",showUploadList:!1,beforeUpload:ee,children:ae})})}),j[27]=$,j[28]=ee,j[29]=ae,j[30]=re):re=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(te=r.jsx(b.Item,{label:"标签名称",name:"tagText",rules:[{validator:(e,o)=>o&&o.length>200?Promise.reject("标签名称不能超过5个字符"):Promise.resolve()}],children:r.jsx(y,{placeholder:"标签名称",allowClear:!0,maxLength:5})}),j[31]=te):te=j[31],j[32]===Symbol.for("react.memo_cache_sentinel")?(ne=r.jsxs("div",{className:"flex *:flex-1",children:[te,r.jsx(b.Item,{label:"标签颜色",name:"tagColor",normalize:V,children:r.jsx(_,{allowClear:!0})})]}),j[32]=ne):ne=j[32],j[33]===Symbol.for("react.memo_cache_sentinel")?(se=r.jsx(b.Item,{label:"字体颜色",name:"fontColor",normalize:A,children:r.jsx(_,{allowClear:!0})}),j[33]=se):se=j[33],j[34]===Symbol.for("react.memo_cache_sentinel")?(ie=r.jsx(b.Item,{label:"背景颜色",name:"background",normalize:R,children:r.jsx(_,{allowClear:!0})}),j[34]=ie):ie=j[34],j[35]===Symbol.for("react.memo_cache_sentinel")?(ce=r.jsxs("div",{className:"flex *:flex-1",children:[se,ie,r.jsx(b.Item,{label:"图标背景",name:"iconBackground",normalize:T,children:r.jsx(_,{allowClear:!0})})]}),j[35]=ce):ce=j[35],j[36]===Symbol.for("react.memo_cache_sentinel")?(me=r.jsx(n,{onClick:O,children:"取消"}),j[36]=me):me=j[36];const de="add"===P?"提交推荐":"编辑";let xe,he,fe;return j[37]!==N[1]||j[38]!==de?(xe=r.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[me,r.jsx(n,{type:"primary",htmlType:"submit",loading:N[1],children:de})]}),j[37]=N[1],j[38]=de,j[39]=xe):xe=j[39],j[40]!==g||j[41]!==k||j[42]!==E||j[43]!==re||j[44]!==xe||j[45]!==D?(he=r.jsxs(b,{form:k,autoComplete:"off",variant:"filled",initialValues:g,labelCol:W,onFinish:E,className:"mt-1",onValuesChange:D,children:[G,Q,Y,re,ne,ce,xe]}),j[40]=g,j[41]=k,j[42]=E,j[43]=re,j[44]=xe,j[45]=D,j[46]=he):he=j[46],j[47]!==he||j[48]!==K?(fe=r.jsxs(r.Fragment,{children:[K,he]}),j[47]=he,j[48]=K,j[49]=fe):fe=j[49],fe})),M=e.memo((e=>{const o=l.c(32),{showItem:a}=e,{token:t}=j.useToken(),s=null==a?void 0:a.background;let i,c,m;o[0]!==s||o[1]!==t.colorBorderSecondary?(i={background:s,borderColor:t.colorBorderSecondary},o[0]=s,o[1]=t.colorBorderSecondary,o[2]=i):i=o[2],o[3]!==a||o[4]!==t.colorPrimary?(c=(null==a?void 0:a.icon)?r.jsx("div",{style:{height:"42px",width:"42px",backgroundColor:a.iconBackground},className:"flex-center rounded-[10px]",children:r.jsx("img",{src:g(a.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):r.jsx(L,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:t.colorPrimary}}),o[3]=a,o[4]=t.colorPrimary,o[5]=c):c=o[5],o[6]!==(null==a?void 0:a.tagColor)||o[7]!==(null==a?void 0:a.tagText)?(m=(null==a?void 0:a.tagText)&&r.jsx(w,{color:null==a?void 0:a.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:null==a?void 0:a.tagText}),o[6]=null==a?void 0:a.tagColor,o[7]=null==a?void 0:a.tagText,o[8]=m):m=o[8];const d=null==a?void 0:a.fontColor;let x;o[9]!==d?(x={color:d},o[9]=d,o[10]=x):x=o[10];const h=(null==a?void 0:a.title)||"标题名称";let f,u;o[11]!==x||o[12]!==h?(f=r.jsx("h1",{style:x,children:h}),o[11]=x,o[12]=h,o[13]=f):f=o[13],o[14]!==m||o[15]!==f?(u=r.jsxs("div",{className:"text-sm mb-[4px] flex items-center flex-wrap",children:[m,f]}),o[14]=m,o[15]=f,o[16]=u):u=o[16];const p=null==a?void 0:a.fontColor;let v;o[17]!==p?(v={color:p},o[17]=p,o[18]=v):v=o[18];const b=(null==a?void 0:a.description)||"推荐描述";let y,_;o[19]!==v||o[20]!==b?(y=r.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:v,children:b}),o[19]=v,o[20]=b,o[21]=y):y=o[21],o[22]!==y||o[23]!==u?(_=r.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[u,y]}),o[22]=y,o[23]=u,o[24]=_):_=o[24];const C=null==a?void 0:a.fontColor;let S,P;return o[25]!==C?(S=r.jsx(I,{className:"opacity-50",style:{color:C}}),o[25]=C,o[26]=S):S=o[26],o[27]!==i||o[28]!==_||o[29]!==S||o[30]!==c?(P=r.jsx("div",{className:"h-[88px] pb-3 w-full flex flex-col mb-2",children:r.jsxs(n,{onClick:U,target:"_blank",style:i,type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:c,children:[_,S]})}),o[27]=i,o[28]=_,o[29]=S,o[30]=c,o[31]=P):P=o[31],P}));function U(){i.info("此为预览效果")}export{q as A,S as C,P,I as R,L as a};
