import{E as e,ac as t,e as i,j as s,cz as r,w as n,B as o,fP as a,a9 as l,H as m,fQ as c,fR as d,fS as p,al as u,fT as j,av as h,c1 as x,aa as f,fU as g}from"./requestIdleCallbackPolyfill-DVdtTnyH.js";import{l as C,M as b,b as y}from"./homePage-DXtx6hpc.js";import{h as v}from"./sortableJsUtils-Cmte6_W4.js";import{R as w}from"./QuestionCircleOutlined-DwFwqXJU.js";import{C as k}from"./index-BeELEhML.js";import{P as S}from"./main-BvpC4wDd.js";import{S as D}from"./index-zo2gp33P.js";import{C as F}from"./ColorPicker-D7YnKARn.js";import"./fullSpin-CRyEmPj7.js";import"./index-LyMllqsd.js";import"./myDrawer2-DcmV7Osy.js";import"./handleButton-CWhGDF2Q.js";import"./myModal-Ca1vH7ck.js";import"./submitForInclusion-D-io1Bj0.js";import"./index-HltPkFWT.js";import"./row-wzIeTg14.js";import"./useBreakpoint-Bgav_ER7.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-DtzU4EtU.js";import"./getAllowClear-BKx3CWLJ.js";import"./Input-BTS9qamE.js";import"./TextArea-DdWc5CpB.js";import"./CloudUploadOutlined-LoBWrexg.js";import"./index-D_tOPW6n.js";import"./assets-CmvcfQKP.js";import"./iconBase-fTnig-gC.js";import"./index-ByhWaRvl.js";import"./MailOutlined-C4z6MGX5.js";import"./Overflow-Cf-e91fD.js";import"./index-DYDvEuY8.js";import"./LeftOutlined-D9Sp279J.js";import"./PlusOutlined-BHQVbRk8.js";import"./SearchOutlined-BPwByt2g.js";import"./useFresh-CBaqby8v.js";import"./spinLoading-DCM22KkD.js";import"./LikeFilled-DBaaUJXf.js";import"./index-3_wMreGH.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-DUpQ1lKe.js";import"./styleChecker-C4PN1HQu.js";import"./sortable.esm-BbtDOPOV.js";import"./addRecommendAppForm-B_-4lMIm.js";import"./UserOutlined-c7UcAfFY.js";import"./markdownContent-B0W8wkgT.js";import"./index-CXgvrF4N.js";import"./index-Dh-5kge8.js";function T(){const T=e(),O=t((e=>e.appData.listData)),P=t((e=>e.appData.freeDragListData)),I=t((e=>e.home.showFreeDrag)),M=t((e=>e.home.freeDragGridX)),R=t((e=>e.home.freeDragGridY)),$=t((e=>e.card.gridColumnWidth)),B=t((e=>e.card.gridRowHeight)),G=t((e=>e.card.columnGap)),H=t((e=>e.card.rowGap)),[L,U]=i.useState("icon"),[z,W]=i.useState("11"),[A,N]=i.useState("#ffffff"),[Q,E]=i.useState("#000000"),[q,J]=i.useState([]),[X,K]=i.useState(0),Y=[{label:"展示样式",content:s.jsx(s.Fragment,{children:s.jsx(D,{value:L,onChange:e=>{U(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片展示样式",options:[{label:"纯图",value:"icon"},{label:"文本",value:"text"},{label:"横版",value:"icon-h"},{label:"竖版",value:"icon-v"}]})})},{label:"卡片大小",content:s.jsx(s.Fragment,{children:s.jsx(D,{value:z,onChange:e=>{W(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片尺寸大小",options:C})})},{label:"背景颜色",content:s.jsx(s.Fragment,{children:s.jsx(F,{showText:!0,value:A,onChange:e=>{N(e.toHexString())}})})},{label:"文字颜色",content:s.jsx(s.Fragment,{children:s.jsx(F,{showText:!0,value:Q,onChange:e=>{E(e.toHexString())}})})},{label:`图标间距（${X}px）`,content:s.jsx(s.Fragment,{children:s.jsx(b,{value:X,min:0,max:48,onChange:e=>{K(e)}})})}],[_,V]=i.useState(!1);const Z=i.useRef(null);i.useEffect((()=>()=>{Z.current&&(clearTimeout(Z.current),Z.current=null)}),[]);const ee=[{label:"卡片内字体颜色(非卡片名称）",content:s.jsx(s.Fragment,{children:s.jsx(S,{title:"是否确认调整",onConfirm:()=>{const e=a(O);T(l(e[0])),m.success(`成功调整了${e[1]}个字体颜色`)},children:s.jsx(o,{type:"link",children:"调整"})})})},{label:"移除相同ID、空文件夹",content:s.jsx(s.Fragment,{children:s.jsx(S,{title:"是否确认移除",onConfirm:()=>{const e=c(O),t=v(d(p(u(O)))),i=c(t);T(l(t)),m.success(`成功移除了${e-i}个数据`)},children:s.jsx(o,{type:"link",children:"移除"})})})},{label:"更新ID为文本类型",content:s.jsx(S,{icon:s.jsx(h,{style:{color:"blue"}}),title:"该更新有利无害",onConfirm:()=>{const e=j(u(O));T(l(e[0])),m.success(`成功移除了${e[1]}个数据ID`)},children:s.jsx(o,{type:"link",children:"更新"})})},{label:"移除所有空白占位卡片",content:s.jsx(S,{title:"是否确认移除",onConfirm:()=>{const e=u(O),t=x(e);T(l(t[0])),m.success(`成功移除了${t[1]}个空白占位卡片`)},children:s.jsx(o,{type:"link",children:"移除"})})},{label:"整理全屏自由拖拽",content:s.jsx(S,{title:"是否确认整理",onConfirm:()=>{if(!I)return void m.error("整理失败，全屏自由拖拽布局未启用");const e=window.innerWidth,t=window.innerHeight,i=u(P).map((i=>{const s=Math.round(i.x/M)*M,r=Math.round(i.y/R)*R,n=y(i.size,$,B,H,G),o=e-n.width,a=t-n.height,l=Math.min(o,s),m=Math.min(a,r);return{...i,x:l,y:m}}));m.success("整理完成"),T(f(i))},children:s.jsx(o,{type:"link",children:"整理"})})}];return s.jsxs(s.Fragment,{children:[s.jsx(r,{items:ee,groupTitle:"一键优化",gap:20,bottomDivider:!0}),s.jsx(r,{items:Y,groupTitle:"手动控制",gap:20,bottomDivider:!0}),s.jsx(n,{message:"请在下方选择需要调整的参数",banner:!0,type:"info",icon:s.jsx(w,{}),className:"mb-5 rounded-md"}),s.jsx(k.Group,{options:[{label:"展示样式",value:"showType"},{label:"卡片大小",value:"size"},{label:"背景颜色",value:"bgColor"},{label:"文字颜色",value:"textColor"},{label:"图标间距",value:"iconPadding"}],className:"mb-6",value:q,onChange:e=>{J(e)}}),s.jsx(o,{type:"primary",onClick:function(){q.length<=0?m.error("请选择确认调整的参数信息"):(V(!0),Z.current&&clearTimeout(Z.current),Z.current=setTimeout((async()=>{try{const e=await async function(e,t,i){return new Promise(((s,r)=>{try{s(g(e,t,i))}catch(n){r(n)}}))}(O,q,{linkCardBgColor:A,linkCardShowType:L,linkCardSize:z,linkCardTextColor:Q,imgPaddingNum:X});T(l(e[0])),m.success(`成功调整了${e[1]}个链接卡片`)}catch(e){m.error("调整链接卡片时发生错误")}finally{V(!1)}}),500))},loading:_,children:"调整卡片"})]})}export{T as default};
