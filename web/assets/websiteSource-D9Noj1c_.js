import{x as e,E as t,ac as i,e as s,au as r,az as l,aA as o,j as n,B as a,ao as c,ah as m,ad as d,af as u,ag as p,aj as h,a8 as f,aw as j}from"./main-RpejCBsR.js";import{u as y,b as x}from"./useFresh-CPnGAo4P.js";import{M as b,R as g}from"./myTable-CRFfBxBV.js";import{C as k}from"./contentLayout-CYjexQz9.js";import{R as _}from"./ReloadOutlined-COIWZ7Ds.js";import{P as w}from"./main-Bz7X3OC0.js";import{F as C}from"./index-NJy1tlp1.js";import{S}from"./index-DEv9k294.js";import"./index-D5IqMKmB.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-DYvhoNUM.js";import"./Overflow-BCh9wkGD.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./transformData-hq2czZI8.js";import"./assets-CmvcfQKP.js";import"./index-mJdixdnj.js";import"./MoneyCollectOutlined-BEJwuBNw.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DhcLARst.js";import"./styleChecker-65ImXUxL.js";import"./AlipayOutlined-7zTy6hzu.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-nJJZPdRt.js";import"./useBreakpoint-DfVTHTv0.js";import"./getAllowClear-BYRQBlOI.js";import"./index-BOGE8Tfq.js";import"./Input-B4rSyk4X.js";import"./ReloadOutlined-B00s2TmV.js";import"./row-BVZ81Qgs.js";import"./QuestionCircleOutlined-DSm95oJP.js";function I(){const d=e.c(27),{key:u,refresh:p}=y(),h=t(),f=i(A);let j;d[0]!==f||d[1]!==h?(j=function(){r({url:m.getCategoryListWithAll}).then((e=>{if(200===e.code&&e.data){const t=e.data.map(N);l(t,f)||h(o(t))}}))},d[0]=f,d[1]=h,d[2]=j):j=d[2];const x=j;let g,w,C,S,I,T,z,M,R,U;d[3]!==f.length||d[4]!==x?(g=()=>{0===f.length&&x()},d[3]=f.length,d[4]=x,d[5]=g):g=d[5],d[6]===Symbol.for("react.memo_cache_sentinel")?(w=[],d[6]=w):w=d[6],s.useEffect(g,w),d[7]===Symbol.for("react.memo_cache_sentinel")?(C={title:"网站名称",key:"title",width:200,fixed:"left"},S={title:"网站描述",key:"description",width:450},I={title:"图标",key:"icon",width:140,render:v},T={title:"链接",key:"url",width:120,render:O},z={title:"所属分类",key:"categoryName",width:120},M={title:"提交人",key:"username",width:160},R={type:"time",title:"提交时间",key:"createdTime",width:200},d[7]=C,d[8]=S,d[9]=I,d[10]=T,d[11]=z,d[12]=M,d[13]=R):(C=d[7],S=d[8],I=d[9],T=d[10],z=d[11],M=d[12],R=d[13]),d[14]!==p?(U=[C,S,I,T,z,M,R,{title:"操作",fixed:"right",width:180,render:(e,t)=>n.jsx(L,{record:t,refresh:p})}],d[14]=p,d[15]=U):U=d[15];const W=U;let q,F,E,B,D,G;return d[16]===Symbol.for("react.memo_cache_sentinel")?(q=n.jsx(_,{}),d[16]=q):q=d[16],d[17]!==p?(F=n.jsx(a,{type:"primary",icon:q,onClick:()=>{p()},children:"刷新列表"}),d[17]=p,d[18]=F):F=d[18],d[19]===Symbol.for("react.memo_cache_sentinel")?(E=n.jsx(c,{className:"my-3"}),d[19]=E):E=d[19],d[20]===Symbol.for("react.memo_cache_sentinel")?(B={searchParams:{status:0}},d[20]=B):B=d[20],d[21]!==W||d[22]!==u?(D=n.jsx(b,{columns:W,getListUrl:m.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:u,params:B}),d[21]=W,d[22]=u,d[23]=D):D=d[23],d[24]!==F||d[25]!==D?(G=n.jsxs(k,{children:[F,E,D]}),d[24]=F,d[25]=D,d[26]=G):G=d[26],G}function O(e){return n.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function v(e,t){return e?n.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[n.jsx("img",{src:d(e),className:"rounded-sm",style:{width:"32px",height:"32px"}}),n.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function N(e){return{label:e.label,key:e.id}}function A(e){return e.stateUtils.categoryList}const L=s.memo((t=>{const r=e.c(38),{record:l,refresh:o}=t;let c;r[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],r[0]=c):c=r[0];const[d,y]=s.useState(c),x=i(z);let b;r[1]!==l||r[2]!==o||r[3]!==x?(b=function(e,t){u(t,y),setTimeout((()=>{p({url:"reject"===e?m.rejectWebsiteInfo:m.deleteWebsiteInfo,token:x,data:{id:l.id}}).then((e=>{200===e.code&&o()})).finally((()=>{h(t,y)}))}),500)},r[1]=l,r[2]=o,r[3]=x,r[4]=b):b=r[4];const k=b;let _,C,S,I;r[5]===Symbol.for("react.memo_cache_sentinel")?(_={width:"44px"},r[5]=_):_=r[5],r[6]!==l||r[7]!==o?(C=()=>{f.show(j,{title:"审核通过",children:n.jsx(T,{record:l,refresh:o})})},r[6]=l,r[7]=o,r[8]=C):C=r[8],r[9]!==d[0]||r[10]!==C?(S=n.jsx(a,{type:"link",size:"small",disabled:d[0],style:_,onClick:C,children:"通过"}),r[9]=d[0],r[10]=C,r[11]=S):S=r[11],r[12]!==k?(I=()=>{k("reject",1)},r[12]=k,r[13]=I):I=r[13];const O=d[1]||d[2];let v,N,A,L,M;r[14]===Symbol.for("react.memo_cache_sentinel")?(v={width:"44px"},r[14]=v):v=r[14],r[15]!==d[1]?(N=d[1]?n.jsx(g,{}):"驳回",r[15]=d[1],r[16]=N):N=r[16],r[17]!==O||r[18]!==N?(A=n.jsx(a,{danger:!0,type:"link",size:"small",disabled:O,style:v,children:N}),r[17]=O,r[18]=N,r[19]=A):A=r[19],r[20]!==I||r[21]!==A?(L=n.jsx(w,{title:"是否确认驳回申请？",onConfirm:I,children:A}),r[20]=I,r[21]=A,r[22]=L):L=r[22],r[23]!==k?(M=()=>{k("delete",2)},r[23]=k,r[24]=M):M=r[24];const R=d[1]||d[2];let U,W,q,F,E;return r[25]===Symbol.for("react.memo_cache_sentinel")?(U={width:"44px"},r[25]=U):U=r[25],r[26]!==d[2]?(W=d[2]?n.jsx(g,{}):"删除",r[26]=d[2],r[27]=W):W=r[27],r[28]!==R||r[29]!==W?(q=n.jsx(a,{danger:!0,type:"link",size:"small",disabled:R,style:U,children:W}),r[28]=R,r[29]=W,r[30]=q):q=r[30],r[31]!==M||r[32]!==q?(F=n.jsx(w,{title:"是否确认删除该申请？",onConfirm:M,children:q}),r[31]=M,r[32]=q,r[33]=F):F=r[33],r[34]!==L||r[35]!==F||r[36]!==S?(E=n.jsxs("div",{className:"flex flex-wrap",children:[S,L,F]}),r[34]=L,r[35]=F,r[36]=S,r[37]=E):E=r[37],E})),T=t=>{const r=e.c(23),{record:l,refresh:o}=t,c=i(M),d=i(R),[u,h]=s.useState(!1);let f,j;r[0]!==c?(j=c.filter(U).map(W),r[0]=c,r[1]=j):j=r[1],f=j;const y=f;let b;r[2]!==l.id||r[3]!==o||r[4]!==d?(b=function(e){h(!0),setTimeout((()=>{p({url:m.approveWebsiteInfo,token:d,data:{id:l.id,...e}}).then((e=>{200===e.code&&(o(),setTimeout(q,0))})).finally((()=>{h(!1)}))}),500)},r[2]=l.id,r[3]=o,r[4]=d,r[5]=b):b=r[5];const g=b;let k,_,w,I,O,v,N,A,L;return r[6]!==l.categoryId?(k={categoryId:l.categoryId,hidden:!1},r[6]=l.categoryId,r[7]=k):k=r[7],r[8]!==g?(_=e=>{g(e)},r[8]=g,r[9]=_):_=r[9],r[10]===Symbol.for("react.memo_cache_sentinel")?(w=[{required:!0,message:"请选择网站分类"}],r[10]=w):w=r[10],r[11]!==y?(I=n.jsx(C.Item,{label:"网站分类",name:"categoryId",required:!0,rules:w,children:n.jsx(S,{options:y,allowClear:!0,placeholder:"网站所属分类"})}),r[11]=y,r[12]=I):I=r[12],r[13]===Symbol.for("react.memo_cache_sentinel")?(O=[{required:!0,message:"请选择是否隐藏在资源库"}],r[13]=O):O=r[13],r[14]===Symbol.for("react.memo_cache_sentinel")?(v=n.jsx(C.Item,{label:"是否隐藏",name:"hidden",required:!0,rules:O,children:n.jsx(x.Group,{options:[{label:"显示",value:!1},{label:"隐藏",value:!0}]})}),r[14]=v):v=r[14],r[15]===Symbol.for("react.memo_cache_sentinel")?(N=n.jsx(a,{onClick:F,children:"取消"}),r[15]=N):N=r[15],r[16]!==u?(A=n.jsxs("div",{className:"flex justify-end flex-wrap gap-3 -mt-3",children:[N,n.jsx(a,{htmlType:"submit",type:"primary",loading:u,children:"确认"})]}),r[16]=u,r[17]=A):A=r[17],r[18]!==A||r[19]!==k||r[20]!==_||r[21]!==I?(L=n.jsxs(C,{initialValues:k,onFinish:_,children:[I,v,A]}),r[18]=A,r[19]=k,r[20]=_,r[21]=I,r[22]=L):L=r[22],L};function z(e){return e.user.token}function M(e){return e.stateUtils.categoryList}function R(e){return e.user.token}function U(e){return e.key>0}function W(e){return{label:e.label,value:e.key}}function q(){f.hide(j)}function F(){f.hide(j)}export{I as default};
