import{x as e,e as t,j as r,B as s,ao as i,ah as o,ad as a,af as l,a0 as n,ag as m,aj as c,aC as d}from"./main-RpejCBsR.js";import{I as f}from"./assets-CmvcfQKP.js";import{u as p,a as h}from"./useFresh-CPnGAo4P.js";import{r as j}from"./transformData-hq2czZI8.js";import{M as u,R as x}from"./myTable-CRFfBxBV.js";import{C as y}from"./contentLayout-CYjexQz9.js";import{F as _}from"./index-NJy1tlp1.js";import{I as b}from"./index-DJ4Q4UDS.js";import{R as w,a as k}from"./SearchOutlined-B2JWdp69.js";import{T as g}from"./index-mJdixdnj.js";import{R as S}from"./UserOutlined-BSR-I-QH.js";import{I as C}from"./index-D5IqMKmB.js";import{P as F}from"./main-Bz7X3OC0.js";import"./MailOutlined-DYvhoNUM.js";import"./Overflow-BCh9wkGD.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-DEv9k294.js";import"./getAllowClear-BYRQBlOI.js";import"./Input-B4rSyk4X.js";import"./MoneyCollectOutlined-BEJwuBNw.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DhcLARst.js";import"./styleChecker-65ImXUxL.js";import"./AlipayOutlined-7zTy6hzu.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-nJJZPdRt.js";import"./useBreakpoint-DfVTHTv0.js";import"./index-BOGE8Tfq.js";import"./row-BVZ81Qgs.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-BWCilDY2.js";import"./LeftOutlined-D9Sp279J.js";function O(){const a=e.c(42),{key:l,refresh:n}=p(),[m]=_.useForm();let c;a[0]===Symbol.for("react.memo_cache_sentinel")?(c={},a[0]=c):c=a[0];const[d,f]=t.useState(c);let h,x,g,S,C,F,O,v;a[1]===Symbol.for("react.memo_cache_sentinel")?(h={title:"用户",key:"username",width:160,fixed:"left",render:P},x={title:"预览",key:"filePath",width:200,className:"flex-center",render:N},g={title:"资源类型",key:"srcType",width:120,render:M},S={title:"文件类型",key:"fileType",width:120},C={title:"文件大小",key:"fileSize",width:120,render:I},F={title:"文件地址",key:"filePath",width:420,render:T},O={type:"time",title:"上传时间",key:"createdTime",width:200},a[1]=h,a[2]=x,a[3]=g,a[4]=S,a[5]=C,a[6]=F,a[7]=O):(h=a[1],x=a[2],g=a[3],S=a[4],C=a[5],F=a[6],O=a[7]),a[8]!==n?(v=[h,x,g,S,C,F,O,{title:"操作",fixed:"right",width:120,render:(e,t)=>r.jsx(B,{record:t,refresh:n})}],a[8]=n,a[9]=v):v=a[9];const z=v;let A,U,R,$,L,K,D,G,H,Q,E,J,V,W,X,Y;return a[10]!==m?(A=()=>{const e=m.getFieldsValue();e[Math.random()]=!0,f(j(e))},a[10]=m,a[11]=A):A=a[11],a[12]===Symbol.for("react.memo_cache_sentinel")?(U={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},a[12]=U):U=a[12],a[13]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsx(_.Item,{name:"username",children:r.jsx(b,{placeholder:"用户名"})}),a[13]=R):R=a[13],a[14]===Symbol.for("react.memo_cache_sentinel")?($=r.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:U,children:[R,r.jsx(_.Item,{name:"filePath",children:r.jsx(b,{placeholder:"文件地址"})})]}),a[14]=$):$=a[14],a[15]!==m?(L=()=>{m.submit()},a[15]=m,a[16]=L):L=a[16],a[17]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(w,{}),a[17]=K):K=a[17],a[18]!==L?(D=r.jsx(s,{type:"primary",onClick:L,icon:K,children:"查询"}),a[18]=L,a[19]=D):D=a[19],a[20]!==m?(G=()=>{m.resetFields();const e={};e[Math.random()]=!0,f(e)},a[20]=m,a[21]=G):G=a[21],a[22]===Symbol.for("react.memo_cache_sentinel")?(H=r.jsx(k,{}),a[22]=H):H=a[22],a[23]!==G?(Q=r.jsx(s,{onClick:G,icon:H,children:"重置"}),a[23]=G,a[24]=Q):Q=a[24],a[25]!==D||a[26]!==Q?(E=r.jsxs("div",{className:"flex flex-wrap gap-3",children:[D,Q]}),a[25]=D,a[26]=Q,a[27]=E):E=a[27],a[28]!==m||a[29]!==E||a[30]!==A?(J=r.jsxs(_,{className:"w-full",form:m,onFinish:A,children:[$,E]}),a[28]=m,a[29]=E,a[30]=A,a[31]=J):J=a[31],a[32]===Symbol.for("react.memo_cache_sentinel")?(V=r.jsx(i,{className:"my-3"}),a[32]=V):V=a[32],a[33]!==d?(W={searchParams:d},a[33]=d,a[34]=W):W=a[34],a[35]!==z||a[36]!==l||a[37]!==W?(X=r.jsx(u,{columns:z,getListUrl:o.getUploadSrcList,dataKey:"data.list",tableKey:l,params:W}),a[35]=z,a[36]=l,a[37]=W,a[38]=X):X=a[38],a[39]!==J||a[40]!==X?(Y=r.jsxs(y,{children:[J,V,X]}),a[39]=J,a[40]=X,a[41]=Y):Y=a[41],Y}function T(e){return r.jsx(g,{color:"blue",onClick:()=>{e&&window.open(a(e),"_blank")},className:"cursor-pointer",icon:r.jsx(h,{}),children:e||"-"})}function I(e){return r.jsx("span",{children:e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(2)}KB`:e<1073741824?`${(e/1024/1024).toFixed(2)}MB`:`${(e/1024/1024/1024).toFixed(2)}GB`})}function M(e){return r.jsx(g,{color:0===e?"blue":1===e?"green":2===e?"purple":3===e?"cyan":4===e?"red":5===e?"orange":6===e?"magenta":"volcano",children:0===e?"其他图片":1===e?"头像":2===e?"静态壁纸":3===e?"动态壁纸":4===e?"上传的图标":5===e?"自动获取的图标":6===e?"资源库的图标":e})}function N(e){return r.jsx(C,{src:a(e),height:48,fallback:f,loading:"lazy"})}function P(e,t){return r.jsx(g,{color:e||"0"===t.userId?"geekblue":"red",bordered:!1,icon:r.jsx(S,{}),children:e||("0"===t.userId?"游客":"已注销")})}const B=t.memo((i=>{const f=e.c(20),{record:p,refresh:h}=i;let j;f[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],f[0]=j):j=f[0];const[u,y]=t.useState(j);let _;f[1]!==p.id||f[2]!==h?(_=function(){l(1,y);const e=n.getState().user.token;setTimeout((()=>{m({url:o.deleteUploadSrc,token:e,data:{ids:[p.id]}}).then((e=>{200===e.code&&h()})).finally((()=>{c(1,y)}))}),500)},f[1]=p.id,f[2]=h,f[3]=_):_=f[3];const b=_;let w;f[4]===Symbol.for("react.memo_cache_sentinel")?(w=function(e){fetch(a(e),{headers:new Headers({Authorization:"Bearer "+n.getState().user.token})}).then(v).then((t=>{d.saveAs(t,e.split("/").pop()||"file")})).catch(z)},f[4]=w):w=f[4];const k=w;let g,S,C,O,T,I,M;return f[5]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},f[5]=g):g=f[5],f[6]!==p.filePath?(S=r.jsx(s,{type:"link",size:"small",style:g,onClick:()=>{k(p.filePath)},children:"下载"}),f[6]=p.filePath,f[7]=S):S=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},f[8]=C):C=f[8],f[9]!==u[1]?(O=u[1]?r.jsx(x,{}):"删除",f[9]=u[1],f[10]=O):O=f[10],f[11]!==u[1]||f[12]!==O?(T=r.jsx(s,{danger:!0,type:"link",size:"small",disabled:u[1],style:C,children:O}),f[11]=u[1],f[12]=O,f[13]=T):T=f[13],f[14]!==b||f[15]!==T?(I=r.jsx(F,{title:"是否删除附件？",onConfirm:b,children:T}),f[14]=b,f[15]=T,f[16]=I):I=f[16],f[17]!==S||f[18]!==I?(M=r.jsxs("div",{className:"flex flex-wrap",children:[S,I]}),f[17]=S,f[18]=I,f[19]=M):M=f[19],M}));function v(e){return e.blob()}function z(){return alert("文件下载失败")}export{O as default};
