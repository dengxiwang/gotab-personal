import{x as e,ab as t,e as o,j as s,B as i,ad as a,at as l,ah as r,aA as n,aj as c,cv as m,af as d,b6 as p}from"./main-Drts11_7.js";import{L as x,E as f}from"./index-B6TAr31U.js";import{F as h}from"./fullSpin-Cyk3jkkO.js";import{T as u}from"./index-C9FQ1vGg.js";import{R as j,a as y}from"./addRecommendAppForm-hGdsgHf2.js";import"./Overflow-BDgtIXVY.js";import"./getAllowClear-CAqcmJNw.js";import"./Input-C1mipumm.js";import"./index-Dv1_3i3f.js";import"./index-DdMyc5Cn.js";import"./row-DcPNg0q0.js";import"./useBreakpoint-DFlb7uCR.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-zfgypH5w.js";import"./TextArea-CXkQ_emr.js";import"./ColorPicker-C-XzROKx.js";import"./main-C0HDhtQF.js";import"./index-CG3QoDEo.js";import"./index-BXPExOGF.js";import"./CloudUploadOutlined-DA8CgKh6.js";function g(){const p=e.c(22),{token:g}=t.useToken(),v=o.useRef(null),[S,_]=o.useState();let w;p[0]===Symbol.for("react.memo_cache_sentinel")?(w=[],p[0]=w):w=p[0];const[k,C]=o.useState(w);let N;p[1]===Symbol.for("react.memo_cache_sentinel")?(N=[],p[1]=N):N=p[1];const[T,A]=o.useState(N);let E;p[2]===Symbol.for("react.memo_cache_sentinel")?(E=[],p[2]=E):E=p[2];const[B,P]=o.useState(E);let R;p[3]===Symbol.for("react.memo_cache_sentinel")?(R=[],p[3]=R):R=p[3];const[H,I]=o.useState(R);let L;p[4]===Symbol.for("react.memo_cache_sentinel")?(L=function(e,t){const o=[...t.filter((t=>!e.some((e=>e.id===t.id)))).slice(0,3),...e];P(o)},p[4]=L):L=p[4];const z=L;let F;p[5]!==k||p[6]!==T?(F=function(){l({url:r.getRecommendAppList}).then((e=>{200===e.code&&e.data&&!n(e.data,k)&&o.startTransition((()=>{C(e.data),z(e.data,T)}))})).finally((()=>{c(1,I)}))},p[5]=k,p[6]=T,p[7]=F):F=p[7];const M=F;let O;p[8]!==k||p[9]!==T?(O=function(){var e;const t=null==(e=globalThis.siteConfig)?void 0:e.server_url;if(!t||"https://web.gotab.cn"===m(t,"https://"))return;d(0,I);const s="https://web.gotab.cn".endsWith("/")?"https://web.gotab.cn":"https://web.gotab.cn/";l({url:s+"api/recommendApp"}).then((e=>{if(200===e.code&&e.data&&!n(e.data,T)){const t=e.data.slice(0,5).map(b);o.startTransition((()=>{A(t),z(k,t)}))}})).finally((()=>{c(0,I)}))},p[8]=k,p[9]=T,p[10]=O):O=p[10];const U=O;let D,G,K,Q;return p[11]!==M||p[12]!==U?(D=()=>{var e;_(null==(e=v.current)?void 0:e.clientHeight),d(1,I),M(),U()},p[11]=M,p[12]=U,p[13]=D):D=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(G=[],p[14]=G):G=p[14],o.useLayoutEffect(D,G),p[15]===Symbol.for("react.memo_cache_sentinel")?(K={height:"calc(100% + 16px)"},p[15]=K):K=p[15],p[16]!==S||p[17]!==H[0]||p[18]!==H[1]||p[19]!==B||p[20]!==g?(Q=s.jsx("div",{ref:v,style:K,children:H[0]||H[1]?s.jsx(h,{}):B.length>0?s.jsx(x,{data:B,height:S,itemHeight:88,itemKey:"id",styles:{verticalScrollBar:{display:"none"}},children:e=>s.jsx("div",{className:"h-[88px] pb-3",children:s.jsxs(i,{href:e.link,target:"_blank",style:{background:e.background,borderColor:g.colorBorderSecondary},type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:e.icon?s.jsx("div",{style:{height:"42px",width:"42px",background:e.iconBackground},className:"flex-center rounded-[10px] overflow-hidden",children:s.jsx("img",{src:a(e.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):s.jsx(y,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:g.colorPrimary}}),children:[s.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[s.jsxs("div",{className:"text-sm mb-[4px] flex items-center flex-wrap",children:[e.tagText&&s.jsx(u,{color:null==e?void 0:e.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:e.tagText}),s.jsx("h1",{style:{color:null==e?void 0:e.fontColor},children:e.title})]}),s.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:{color:null==e?void 0:e.fontColor},children:null==e?void 0:e.description})]}),s.jsx(j,{className:"opacity-50",style:{color:null==e?void 0:e.fontColor}})]})},e.id)}):s.jsx(f,{image:f.PRESENTED_IMAGE_SIMPLE})}),p[16]=S,p[17]=H[0],p[18]=H[1],p[19]=B,p[20]=g,p[21]=Q):Q=p[21],Q}function b(e){return{...e,icon:p(e.icon)}}export{g as default};
