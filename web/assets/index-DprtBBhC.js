import{W as e,r as l,ap as a,bt as t,bs as n,aS as s,aA as r,aj as o,ec as i,bH as u,ay as c,an as d}from"./requestIdleCallbackPolyfill-CMQytVNM.js";import{u as p,C as f}from"./index-DP6Gzc8f.js";import{s as m}from"./useFresh-CbK52Q3Q.js";const v=e.createContext(null);const b=(e,c)=>{var d;const{prefixCls:b,className:C,rootClassName:g,children:y,indeterminate:O=!1,style:x,onMouseEnter:h,onMouseLeave:j,skipGroup:E=!1,disabled:N}=e,k=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:w,direction:P,checkbox:$}=l.useContext(a),M=l.useContext(v),{isFormItemInput:S}=l.useContext(t),V=l.useContext(n),I=null!==(d=(null==M?void 0:M.disabled)||N)&&void 0!==d?d:V,R=l.useRef(k.value),q=l.useRef(null),G=s(c,q);l.useEffect((()=>{null==M||M.registerValue(k.value)}),[]),l.useEffect((()=>{if(!E)return k.value!==R.current&&(null==M||M.cancelValue(R.current),null==M||M.registerValue(k.value),R.current=k.value),()=>null==M?void 0:M.cancelValue(k.value)}),[k.value]),l.useEffect((()=>{var e;(null===(e=q.current)||void 0===e?void 0:e.input)&&(q.current.input.indeterminate=O)}),[O]);const L=w("checkbox",b),_=r(L),[A,F,H]=m(L,_),B=Object.assign({},k);M&&!E&&(B.onChange=(...e)=>{k.onChange&&k.onChange.apply(k,e),M.toggleOption&&M.toggleOption({label:y,value:k.value})},B.name=M.name,B.checked=M.value.includes(k.value));const K=o(`${L}-wrapper`,{[`${L}-rtl`]:"rtl"===P,[`${L}-wrapper-checked`]:B.checked,[`${L}-wrapper-disabled`]:I,[`${L}-wrapper-in-form-item`]:S},null==$?void 0:$.className,C,g,H,_,F),Q=o({[`${L}-indeterminate`]:O},i,F),[T,W]=p(B.onClick);return A(l.createElement(u,{component:"Checkbox",disabled:I},l.createElement("label",{className:K,style:Object.assign(Object.assign({},null==$?void 0:$.style),x),onMouseEnter:h,onMouseLeave:j,onClick:T},l.createElement(f,Object.assign({},B,{onClick:W,prefixCls:L,className:Q,disabled:I,ref:G})),null!=y&&l.createElement("span",{className:`${L}-label`},y))))},C=l.forwardRef(b);const g=l.forwardRef(((e,t)=>{const{defaultValue:n,children:s,options:i=[],prefixCls:u,className:p,rootClassName:f,style:b,onChange:g}=e,y=function(e,l){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&l.indexOf(t)<0&&(a[t]=e[t]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(t=Object.getOwnPropertySymbols(e);n<t.length;n++)l.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(e,t[n])&&(a[t[n]]=e[t[n]])}return a}(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:O,direction:x}=l.useContext(a),[h,j]=l.useState(y.value||n||[]),[E,N]=l.useState([]);l.useEffect((()=>{"value"in y&&j(y.value||[])}),[y.value]);const k=l.useMemo((()=>i.map((e=>"string"==typeof e||"number"==typeof e?{label:e,value:e}:e))),[i]),w=e=>{N((l=>l.filter((l=>l!==e))))},P=e=>{N((l=>[].concat(d(l),[e])))},$=e=>{const l=h.indexOf(e.value),a=d(h);-1===l?a.push(e.value):a.splice(l,1),"value"in y||j(a),null==g||g(a.filter((e=>E.includes(e))).sort(((e,l)=>k.findIndex((l=>l.value===e))-k.findIndex((e=>e.value===l)))))},M=O("checkbox",u),S=`${M}-group`,V=r(M),[I,R,q]=m(M,V),G=c(y,["value","disabled"]),L=i.length?k.map((e=>l.createElement(C,{prefixCls:M,key:e.value.toString(),disabled:"disabled"in e?e.disabled:y.disabled,value:e.value,checked:h.includes(e.value),onChange:e.onChange,className:o(`${S}-item`,e.className),style:e.style,title:e.title,id:e.id,required:e.required},e.label))):s,_=l.useMemo((()=>({toggleOption:$,value:h,disabled:y.disabled,name:y.name,registerValue:P,cancelValue:w})),[$,h,y.disabled,y.name,P,w]),A=o(S,{[`${S}-rtl`]:"rtl"===x},p,f,q,V,R);return I(l.createElement("div",Object.assign({className:A,style:b},G,{ref:t}),l.createElement(v.Provider,{value:_},L)))})),y=C;y.Group=g,y.__ANT_CHECKBOX=!0;export{y as C};
