import{c as e,t,r as o,j as s,B as a,k as i,O as l,o as r,a3 as n,v as c,cp as m,l as d,aM as p}from"./main-BznldwrR.js";import{L as x,E as h}from"./index-pOq2t2PQ.js";import{F as f}from"./fullSpin-zybnquud.js";import{T as u}from"./index-BJB7vPB3.js";import{R as j,a as g}from"./addRecommendAppForm-BrCfWqVv.js";import"./Overflow-t0s94lkY.js";import"./getAllowClear-Bhk0ADw3.js";import"./Input-MFSIJ5db.js";import"./index-DJHRXG-n.js";import"./index-CM88uxhR.js";import"./row-CgX7p7wl.js";import"./useBreakpoint-BajckZld.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-CU_E_toA.js";import"./TextArea-CUVoyy7V.js";import"./ColorPicker-BC4IJn7Q.js";import"./index-DncNCKRz.js";import"./index-Cv7tdZmO.js";import"./CloudUploadOutlined-BdmG5-Xi.js";function y(){const p=e.c(22),{token:y}=t.useToken(),v=o.useRef(null),[S,_]=o.useState();let k;p[0]===Symbol.for("react.memo_cache_sentinel")?(k=[],p[0]=k):k=p[0];const[w,N]=o.useState(k);let C;p[1]===Symbol.for("react.memo_cache_sentinel")?(C=[],p[1]=C):C=p[1];const[T,E]=o.useState(C);let A;p[2]===Symbol.for("react.memo_cache_sentinel")?(A=[],p[2]=A):A=p[2];const[B,R]=o.useState(A);let L;p[3]===Symbol.for("react.memo_cache_sentinel")?(L=[],p[3]=L):L=p[3];const[M,O]=o.useState(L);let P;p[4]===Symbol.for("react.memo_cache_sentinel")?(P=function(e,t){const o=[...t.filter(t=>!e.some(e=>e.id===t.id)),...e];R(o)},p[4]=P):P=p[4];const H=P;let I;p[5]!==w||p[6]!==T?(I=function(){l({url:r.getRecommendAppList}).then(e=>{200===e.code&&e.data&&!n(e.data,w)&&o.startTransition(()=>{N(e.data),H(e.data,T)})}).finally(()=>{c(1,O)})},p[5]=w,p[6]=T,p[7]=I):I=p[7];const U=I;let W;p[8]!==w||p[9]!==T?(W=function(){var e;const t=null==(e=globalThis.siteConfig)?void 0:e.server_url;if(!t||"https://web.gotab.cn"===m(t,"https://"))return;d(0,O);const s="https://web.gotab.cn".endsWith("/")?"https://web.gotab.cn":"https://web.gotab.cn/";l({url:s+"api/recommendApp",catchMsg:!1}).then(e=>{if(200===e.code&&e.data&&!n(e.data,T)){const t=e.data.map(b);o.startTransition(()=>{E(t),H(w,t)})}}).finally(()=>{c(0,O)})},p[8]=w,p[9]=T,p[10]=W):W=p[10];const z=W;let F,Q,D,G;return p[11]!==U||p[12]!==z?(F=()=>{var e;_(null==(e=v.current)?void 0:e.clientHeight),d(1,O),U(),z()},p[11]=U,p[12]=z,p[13]=F):F=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(Q=[],p[14]=Q):Q=p[14],o.useLayoutEffect(F,Q),p[15]===Symbol.for("react.memo_cache_sentinel")?(D={height:"calc(100% + 16px)"},p[15]=D):D=p[15],p[16]!==S||p[17]!==M[0]||p[18]!==M[1]||p[19]!==B||p[20]!==y?(G=s.jsx("div",{ref:v,style:D,children:M[0]||M[1]?s.jsx(f,{}):B.length>0?s.jsx(x,{data:B,height:S,itemHeight:88,itemKey:"id",styles:{verticalScrollBar:{display:"none"}},children:e=>s.jsx("div",{className:"h-[88px] pb-3",children:s.jsxs(a,{href:e.link,target:"_blank",style:{background:e.background,borderColor:y.colorBorderSecondary},type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:e.icon?s.jsx("div",{style:{height:"42px",width:"42px",background:e.iconBackground},className:"flex-center rounded-[10px] overflow-hidden",children:s.jsx("img",{src:i(e.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):s.jsx(g,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:y.colorPrimary}}),children:[s.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[s.jsxs("div",{className:"text-sm mb-[4px] flex items-center",children:[e.tagText&&s.jsx(u,{color:null==e?void 0:e.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:e.tagText}),s.jsx("h1",{className:"line-clamp-1 whitespace-break-spaces text-left",style:{color:null==e?void 0:e.fontColor},children:e.title})]}),s.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:{color:null==e?void 0:e.fontColor},children:null==e?void 0:e.description})]}),s.jsx(j,{className:"opacity-50",style:{color:null==e?void 0:e.fontColor}})]})},e.id)}):s.jsx(h,{image:h.PRESENTED_IMAGE_SIMPLE})}),p[16]=S,p[17]=M[0],p[18]=M[1],p[19]=B,p[20]=y,p[21]=G):G=p[21],G}function b(e){return{...e,icon:p(e.icon)}}export{y as default};
