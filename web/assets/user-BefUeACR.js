import{r as e,I as r,ga as t,c as a,j as n,B as o,l,n as s,o as i,v as c,m,t as d,c3 as u,h as f,E as h,Q as p,Z as j,u as x,c5 as y,$ as g,a0 as b,q as _,U as w,d as S,a3 as v,k as P,F as C,a as k,aK as E,c4 as z,c6 as N,bS as O,gb as A,O as I,K as Z,cS as T,cT as F,cU as L,cV as $,cW as q,cX as D,cY as R,cZ as U,c_ as V,d0 as M,d1 as W,d2 as Y,c$ as B,cP as Q}from"./requestIdleCallbackPolyfill-D5UXfOWp.js";import{u as K}from"./useForm-cby96dhC.js";import{F as J}from"./index-CiXMHzQl.js";import{I as X}from"./index-B3JXcSyU.js";import{R as G}from"./UserOutlined-D17YGhfL.js";import{a as H}from"./MailOutlined-Dn4ubatW.js";import{C as ee,F as re,K as te,S as ae,U as ne,W as oe}from"./WarningOutlined-CUQAbwtO.js";import{e as le,A as se,L as ie,I as ce,D as me,f as de,h as ue,i as fe,j as he,k as pe}from"./homePage-Bntyy-Ia.js";import{T as je}from"./index-Bf49vDPw.js";import{R as xe}from"./QuestionCircleOutlined-Cx6yB-U8.js";import{T as ye}from"./index-DzIMazBS.js";import{f as ge,m as be}from"./assets-B8Bi78Vh.js";import{M as _e}from"./myModal-vmWZtVQK.js";import{a as we}from"./PlusOutlined-DcH_Wxqn.js";import{S as Se}from"./index-DcFKkqxo.js";import{l as ve,R as Pe,C as Ce}from"./useFresh-DMCel_n6.js";import{D as ke}from"./sortableJsUtils-Bi3UToZQ.js";import{e as Ee}from"./spinLoading-DXTfPbL7.js";import"./row-BT64AYT8.js";import"./useBreakpoint-BwSRtPvM.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./getAllowClear-CLEcXxhr.js";import"./Input-mEqGoZsi.js";import"./TextArea-BvATmHT6.js";import"./Overflow-RDTyJatL.js";import"./index-BWR76n7v.js";import"./LeftOutlined-D9Sp279J.js";import"./fullSpin-Crg3LqU5.js";import"./index-CULtT6eP.js";import"./myDrawer2-ipbep1e9.js";import"./handleButton-plINYrzW.js";import"./submitForInclusion-DY5LDa6Z.js";import"./CloudUploadOutlined-BrGodqJ3.js";import"./ColorPicker-CjrZJ6-l.js";import"./index-DLosaacx.js";import"./index-B4ekvnKN.js";import"./iconBase-qp3Xt5As.js";import"./useUpdateEffect-ROFoULpi.js";import"./SearchOutlined-x-ldfOSX.js";import"./index-BCVdynv9.js";import"./ExportOutlined-CTlyDYjf.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-BwJZYyFu.js";import"./styleChecker-D0CsdC8y.js";import"./sortable.esm-Bv0j-UjJ.js";import"./addRecommendAppForm-CmduEc8X.js";import"./LikeFilled-PrumuGR_.js";import"./myErrorPage-CJ8da_2p.js";import"./markdownContent-CiTf2GHl.js";function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ze.apply(this,arguments)}const Ne=(t,a)=>e.createElement(r,ze({},t,{ref:a,icon:ee})),Oe=e.forwardRef(Ne);function Ae(){return Ae=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ae.apply(this,arguments)}const Ie=(a,n)=>e.createElement(r,Ae({},a,{ref:n,icon:t})),Ze=e.forwardRef(Ie);function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Te.apply(this,arguments)}const Fe=(t,a)=>e.createElement(r,Te({},t,{ref:a,icon:re})),Le=e.forwardRef(Fe);function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},$e.apply(this,arguments)}const qe=(t,a)=>e.createElement(r,$e({},t,{ref:a,icon:te})),De=e.forwardRef(qe);function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Re.apply(this,arguments)}const Ue=(t,a)=>e.createElement(r,Re({},t,{ref:a,icon:ae})),Ve=e.forwardRef(Ue);function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Me.apply(this,arguments)}const We=(t,a)=>e.createElement(r,Me({},t,{ref:a,icon:ne})),Ye=e.forwardRef(We);function Be(){return Be=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Be.apply(this,arguments)}const Qe=(t,a)=>e.createElement(r,Be({},t,{ref:a,icon:oe})),Ke=e.forwardRef(Qe);function Je(e,r){return r?/^\d{1,6}$/.test(r)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function Xe(e){return e?.replace(/\D/g,"")}const Ge=e.memo(function(r){const t=a.c(38),{changeType:d}=r,[u]=K();let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[h,p]=e.useState(f);let j;t[1]!==d?(j=function(e){l(2,p),s({url:i.findPassword,data:e}).then(e=>{200===e?.code&&d("login")}).finally(()=>{c(2,p)})},t[1]=d,t[2]=j):j=t[2];const x=j;let y;t[3]!==u?(y=function(){const e=u.getFieldValue("username");if(!e||""===e)return void m.error("请输入用户名");if(!/^[a-zA-Z]/.test(e))return void m.error("用户名必须以字母开头");if(!/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(e))return void m.error("用户名只能包含字母、数字、下划线或短横线");if(e.length<3||e.length>20)return void m.error("用户名长度必须在3到20位之间");const r=u.getFieldValue("email");r&&""!==r?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?(l(1,p),s({url:i.findPasswordEmailCode,data:{email:r,username:e}}).finally(()=>{c(1,p)})):m.error("请输入有效的邮箱地址"):m.error("请输入邮箱")},t[3]=u,t[4]=y):y=t[4];const g=y;let b,_,w,S,v,P,C,k,E,z,N,O,A,I,Z,T,F,L,$,q;return t[5]===Symbol.for("react.memo_cache_sentinel")?(b={flex:"80px"},t[5]=b):b=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(_={maxWidth:360,margin:"auto"},t[6]=_):_=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(w=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z]/.test(r)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(r)?r.length<3||r.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],t[7]=w):w=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(S=n.jsx(J.Item,{name:"username",required:!0,rules:w,children:n.jsx(X,{prefix:n.jsx(G,{}),placeholder:"用户名",allowClear:!0,maxLength:20})}),t[8]=S):S=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(v=[{validator:(e,r)=>r?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],t[9]=v):v=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(P=n.jsx(J.Item,{name:"email",required:!0,className:"flex-auto",rules:v,children:n.jsx(X,{placeholder:"邮箱",prefix:n.jsx(H,{}),allowClear:!0,maxLength:255})}),t[10]=P):P=t[10],t[11]!==g||t[12]!==h[1]?(C=n.jsxs("div",{className:"flex gap-3 items-end",children:[P,n.jsx(o,{onClick:g,loading:h[1],className:"mb-6",children:"获取验证码"})]}),t[11]=g,t[12]=h[1],t[13]=C):C=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(k=[{validator:Je}],t[14]=k):k=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(E={width:"100%"},t[15]=E):E=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(z=n.jsx(J.Item,{name:"emailCode",required:!0,normalize:Xe,rules:k,children:n.jsx(X,{autoComplete:"new-password",style:E,placeholder:"验证码",allowClear:!0,maxLength:6,prefix:n.jsx(Le,{})})}),t[16]=z):z=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(N=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(r)?r.length<6||r.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],t[17]=N):N=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(O=n.jsx(J.Item,{name:"newPassword",required:!0,rules:N,children:n.jsx(X.Password,{autoComplete:"new-password",prefix:n.jsx(le,{}),placeholder:"新密码",allowClear:!0,maxLength:32})}),t[18]=O):O=t[18],t[19]!==u?(A=[{validator(e,r){if(""===r||!r)return Promise.reject(new Error("请再次输入密码"));return r!==u.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],t[19]=u,t[20]=A):A=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(I=n.jsx(X.Password,{autoComplete:"new-password",prefix:n.jsx(le,{}),placeholder:"二次确认密码",allowClear:!0,maxLength:32}),t[21]=I):I=t[21],t[22]!==A?(Z=n.jsx(J.Item,{name:"confirmPassword",required:!0,rules:A,children:I}),t[22]=A,t[23]=Z):Z=t[23],t[24]!==h[2]?(T=n.jsx(o,{type:"primary",className:"w-full",htmlType:"submit",loading:h[2],children:"找回密码"}),t[24]=h[2],t[25]=T):T=t[25],t[26]===Symbol.for("react.memo_cache_sentinel")?(F=n.jsx(je,{className:" text-xs w-full m-0",icon:n.jsx(xe,{}),children:"多次发送验证码会存在收信失败的问题，请隔天重试"}),t[26]=F):F=t[26],t[27]!==d?(L=n.jsx(o,{type:"link",onClick:()=>{d("login")},children:"找到密码？返回登录"}),t[27]=d,t[28]=L):L=t[28],t[29]!==T||t[30]!==L?($=n.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[T,F,L]}),t[29]=T,t[30]=L,t[31]=$):$=t[31],t[32]!==x||t[33]!==u||t[34]!==Z||t[35]!==$||t[36]!==C?(q=n.jsx(n.Fragment,{children:n.jsxs(J,{labelCol:b,form:u,name:"findPassword-form",autoComplete:"off",onFinish:x,style:_,children:[S,C,z,O,Z,$]})}),t[32]=x,t[33]=u,t[34]=Z,t[35]=$,t[36]=C,t[37]=q):q=t[37],q});function He(e,r){return r?/^\d{1,6}$/.test(r)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function er(e){return e?.replace(/\D/g,"")}const rr=e.memo(function(r){const t=a.c(32),{changeType:d}=r,[u]=K();let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[h,p]=e.useState(f);let j;t[1]!==d?(j=function(e){l(1,p),s({url:i.register,data:e}).then(e=>{200===e?.code&&d("login")}).finally(()=>{c(1,p)})},t[1]=d,t[2]=j):j=t[2];const x=j;let y;t[3]!==u?(y=function(){const e=u.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(l(0,p),s({url:i.emailCode,data:{email:e}}).finally(()=>{c(0,p)})):m.error("请输入有效的邮箱地址"):m.error("请输入邮箱")},t[3]=u,t[4]=y):y=t[4];const g=y;let b,_,w,S,v,P,C,k,E,z,N,O,A,I,Z,T,F;return t[5]===Symbol.for("react.memo_cache_sentinel")?(b={flex:"80px"},t[5]=b):b=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(_={maxWidth:360,margin:"auto"},t[6]=_):_=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(w=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z]/.test(r)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(r)?r.length<3||r.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],t[7]=w):w=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(S=n.jsx(J.Item,{name:"username",required:!0,rules:w,children:n.jsx(X,{prefix:n.jsx(G,{}),placeholder:"用户名",allowClear:!0,maxLength:20})}),t[8]=S):S=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(v=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(r)?r.length<6||r.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],t[9]=v):v=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(P=n.jsx(J.Item,{name:"password",required:!0,rules:v,children:n.jsx(X.Password,{autoComplete:"new-password",prefix:n.jsx(le,{}),placeholder:"密码",allowClear:!0,maxLength:32})}),t[10]=P):P=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(C=[{validator(e,r){if(!r)return Promise.reject(new Error("请输入邮箱"));return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址"))}}],t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(k=n.jsx(J.Item,{name:"email",required:!0,className:"flex-auto",rules:C,children:n.jsx(X,{placeholder:"邮箱",prefix:n.jsx(H,{}),allowClear:!0})}),t[12]=k):k=t[12],t[13]!==g||t[14]!==h[0]?(E=n.jsxs("div",{className:"flex gap-3 items-end",children:[k,n.jsx(o,{onClick:g,loading:h[0],className:"mb-6",children:"获取验证码"})]}),t[13]=g,t[14]=h[0],t[15]=E):E=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(z=[{validator:He}],t[16]=z):z=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(N={width:"100%"},t[17]=N):N=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(O=n.jsx(J.Item,{name:"emailCode",required:!0,normalize:er,rules:z,children:n.jsx(X,{autoComplete:"new-password",style:N,placeholder:"验证码",allowClear:!0,maxLength:6,prefix:n.jsx(Le,{})})}),t[18]=O):O=t[18],t[19]!==h[1]?(A=n.jsx(o,{type:"primary",className:"w-full",htmlType:"submit",loading:h[1],children:"注册"}),t[19]=h[1],t[20]=A):A=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(I=n.jsx(je,{className:" text-xs w-full m-0",icon:n.jsx(xe,{}),children:"多次发送验证码会存在收信失败的问题，请隔天重试"}),t[21]=I):I=t[21],t[22]!==d?(Z=n.jsx(o,{type:"link",onClick:()=>{d("login")},children:"已有账号？返回登录"}),t[22]=d,t[23]=Z):Z=t[23],t[24]!==A||t[25]!==Z?(T=n.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[A,I,Z]}),t[24]=A,t[25]=Z,t[26]=T):T=t[26],t[27]!==u||t[28]!==x||t[29]!==E||t[30]!==T?(F=n.jsx(n.Fragment,{children:n.jsxs(J,{labelCol:b,form:u,name:"register-form",autoComplete:"off",onFinish:x,style:_,children:[S,P,E,O,T]})}),t[27]=u,t[28]=x,t[29]=E,t[30]=T,t[31]=F):F=t[31],F});const tr=e.memo(function(){const r=a.c(14),[t,o]=e.useState("login"),{token:l}=d.useToken();let s;r[0]===Symbol.for("react.memo_cache_sentinel")?(s=function(e){o(e)},r[0]=s):s=r[0];const i=s;let c,m;r[1]!==t?(c=n.jsx("div",{className:"flex flex-col items-center m-3 gap-3",children:n.jsx(se,{size:64,icon:"findPassword"===t?n.jsx(De,{}):"register"===t?n.jsx(Ye,{}):n.jsx(G,{})})}),r[1]=t,r[2]=c):c=r[2],r[3]!==l.colorPrimary?(m={color:l.colorPrimary},r[3]=l.colorPrimary,r[4]=m):m=r[4];const u="login"===t?"登录享有更多服务":"register"===t?"欢迎您的注册体验":"遗失密码？即刻找回";let f,h,p;return r[5]!==m||r[6]!==u?(f=n.jsx("p",{className:"font-medium text-lg mb-6 text-center",style:m,children:u}),r[5]=m,r[6]=u,r[7]=f):f=r[7],r[8]!==t?(h="login"===t?n.jsx(ie,{changeType:i}):"register"===t?n.jsx(rr,{changeType:i}):n.jsx(Ge,{changeType:i}),r[8]=t,r[9]=h):h=r[9],r[10]!==c||r[11]!==f||r[12]!==h?(p=n.jsxs(n.Fragment,{children:[c,f,h]}),r[10]=c,r[11]=f,r[12]=h,r[13]=p):p=r[13],p});function ar(e){return e.user.token}const nr=e.memo(function(){const r=a.c(21),{getDefaultData:t}=u();let m;r[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],r[0]=m):m=r[0];const[d,x]=e.useState(m),y=f(ar);let g;r[1]!==y?(g=function(){l(0,x),s({url:i.setDefaultData,token:y,data:{data:h()}}).finally(()=>{c(0,x)})},r[1]=y,r[2]=g):g=r[2];const b=g;let _,w,S,v,P,C,k,E,z;return r[3]===Symbol.for("react.memo_cache_sentinel")?(_=n.jsx(p,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),r[3]=_):_=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(w=n.jsx(Ve,{}),r[4]=w):w=r[4],r[5]!==d[0]?(S=n.jsx(o,{type:"primary",icon:w,loading:d[0],children:"保存默认配置"}),r[5]=d[0],r[6]=S):S=r[6],r[7]!==b||r[8]!==S?(v=n.jsx(j,{title:"是否确认保存？",onConfirm:b,children:S}),r[7]=b,r[8]=S,r[9]=v):v=r[9],r[10]!==t?(P=()=>{t(1,x)},r[10]=t,r[11]=P):P=r[11],r[12]===Symbol.for("react.memo_cache_sentinel")?(C=n.jsx(Ze,{}),r[12]=C):C=r[12],r[13]!==d[1]?(k=n.jsx(o,{loading:d[1],icon:C,children:"获取默认配置"}),r[13]=d[1],r[14]=k):k=r[14],r[15]!==P||r[16]!==k?(E=n.jsx(j,{title:"是否确认获取？",onConfirm:P,children:k}),r[15]=P,r[16]=k,r[17]=E):E=r[17],r[18]!==v||r[19]!==E?(z=n.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[_,v,E]}),r[18]=v,r[19]=E,r[20]=z):z=r[20],z});function or(){g.hide(b)}function lr(e){return e.user.userInfo}function sr(e){return e.user.token}const ir=e.memo(function(){const r=a.c(17),t=x(),[l,c]=e.useState(!1),m=f(sr),d=f(lr);let u;r[0]!==t||r[1]!==m?(u=function(e){c(!0),s({url:i.submitAppellation,token:m,data:e}).then(e=>{200===e.code&&e.data&&(t(y(e.data)),g.hide(b))}).finally(()=>{c(!1)})},r[0]=t,r[1]=m,r[2]=u):u=r[2];const h=u;let j,_,w,S,v,P,C;return r[3]===Symbol.for("react.memo_cache_sentinel")?(j=n.jsx(p,{message:n.jsx("p",{children:"称号是用户的一个额外信息，申请通过即可开启 VIP 标识！"}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),r[3]=j):j=r[3],r[4]!==d?(_=[{validator:(e,r)=>r&&""!==r?r.length>8?Promise.reject("称号名称不能超过8个字符"):r===d.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],r[4]=d,r[5]=_):_=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(w=n.jsx(X,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),r[6]=w):w=r[6],r[7]!==_?(S=n.jsx(J.Item,{label:"称号名称",required:!0,rules:_,name:"appellation",children:w}),r[7]=_,r[8]=S):S=r[8],r[9]===Symbol.for("react.memo_cache_sentinel")?(v=n.jsx(o,{onClick:or,children:"取消"}),r[9]=v):v=r[9],r[10]!==l?(P=n.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[v,n.jsx(o,{type:"primary",htmlType:"submit",loading:l,children:"提交申请"})]}),r[10]=l,r[11]=P):P=r[11],r[12]!==h||r[13]!==S||r[14]!==P||r[15]!==d?(C=n.jsxs(n.Fragment,{children:[j,n.jsxs(J,{initialValues:d,onFinish:h,children:[S,P]})]}),r[12]=h,r[13]=S,r[14]=P,r[15]=d,r[16]=C):C=r[16],C});function cr(){g.hide(b)}function mr(){g.hide(b)}function dr(){g.hide(b)}function ur(e,r){const t=new FileReader;let a=!1;const n=()=>{a||r(t.result)};t.addEventListener("loadend",n),t.readAsDataURL(e);return()=>{a=!0,t.removeEventListener("loadend",n),t.abort()}}function fr(e){return e.user.userInfo}function hr(e){return e.user.token}const pr=e.memo(function(){const r=a.c(31),t=x(),d=f(hr),u=f(fr);let h;r[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],r[0]=h):h=r[0];const[p,j]=e.useState(h),[g,b]=e.useState(),[S,v]=e.useState(null),[P,C]=e.useState(null);let k,E;r[1]!==P?(k=()=>()=>{P&&P()},E=[P],r[1]=P,r[2]=k,r[3]=E):(k=r[2],E=r[3]),e.useEffect(k,E);const z=ur;let N;r[4]!==t||r[5]!==d?(N=()=>{l(0,j),s({url:i.resetAvatar,token:d}).then(e=>{200===e.code&&e.data&&(t(y(e.data)),setTimeout(dr,0))}).finally(()=>{c(0,j)})},r[4]=t,r[5]=d,r[6]=N):N=r[6];const O=N;let A;r[7]!==t||r[8]!==S||r[9]!==d||r[10]!==u?(A=()=>{S?(l(1,j),s({url:i.uploadAvatar,data:_({file:S}),token:d}).then(e=>{if(200===e.code&&e.data){const r={...u,avatar:e.data.avatar_url};t(y(r)),setTimeout(mr,0)}}).finally(()=>{c(1,j)})):m.error("请先选择一个图片")},r[7]=t,r[8]=S,r[9]=d,r[10]=u,r[11]=A):A=r[11];const I=A;let Z,T,F,L,$,q,D,R,U;return r[12]!==P?(Z=()=>()=>{P&&P()},T=[P],r[12]=P,r[13]=Z,r[14]=T):(Z=r[13],T=r[14]),e.useEffect(Z,T),r[15]===Symbol.for("react.memo_cache_sentinel")?(F=e=>{if(e.size>512e3)return m.error("头像大小不能超过500KB！"),!1;const r=z(e,r=>{b(r),v(e)});return C(()=>r),!1},r[15]=F):F=r[15],r[16]!==g?(L=n.jsx(ce,{quality:.1,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:n.jsx(w,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:F,children:g?n.jsx("img",{src:g,alt:"avatar",style:{width:"100%"}}):n.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[n.jsx(we,{}),n.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),r[16]=g,r[17]=L):L=r[17],r[18]===Symbol.for("react.memo_cache_sentinel")?($=n.jsx(o,{onClick:cr,children:"取消"}),r[18]=$):$=r[18],r[19]!==p[0]||r[20]!==O?(q=n.jsx(o,{loading:p[0],onClick:O,children:"恢复默认"}),r[19]=p[0],r[20]=O,r[21]=q):q=r[21],r[22]!==p[1]||r[23]!==I?(D=n.jsx(o,{type:"primary",onClick:I,loading:p[1],children:"保存头像"}),r[22]=p[1],r[23]=I,r[24]=D):D=r[24],r[25]!==q||r[26]!==D?(R=n.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[$,q,D]}),r[25]=q,r[26]=D,r[27]=R):R=r[27],r[28]!==R||r[29]!==L?(U=n.jsxs(n.Fragment,{children:[L,R]}),r[28]=R,r[29]=L,r[30]=U):U=r[30],U});function jr(){g.hide(b)}function xr(e,r){if(!r)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(r)?r.length<6||r.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function yr(e){200===e.code&&g.hide(b)}function gr(e){return e.user.token}const br=e.memo(function(){const r=a.c(19),[t]=K();let m;r[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],r[0]=m):m=r[0];const[d,u]=e.useState(m),h=f(gr);let p;r[1]!==h?(p=function(e){l(0,u),s({url:i.changePassword,data:e,token:h}).then(yr).finally(()=>{c(0,u)})},r[1]=h,r[2]=p):p=r[2];const j=p,x=xr;let y,g,b,_,w,S,v,P,C;return r[3]===Symbol.for("react.memo_cache_sentinel")?(y={flex:"82px"},r[3]=y):y=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(g=n.jsx(J.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:x}],children:n.jsx(X.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),r[4]=g):g=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(b=n.jsx(J.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:x}],children:n.jsx(X.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),r[5]=b):b=r[5],r[6]!==t?(_=[{validator(e,r){if(""===r||!r)return Promise.reject(new Error("请再次输入密码"));return r!==t.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],r[6]=t,r[7]=_):_=r[7],r[8]===Symbol.for("react.memo_cache_sentinel")?(w=n.jsx(X.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),r[8]=w):w=r[8],r[9]!==_?(S=n.jsx(J.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:_,children:w}),r[9]=_,r[10]=S):S=r[10],r[11]===Symbol.for("react.memo_cache_sentinel")?(v=n.jsx(o,{onClick:jr,children:"取消"}),r[11]=v):v=r[11],r[12]!==d[0]?(P=n.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[v,n.jsx(o,{type:"primary",htmlType:"submit",loading:d[0],children:"确定"})]}),r[12]=d[0],r[13]=P):P=r[13],r[14]!==j||r[15]!==t||r[16]!==S||r[17]!==P?(C=n.jsx(n.Fragment,{children:n.jsxs(J,{form:t,autoComplete:"off",name:"edit-user-form",onFinish:j,labelCol:y,children:[g,b,S,P]})}),r[14]=j,r[15]=t,r[16]=S,r[17]=P,r[18]=C):C=r[18],C});function _r(){g.hide(b)}function wr(e,r){return r&&r.length>20&&r.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function Sr(e){return e.user.userInfo}function vr(e){return e.user.token}const Pr=e.memo(function(r){const t=a.c(23),{initialValues:m}=r,d=x();let u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[0]=u):u=t[0];const[h,p]=e.useState(u),j=f(vr),_=f(Sr);let w;t[1]!==d||t[2]!==j||t[3]!==_?(w=function(e){l(0,p),""!==e.birthday&&e.birthday||delete e.birthday,s({url:i.editUserInfo,data:e,token:j}).then(e=>{200===e.code&&e.data&&(v(e.data,_)||d(y(e.data)),g.hide(b))}).finally(()=>{c(0,p)})},t[1]=d,t[2]=j,t[3]=_,t[4]=w):w=t[4];const P=w;let C,k,E,z,N,O,A,I,Z,T,F;return t[5]!==m.birthday?(C=m.birthday&&S(m.birthday,"YYYY-MM-DD"),t[5]=m.birthday,t[6]=C):C=t[6],t[7]!==m||t[8]!==C?(k={...m,birthday:C},t[7]=m,t[8]=C,t[9]=k):k=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(E={flex:"72px"},t[10]=E):E=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(z=n.jsx(J.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z]/.test(r)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(r)?r.length<3||r.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:n.jsx(X,{placeholder:"用户名",allowClear:!0,maxLength:20})}),t[11]=z):z=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(N=n.jsx(J.Item,{name:"nickname",label:"昵称",rules:[{validator:wr}],children:n.jsx(X,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),t[12]=N):N=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(O=n.jsx(J.Item,{name:"sex",label:"性别",required:!0,children:n.jsx(Se,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),t[13]=O):O=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(A=n.jsx(J.Item,{name:"phone",label:"手机号",rules:[{validator(e,r){if(""===r||!r)return Promise.resolve();return/^1[3-9]\d{9}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:n.jsx(X,{placeholder:"手机号",maxLength:11,allowClear:!0})}),t[14]=A):A=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(I=n.jsx(J.Item,{name:"birthday",label:"生日",children:n.jsx(me,{placeholder:"生日",allowClear:!0})}),t[15]=I):I=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(Z=n.jsx(o,{onClick:_r,children:"取消"}),t[16]=Z):Z=t[16],t[17]!==h[0]?(T=n.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[Z,n.jsx(o,{type:"primary",htmlType:"submit",loading:h[0],children:"确定"})]}),t[17]=h[0],t[18]=T):T=t[18],t[19]!==P||t[20]!==T||t[21]!==k?(F=n.jsx(n.Fragment,{children:n.jsxs(J,{autoComplete:"off",initialValues:k,name:"edit-user-form",onFinish:P,labelCol:E,children:[z,N,O,A,I,T]})}),t[19]=P,t[20]=T,t[21]=k,t[22]=F):F=t[22],F});function Cr(){g.hide(b)}function kr(e,r){return r?/^\d{1,6}$/.test(r)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function Er(e){return e?.replace(/\D/g,"")}function zr(e){return e.user.userInfo}function Nr(e){return e.user.token}const Or=e.memo(function(){const r=a.c(22),t=x(),[d]=K();let u;r[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],r[0]=u):u=r[0];const[h,p]=e.useState(u),j=f(Nr),_=f(zr);let w;r[1]!==d?(w=function(){const e=d.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(l(0,p),s({url:i.emailCode,data:{email:e}}).finally(()=>{c(0,p)})):m.error("请输入有效的邮箱地址"):m.error("请输入邮箱")},r[1]=d,r[2]=w):w=r[2];const S=w;let P;r[3]!==t||r[4]!==j||r[5]!==_?(P=function(e){l(1,p),s({url:i.bindEmail,data:e,token:j}).then(e=>{200===e.code&&e.data&&(v(e.data,_)||t(y(e.data)),g.hide(b))}).finally(()=>{c(1,p)})},r[3]=t,r[4]=j,r[5]=_,r[6]=P):P=r[6];const C=P;let k,E,z,N,O,A,I,Z;return r[7]===Symbol.for("react.memo_cache_sentinel")?(k={flex:"72px"},r[7]=k):k=r[7],r[8]===Symbol.for("react.memo_cache_sentinel")?(E=n.jsx(J.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,r)=>r?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:n.jsx(X,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),r[8]=E):E=r[8],r[9]!==S||r[10]!==h[0]?(z=n.jsxs("div",{className:"flex gap-3 items-end",children:[E,n.jsx(o,{onClick:S,loading:h[0],className:"mb-6",children:"获取验证码"})]}),r[9]=S,r[10]=h[0],r[11]=z):z=r[11],r[12]===Symbol.for("react.memo_cache_sentinel")?(N=[{validator:kr}],r[12]=N):N=r[12],r[13]===Symbol.for("react.memo_cache_sentinel")?(O=n.jsx(J.Item,{name:"emailCode",required:!0,label:"验证码",normalize:Er,rules:N,children:n.jsx(X,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),r[13]=O):O=r[13],r[14]===Symbol.for("react.memo_cache_sentinel")?(A=n.jsx(o,{onClick:Cr,children:"取消"}),r[14]=A):A=r[14],r[15]!==h[1]?(I=n.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[A,n.jsx(o,{type:"primary",htmlType:"submit",loading:h[1],children:"确定"})]}),r[15]=h[1],r[16]=I):I=r[16],r[17]!==C||r[18]!==d||r[19]!==z||r[20]!==I?(Z=n.jsx(n.Fragment,{children:n.jsxs(J,{form:d,onFinish:C,name:"user-email-form",labelCol:k,autoComplete:"off",children:[z,O,I]})}),r[17]=C,r[18]=d,r[19]=z,r[20]=I,r[21]=Z):Z=r[21],Z});function Ar(){g.show(b,{title:"注销账户",children:n.jsx(Dr,{})})}function Ir(){g.show(b,{title:"退出登录",children:n.jsx(qr,{})})}function Zr(){g.show(b,{title:"修改密码",children:n.jsx(br,{})})}function Tr(){m.success("数据合并完成")}function Fr(){g.show(b,{title:"头像设置",children:n.jsx(pr,{})})}function Lr(e){return e.user.userInfo}const $r=e.memo(function(){const r=a.c(97),{pullData:t,pushData:l,getDefaultDataClear:s}=u(),i=f(Lr);let c;r[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],r[0]=c):c=r[0];const[d,h]=e.useState(c);let p;r[1]!==i.email?(p=function(){g.show(b,{title:`绑定邮箱（原邮箱：${i.email||"无"}）`,children:n.jsx(Or,{})})},r[1]=i.email,r[2]=p):p=r[2];const x=p;let y,_,w,S,v,k,E,z;r[3]!==i.avatar||r[4]!==i.sex?(y=i?.avatar?P(i.avatar):1===i?.sex?ge:be,r[3]=i.avatar,r[4]=i.sex,r[5]=y):y=r[5],r[6]!==y?(_=n.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:Fr,children:n.jsx(se,{size:72,src:y})}),r[6]=y,r[7]=_):_=r[7],r[8]!==i.appellation||r[9]!==i.appellationStatus?(w=i.appellation&&1===i.appellationStatus?n.jsx(de,{}):n.jsx(ve,{}),r[8]=i.appellation,r[9]=i.appellationStatus,r[10]=w):w=r[10],r[11]!==i.appellation||r[12]!==i.appellationStatus||r[13]!==i.userType?(S=i.appellation&&1===i.appellationStatus?"volcano":ue.find(e=>e.userType===i.userType)?.color,r[11]=i.appellation,r[12]=i.appellationStatus,r[13]=i.userType,r[14]=S):S=r[14],r[15]!==i.appellation||r[16]!==i.appellationStatus||r[17]!==i.userType?(v=i.appellation&&1===i.appellationStatus?i.appellation:ue.find(e=>e.userType===i.userType)?.text,r[15]=i.appellation,r[16]=i.appellationStatus,r[17]=i.userType,r[18]=v):v=r[18],r[19]!==w||r[20]!==S||r[21]!==v?(k=n.jsx(je,{icon:w,className:"m-0 flex items-center gap-1",color:S,children:v}),r[19]=w,r[20]=S,r[21]=v,r[22]=k):k=r[22],r[23]!==_||r[24]!==k?(E=n.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[_,k]}),r[23]=_,r[24]=k,r[25]=E):E=r[25],r[26]===Symbol.for("react.memo_cache_sentinel")?(z={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},r[26]=z):z=r[26];const N=i.username||"-";let O;r[27]!==N?(O={label:"用户名",children:N},r[27]=N,r[28]=O):O=r[28];const A=i.nickname||"-";let I;r[29]!==A?(I={label:"昵称",children:A},r[29]=A,r[30]=I):I=r[30];const Z=1===i.sex?"女":"男";let T,F,L;r[31]!==Z?(T={label:"性别",children:Z},r[31]=Z,r[32]=T):T=r[32],r[33]!==x||r[34]!==i.email?(F=i.email||n.jsx(o,{type:"link",size:"small",className:"p-0",onClick:x,children:"绑定"}),r[33]=x,r[34]=i.email,r[35]=F):F=r[35],r[36]!==F?(L={label:"邮箱",children:F},r[36]=F,r[37]=L):L=r[37];const $=i.phone||"-";let q;r[38]!==$?(q={label:"手机号",children:$},r[38]=$,r[39]=q):q=r[39];const D=i.birthday||"-";let R;r[40]!==D?(R={label:"生日",children:D},r[40]=D,r[41]=R):R=r[41];const U=i.registerTime||"-";let V,M,W,Y,B,Q,K,J,X,G,ee,re,te;r[42]!==U?(V={label:"注册时间",children:U},r[42]=U,r[43]=V):V=r[43],r[44]!==l?(M=()=>{"1"===localStorage.getItem("focusPulling")?m.warning("数据自动同步中，请稍后再试"):l(0,h)},r[44]=l,r[45]=M):M=r[45],r[46]!==d[0]||r[47]!==M?(W=n.jsx(o,{type:"link",size:"small",onClick:M,loading:d[0],children:"上传"}),r[46]=d[0],r[47]=M,r[48]=W):W=r[48],r[49]===Symbol.for("react.memo_cache_sentinel")?(Y=n.jsx(C,{type:"vertical"}),r[49]=Y):Y=r[49],r[50]!==t?(B=()=>{"1"===localStorage.getItem("focusPulling")?m.warning("数据自动同步中，请稍后再试"):t(1,h,void 0,!0)},r[50]=t,r[51]=B):B=r[51],r[52]!==d[1]||r[53]!==B?(Q=n.jsx(o,{type:"link",size:"small",onClick:B,loading:d[1],children:"拉取"}),r[52]=d[1],r[53]=B,r[54]=Q):Q=r[54],r[55]!==W||r[56]!==Q?(K={label:"数据管理",children:n.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[W,Y,Q]})},r[55]=W,r[56]=Q,r[57]=K):K=r[57],r[58]!==s?(J=()=>{s(void 0,void 0,Tr,!0)},r[58]=s,r[59]=J):J=r[59],r[60]===Symbol.for("react.memo_cache_sentinel")?(X=n.jsx(o,{type:"link",size:"small",className:"p-0",children:"合并数据"}),r[60]=X):X=r[60],r[61]!==J?(G={label:"初始数据",children:n.jsx(n.Fragment,{children:n.jsx(j,{title:"将与本地数据差异化合并",onConfirm:J,children:X})})},r[61]=J,r[62]=G):G=r[62],r[63]!==O||r[64]!==I||r[65]!==T||r[66]!==L||r[67]!==q||r[68]!==R||r[69]!==V||r[70]!==K||r[71]!==G?(ee=n.jsx(ke,{bordered:!0,column:1,className:"w-full mt-6",styles:z,items:[O,I,T,L,q,R,V,K,G]}),r[63]=O,r[64]=I,r[65]=T,r[66]=L,r[67]=q,r[68]=R,r[69]=V,r[70]=K,r[71]=G,r[72]=ee):ee=r[72],r[73]===Symbol.for("react.memo_cache_sentinel")?(re=n.jsx(ye,{}),r[73]=re):re=r[73],r[74]!==i.appellation||r[75]!==i.appellationStatus?(te=()=>{g.show(b,{title:n.jsxs("div",{className:"flex items-center gap-2",children:[i.appellation&&1===i.appellationStatus?"变更称号":"申请称号",n.jsxs(je,{color:0===i.appellationStatus?"":1===i.appellationStatus?"green":"red",icon:0===i.appellationStatus?n.jsx(Pe,{}):1===i.appellationStatus?n.jsx(fe,{}):n.jsx(Oe,{}),children:["称号状态：",0===i.appellationStatus?i.appellation?"申请中":"待申请":1===i.appellationStatus?"已荣获":"被拒绝"]})]}),children:n.jsx(ir,{})})},r[74]=i.appellation,r[75]=i.appellationStatus,r[76]=te):te=r[76];const ae=0===i.appellationStatus?i.appellation?"称号管理":"申请称号":1===i.appellationStatus?"变更称号":"重新申请";let ne,oe,le,ie,ce,me,pe,xe,_e,we;return r[77]!==te||r[78]!==ae?(ne=n.jsx(o,{icon:re,onClick:te,children:ae}),r[77]=te,r[78]=ae,r[79]=ne):ne=r[79],r[80]===Symbol.for("react.memo_cache_sentinel")?(oe=n.jsx(Ee,{}),r[80]=oe):oe=r[80],r[81]!==i?(le=n.jsx(o,{icon:oe,onClick:()=>{g.show(b,{title:"更新资料",children:n.jsx(Pr,{initialValues:i})})},children:"更新资料"}),r[81]=i,r[82]=le):le=r[82],r[83]===Symbol.for("react.memo_cache_sentinel")?(ie=n.jsx(o,{icon:n.jsx(De,{}),onClick:Zr,children:"修改密码"}),r[83]=ie):ie=r[83],r[84]===Symbol.for("react.memo_cache_sentinel")?(ce=n.jsx(H,{}),r[84]=ce):ce=r[84],r[85]!==x?(me=n.jsx(o,{icon:ce,onClick:x,children:"绑定邮箱"}),r[85]=x,r[86]=me):me=r[86],r[87]===Symbol.for("react.memo_cache_sentinel")?(pe=n.jsx(o,{icon:n.jsx(he,{}),danger:!0,onClick:Ir,children:"退出登录"}),r[87]=pe):pe=r[87],r[88]===Symbol.for("react.memo_cache_sentinel")?(xe=n.jsx(o,{icon:n.jsx(Ke,{}),type:"text",danger:!0,size:"small",className:"text-xs",onClick:Ar,children:"注销账户？请慎重操作！"}),r[88]=xe):xe=r[88],r[89]!==ne||r[90]!==le||r[91]!==me?(_e=n.jsxs("div",{className:"flex flex-col mt-6 gap-3",children:[ne,le,ie,me,pe,xe]}),r[89]=ne,r[90]=le,r[91]=me,r[92]=_e):_e=r[92],r[93]!==ee||r[94]!==_e||r[95]!==E?(we=n.jsxs(n.Fragment,{children:[E,ee,_e]}),r[93]=ee,r[94]=_e,r[95]=E,r[96]=we):we=r[96],we}),qr=()=>{const r=a.c(14),t=x(),{getDefaultDataClear:l}=u(),s=f(Rr),[c,d]=e.useState(!1);let h;r[0]!==c||r[1]!==t||r[2]!==l||r[3]!==s?(h=function(){if(t(z("")),t(y({})),t(N(!1)),I({url:i.logout,token:s}),m.success("退出成功"),g.hide(b),O||(g.hide(pe),g.hide(_e)),c||!O){l(10,void 0,e=>{Z(e)&&(t(T()),t(F()),t(L()),t($()),t(q()),t(D()),t(R()),t(U()),t(V()),t(M()),t(W()),t(Y()),t(B()),t(Q()))});const e=k.getState().stateUtils.mySwiper;if(e){k.getState().swiper.loop?e?.slideToLoop(0):e?.slideTo(0)}}},r[0]=c,r[1]=t,r[2]=l,r[3]=s,r[4]=h):h=r[4];const j=h;let _,w,S,v,P;return r[5]===Symbol.for("react.memo_cache_sentinel")?(_=n.jsx(p,{message:"退出后将停止在不同设备或浏览器间同步数据。",type:"error",showIcon:!0,banner:!0,icon:n.jsx(A,{}),className:"rounded-md"}),r[5]=_):_=r[5],r[6]!==c?(w=O&&n.jsxs("div",{className:"flex gap-2 items-center pointer-events-auto cursor-pointer w-fit",onClick:()=>{d(!c)},children:[n.jsx(Ce,{checked:c,className:"pointer-events-none"}),n.jsx("p",{children:"退出清空本地数据"})]}),r[6]=c,r[7]=w):w=r[7],r[8]===Symbol.for("react.memo_cache_sentinel")?(S=n.jsx(o,{onClick:Ur,children:"取消"}),r[8]=S):S=r[8],r[9]!==j?(v=n.jsxs("div",{className:"flex gap-3 justify-end",children:[S,n.jsx(o,{danger:!0,type:"primary",onClick:j,children:"确定"})]}),r[9]=j,r[10]=v):v=r[10],r[11]!==w||r[12]!==v?(P=n.jsxs("div",{className:"flex flex-col gap-4",children:[_,w,v]}),r[11]=w,r[12]=v,r[13]=P):P=r[13],P},Dr=()=>{const r=a.c(7),t=x(),[l,s]=e.useState(!1);let c;r[0]!==t?(c=function(){s(!0);const e=k.getState().user.token;E({url:i.logOff,token:e}).then(e=>{200===e.code&&(t(z("")),t(y({})),t(N(!1)),g.hide(b),O||(g.hide(pe),g.hide(_e)))}).finally(()=>{s(!1)})},r[0]=t,r[1]=c):c=r[1];const m=c;let d,u,f;return r[2]===Symbol.for("react.memo_cache_sentinel")?(d=n.jsx(p,{message:"是否确认注销账户？注销后账户数据将被完全清理，请您慎重操作，如有问题，欢迎联系管理员！",type:"error",showIcon:!0,banner:!0,icon:n.jsx(A,{}),className:"rounded-md"}),r[2]=d):d=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(u=n.jsx(o,{onClick:Vr,children:"取消"}),r[3]=u):u=r[3],r[4]!==l||r[5]!==m?(f=n.jsxs("div",{className:"flex flex-col gap-4",children:[d,n.jsxs("div",{className:"flex gap-3 justify-end",children:[u,n.jsx(o,{danger:!0,type:"primary",onClick:m,loading:l,children:"确定"})]})]}),r[4]=l,r[5]=m,r[6]=f):f=r[6],f};function Rr(e){return e.user.token}function Ur(){g.hide(b)}function Vr(){g.hide(b)}function Mr(){const r=a.c(11),t=x(),o=f(Br),l=f(Yr),s=f(Wr);let c;r[0]!==t||r[1]!==o||r[2]!==l?(c=function(){I({url:i.getUserInfo,token:o}).then(e=>{200===e.code&&e.data&&(v(e.data,l)||t(y(e.data)))})},r[0]=t,r[1]=o,r[2]=l,r[3]=c):c=r[3];const m=c;let d,u,h;return r[4]!==m||r[5]!==o?(d=()=>{o&&m()},r[4]=m,r[5]=o,r[6]=d):d=r[6],r[7]===Symbol.for("react.memo_cache_sentinel")?(u=[],r[7]=u):u=r[7],e.useEffect(d,u),r[8]!==s||r[9]!==o?(h=n.jsx("div",{className:"py-6 mx-auto w-full max-w-[390px]",children:o?s?n.jsx(nr,{}):n.jsx($r,{}):n.jsx(tr,{})}),r[8]=s,r[9]=o,r[10]=h):h=r[10],h}function Wr(e){return e.user.isSettingDefaultData}function Yr(e){return e.user.userInfo}function Br(e){return e.user.token}export{Mr as default};
