import{x as e,E as t,ac as r,e as s,j as i,at as o,aA as l,aB as n,B as a,ao as m,a8 as c,ax as d,ah as p,ad as j,af as h,ag as u,aj as f}from"./requestIdleCallbackPolyfill-CT2Uunzs.js";import{u as x}from"./useFresh-CGeh22C4.js";import{r as y}from"./transformData-D5arJeXA.js";import{M as b,R as g}from"./myTable-DFZSMHtZ.js";import{S as k}from"./submitForInclusion-D5hniM4G.js";import{C as w}from"./contentLayout-odUVCfUr.js";import{F as _}from"./index-B5l_nge6.js";import{I as S}from"./index-Dgw5cqVQ.js";import{S as C}from"./index-C1J7OQZZ.js";import{R as O,a as I}from"./SearchOutlined-CCB0jfzY.js";import{T as A}from"./index-f4najWpg.js";import{R as N}from"./SortAscendingOutlined-CmNJUMmq.js";import{R as v}from"./UserOutlined-HtHoo4Ia.js";import{P as F}from"./main-B1uf8fu0.js";import"./index-BbIXSvcQ.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-G-2gGlXX.js";import"./Overflow-Dd87tN43.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./assets-CmvcfQKP.js";import"./MoneyCollectOutlined-DlFUXkT9.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DcBGJWNw.js";import"./styleChecker-Cxx79Q8k.js";import"./AlipayOutlined-OZZKbO3G.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-CESJ98W-.js";import"./index-C2t7G4dJ.js";import"./useBreakpoint-DKl-R_5q.js";import"./getAllowClear-BfnEnRnP.js";import"./index-kmb97xVR.js";import"./Input-BiSwrENd.js";import"./myModal-CU31-YKH.js";import"./CloudUploadOutlined-BzSjj2jW.js";import"./ColorPicker-k4skerJv.js";import"./index-C3_RJzSL.js";import"./index-mdGFZ7v4.js";import"./row-DFvObsCi.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-CCBBim-V.js";import"./SortAscendingOutlined-8bEGxkuH.js";function M(){const j=e.c(60),{key:h,refresh:u}=x(),f=t(),g=r(E);let A;j[0]!==g?(A=g.filter(W).map(P),j[0]=g,j[1]=A):A=j[1];const N=A,[v]=_.useForm();let F;j[2]===Symbol.for("react.memo_cache_sentinel")?(F={},j[2]=F):F=j[2];const[M,Q]=s.useState(F);let V;j[3]!==g||j[4]!==f?(V=function(){o({url:p.getCategoryListWithAll}).then((e=>{if(200===e.code&&e.data){const t=e.data.map(B);l(t,g)||f(n(t))}}))},j[3]=g,j[4]=f,j[5]=V):V=j[5];const q=V;let D,G,H,J,X,Y,$,Z,ee,te,re,se;j[6]!==g.length||j[7]!==q?(D=()=>{0===g.length&&q()},j[6]=g.length,j[7]=q,j[8]=D):D=j[8],j[9]===Symbol.for("react.memo_cache_sentinel")?(G=[],j[9]=G):G=j[9],s.useEffect(D,G),j[10]===Symbol.for("react.memo_cache_sentinel")?($={title:"网站名称",key:"title",width:200,fixed:"left"},Z={title:"状态",key:"status",width:80,render:z},ee={title:"排序",key:"sort",width:80,render:R},te={title:"网站描述",key:"description",width:450},re={title:"图标",key:"icon",width:140,render:U},H={title:"链接",key:"url",width:120,render:T},J={title:"所属分类",key:"categoryName",width:120},X={title:"提交人",key:"username",width:160,render:L},Y={type:"time",title:"更新时间",key:"createdTime",width:200},j[10]=H,j[11]=J,j[12]=X,j[13]=Y,j[14]=$,j[15]=Z,j[16]=ee,j[17]=te,j[18]=re):(H=j[10],J=j[11],X=j[12],Y=j[13],$=j[14],Z=j[15],ee=j[16],te=j[17],re=j[18]),j[19]!==u?(se=[$,Z,ee,te,re,H,J,X,Y,{title:"操作",fixed:"right",width:120,render:(e,t)=>i.jsx(K,{record:t,refresh:u})}],j[19]=u,j[20]=se):se=j[20];const ie=se;let oe,le,ne,ae,me,ce,de,pe,je,he,ue,fe,xe,ye,be,ge,ke,we,_e;return j[21]!==v?(oe=()=>{const e=v.getFieldsValue();e[Math.random()]=!0,Q(y(e))},j[21]=v,j[22]=oe):oe=j[22],j[23]===Symbol.for("react.memo_cache_sentinel")?(le={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},j[23]=le):le=j[23],j[24]===Symbol.for("react.memo_cache_sentinel")?(ne=i.jsx(_.Item,{name:"title",children:i.jsx(S,{placeholder:"标题"})}),j[24]=ne):ne=j[24],j[25]===Symbol.for("react.memo_cache_sentinel")?(ae=i.jsx(_.Item,{name:"link",children:i.jsx(S,{placeholder:"链接"})}),j[25]=ae):ae=j[25],j[26]===Symbol.for("react.memo_cache_sentinel")?(me=i.jsx(_.Item,{name:"username",children:i.jsx(S,{placeholder:"用户名"})}),j[26]=me):me=j[26],j[27]!==N?(ce=i.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:le,children:[ne,ae,me,i.jsx(_.Item,{name:"categoryId",children:i.jsx(C,{placeholder:"分类",options:N})})]}),j[27]=N,j[28]=ce):ce=j[28],j[29]!==v?(de=()=>{v.submit()},j[29]=v,j[30]=de):de=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(pe=i.jsx(O,{}),j[31]=pe):pe=j[31],j[32]!==de?(je=i.jsx(a,{type:"primary",onClick:de,icon:pe,children:"查询"}),j[32]=de,j[33]=je):je=j[33],j[34]!==v?(he=()=>{v.resetFields();const e={};e[Math.random()]=!0,Q(e)},j[34]=v,j[35]=he):he=j[35],j[36]===Symbol.for("react.memo_cache_sentinel")?(ue=i.jsx(I,{}),j[36]=ue):ue=j[36],j[37]!==he?(fe=i.jsx(a,{onClick:he,icon:ue,children:"重置"}),j[37]=he,j[38]=fe):fe=j[38],j[39]!==je||j[40]!==fe?(xe=i.jsxs("div",{className:"flex flex-wrap gap-3",children:[je,fe]}),j[39]=je,j[40]=fe,j[41]=xe):xe=j[41],j[42]!==v||j[43]!==oe||j[44]!==ce||j[45]!==xe?(ye=i.jsxs(_,{className:"w-full",form:v,onFinish:oe,children:[ce,xe]}),j[42]=v,j[43]=oe,j[44]=ce,j[45]=xe,j[46]=ye):ye=j[46],j[47]===Symbol.for("react.memo_cache_sentinel")?(be=i.jsx(m,{className:"my-3"}),j[47]=be):be=j[47],j[48]!==u?(ge=i.jsx("div",{className:"mb-3",children:i.jsx(a,{type:"primary",onClick:()=>{c.show(d,{title:"新增收录",children:i.jsx(k,{refresh:u})})},children:"新增收录"})}),j[48]=u,j[49]=ge):ge=j[49],j[50]!==M?(ke={searchParams:M},j[50]=M,j[51]=ke):ke=j[51],j[52]!==ie||j[53]!==h||j[54]!==ke?(we=i.jsx(b,{columns:ie,getListUrl:p.getAwaitingApprovalWebsiteSourceList,dataKey:"data.list",tableKey:h,params:ke}),j[52]=ie,j[53]=h,j[54]=ke,j[55]=we):we=j[55],j[56]!==ye||j[57]!==ge||j[58]!==we?(_e=i.jsxs(w,{children:[ye,be,ge,we]}),j[56]=ye,j[57]=ge,j[58]=we,j[59]=_e):_e=j[59],_e}function L(e){return i.jsx(A,{color:e?"geekblue":"red",bordered:!1,icon:i.jsx(v,{}),children:e||"已注销"})}function T(e){return i.jsx(a,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function U(e,t){return e?i.jsxs("div",{className:"p-1 rounded-sm flex items-center gap-2 w-[110px]",style:{backgroundColor:t.backgroundColor,color:t.fontColor},children:[i.jsx("img",{src:j(e),className:"rounded-sm",style:{width:"32px",height:"32px"}}),i.jsx("p",{className:"text-xs font-semibold p-ellipsis w-12",children:t.title})]}):"-"}function R(e){return i.jsx(A,{color:"gold",icon:i.jsx(N,{}),children:e||"-"})}function z(e){return i.jsx(A,{color:0===e?"blue":1===e?"green":2===e?"default":"red",children:0===e?"待审核":1===e?"正常":2===e?"隐藏":"被驳回"})}function B(e){return{label:e.label,key:e.id}}function P(e){return{label:e.label,value:String(e.key)}}function W(e){return e&&0!==e.key}function E(e){return e.stateUtils.categoryList}const K=s.memo((t=>{const o=e.c(24),{record:l,refresh:n}=t;let m;o[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],o[0]=m):m=o[0];const[j,x]=s.useState(m),y=r(Q);let b;o[1]!==l||o[2]!==n||o[3]!==y?(b=function(){h(1,x),setTimeout((()=>{u({url:p.deleteWebsiteInfo,token:y,data:{id:l.id}}).then((e=>{200===e.code&&n()})).finally((()=>{f(1,x)}))}),500)},o[1]=l,o[2]=n,o[3]=y,o[4]=b):b=o[4];const w=b;let _,S,C,O,I,A,N,v;return o[5]===Symbol.for("react.memo_cache_sentinel")?(_={width:"44px"},o[5]=_):_=o[5],o[6]!==l||o[7]!==n?(S=()=>{c.show(d,{title:"编辑收录信息",children:i.jsx(k,{editItem:l,refresh:n,type:"edit"})})},o[6]=l,o[7]=n,o[8]=S):S=o[8],o[9]!==j[0]||o[10]!==S?(C=i.jsx(a,{type:"link",size:"small",disabled:j[0],style:_,onClick:S,children:"编辑"}),o[9]=j[0],o[10]=S,o[11]=C):C=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(O={width:"44px"},o[12]=O):O=o[12],o[13]!==j[1]?(I=j[1]?i.jsx(g,{}):"删除",o[13]=j[1],o[14]=I):I=o[14],o[15]!==j[1]||o[16]!==I?(A=i.jsx(a,{danger:!0,type:"link",size:"small",disabled:j[1],style:O,children:I}),o[15]=j[1],o[16]=I,o[17]=A):A=o[17],o[18]!==w||o[19]!==A?(N=i.jsx(F,{title:"是否确认删除该收录？",onConfirm:w,children:A}),o[18]=w,o[19]=A,o[20]=N):N=o[20],o[21]!==C||o[22]!==N?(v=i.jsxs("div",{className:"flex flex-wrap",children:[C,N]}),o[21]=C,o[22]=N,o[23]=v):v=o[23],v}));function Q(e){return e.user.token}export{M as default};
