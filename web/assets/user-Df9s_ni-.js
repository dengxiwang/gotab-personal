import{e,I as t,fc as o,x as r,j as n,B as i,af as a,ag as s,ah as l,aj as c,H as d,E as p,F as m,ac as u,fd as h,az as f,cv as g,cu as x,ab as v,an as y,w,a8 as j,aw as b,b4 as S,ar as C,c7 as _,ae as P,ai as z,d as R,ad as E,ao as A,au as D}from"./main-RpejCBsR.js";import{u as O,F as k}from"./index-NJy1tlp1.js";import{I as N}from"./index-DJ4Q4UDS.js";import{R as M}from"./UserOutlined-BSR-I-QH.js";import{R as T}from"./MailOutlined-DYvhoNUM.js";import{C as I,F as L,K as Z,L as F,S as W,U as $}from"./UserAddOutlined-BVIc3uVV.js";import{T as U}from"./index-mJdixdnj.js";import{R as q}from"./QuestionCircleOutlined-Bb3cuZKo.js";import{A as V,d as G,f as H,g as B,i as Y,D as X,j as K,k as J}from"./homePage-CkSv-o-4.js";import{P as Q}from"./main-Bz7X3OC0.js";import{T as ee}from"./index-9nj3fyzK.js";import{f as te,m as oe}from"./assets-CmvcfQKP.js";import{S as re}from"./ColorPicker-BRy5u_Zp.js";import{S as ne}from"./index-DEv9k294.js";import{m as ie,R as ae}from"./useFresh-CPnGAo4P.js";import{d as se}from"./spinLoading-DLwpgWQo.js";import"./row-BVZ81Qgs.js";import"./useBreakpoint-DfVTHTv0.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./getAllowClear-BYRQBlOI.js";import"./Input-B4rSyk4X.js";import"./TextArea-BWCilDY2.js";import"./Overflow-BCh9wkGD.js";import"./index-D5IqMKmB.js";import"./LeftOutlined-D9Sp279J.js";import"./fullSpin-BicYYbAL.js";import"./index-BOGE8Tfq.js";import"./myDrawer2-njVq_FoU.js";import"./handleButton-BTJK0wAL.js";import"./myModal-CAe1lod5.js";import"./submitForInclusion-BWk0c2Ha.js";import"./CloudUploadOutlined-CEPisIME.js";import"./index-CYaJ7OIr.js";import"./iconBase-BGft3ap3.js";import"./sortableJsUtils-yijaYdEW.js";import"./SearchOutlined-B2JWdp69.js";import"./LikeFilled-DXQ4OC7R.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-C2HgJXTw.js";import"./EditOutlined-jOoJX1ad.js";import"./styleChecker-65ImXUxL.js";import"./sortable.esm-A-yo8kyn.js";import"./addRecommendAppForm-DhU_hEuG.js";import"./markdownContent-BKuFvrhE.js";import"./index-HdtN0ZR6.js";function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},le.apply(this,arguments)}const ce=(o,r)=>e.createElement(t,le({},o,{ref:r,icon:I})),de=e.forwardRef(ce);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},pe.apply(this,arguments)}const me=(r,n)=>e.createElement(t,pe({},r,{ref:n,icon:o})),ue=e.forwardRef(me);function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},he.apply(this,arguments)}const fe=(o,r)=>e.createElement(t,he({},o,{ref:r,icon:L})),ge=e.forwardRef(fe);function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},xe.apply(this,arguments)}const ve=(o,r)=>e.createElement(t,xe({},o,{ref:r,icon:Z})),ye=e.forwardRef(ve);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},we.apply(this,arguments)}const je=(o,r)=>e.createElement(t,we({},o,{ref:r,icon:F})),be=e.forwardRef(je);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Se.apply(this,arguments)}const Ce=(o,r)=>e.createElement(t,Se({},o,{ref:r,icon:W})),_e=e.forwardRef(Ce);function Pe(){return Pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},Pe.apply(this,arguments)}const ze=(o,r)=>e.createElement(t,Pe({},o,{ref:r,icon:$})),Re=e.forwardRef(ze);function Ee(e,t){return t?/^\d{1,6}$/.test(t)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function Ae(e){return null==e?void 0:e.replace(/\D/g,"")}const De=e.memo((function(t){const o=r.c(38),{changeType:p}=t,[m]=O();let u;o[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],o[0]=u):u=o[0];const[h,f]=e.useState(u);let g;o[1]!==p?(g=function(e){a(2,f),s({url:l.findPassword,data:e}).then((e=>{200===(null==e?void 0:e.code)&&p("login")})).finally((()=>{c(2,f)}))},o[1]=p,o[2]=g):g=o[2];const x=g;let v;o[3]!==m?(v=function(){const e=m.getFieldValue("username");if(!e||""===e)return void d.error("请输入用户名");if(!/^[a-zA-Z]/.test(e))return void d.error("用户名必须以字母开头");if(!/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(e))return void d.error("用户名只能包含字母、数字、下划线或短横线");if(e.length<3||e.length>20)return void d.error("用户名长度必须在3到20位之间");const t=m.getFieldValue("email");t&&""!==t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?(a(1,f),s({url:l.findPasswordEmailCode,data:{email:t,username:e}}).finally((()=>{c(1,f)}))):d.error("请输入有效的邮箱地址"):d.error("请输入邮箱")},o[3]=m,o[4]=v):v=o[4];const y=v;let w,j,b,S,C,_,P,z,R,E,A,D,I,L,Z,F,W,$,V,G;return o[5]===Symbol.for("react.memo_cache_sentinel")?(w={flex:"80px"},o[5]=w):w=o[5],o[6]===Symbol.for("react.memo_cache_sentinel")?(j={maxWidth:360,margin:"auto"},o[6]=j):j=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(b=[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],o[7]=b):b=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(S=n.jsx(k.Item,{name:"username",required:!0,rules:b,children:n.jsx(N,{prefix:n.jsx(M,{}),placeholder:"用户名",allowClear:!0,maxLength:20})}),o[8]=S):S=o[8],o[9]===Symbol.for("react.memo_cache_sentinel")?(C=[{validator:(e,t)=>t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],o[9]=C):C=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(_=n.jsx(k.Item,{name:"email",required:!0,className:"flex-auto",rules:C,children:n.jsx(N,{placeholder:"邮箱",prefix:n.jsx(T,{}),allowClear:!0,maxLength:255})}),o[10]=_):_=o[10],o[11]!==y||o[12]!==h[1]?(P=n.jsxs("div",{className:"flex gap-3 items-end",children:[_,n.jsx(i,{onClick:y,loading:h[1],className:"mb-6",children:"获取验证码"})]}),o[11]=y,o[12]=h[1],o[13]=P):P=o[13],o[14]===Symbol.for("react.memo_cache_sentinel")?(z=[{validator:Ee}],o[14]=z):z=o[14],o[15]===Symbol.for("react.memo_cache_sentinel")?(R={width:"100%"},o[15]=R):R=o[15],o[16]===Symbol.for("react.memo_cache_sentinel")?(E=n.jsx(k.Item,{name:"emailCode",required:!0,normalize:Ae,rules:z,children:n.jsx(N,{autoComplete:"new-password",style:R,placeholder:"验证码",allowClear:!0,maxLength:6,prefix:n.jsx(ge,{})})}),o[16]=E):E=o[16],o[17]===Symbol.for("react.memo_cache_sentinel")?(A=[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],o[17]=A):A=o[17],o[18]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(k.Item,{name:"newPassword",required:!0,rules:A,children:n.jsx(N.Password,{autoComplete:"new-password",prefix:n.jsx(be,{}),placeholder:"新密码",allowClear:!0,maxLength:32})}),o[18]=D):D=o[18],o[19]!==m?(I=[{validator(e,t){if(""===t||!t)return Promise.reject(new Error("请再次输入密码"));return t!==m.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],o[19]=m,o[20]=I):I=o[20],o[21]===Symbol.for("react.memo_cache_sentinel")?(L=n.jsx(N.Password,{autoComplete:"new-password",prefix:n.jsx(be,{}),placeholder:"二次确认密码",allowClear:!0,maxLength:32}),o[21]=L):L=o[21],o[22]!==I?(Z=n.jsx(k.Item,{name:"confirmPassword",required:!0,rules:I,children:L}),o[22]=I,o[23]=Z):Z=o[23],o[24]!==h[2]?(F=n.jsx(i,{type:"primary",className:"w-full",htmlType:"submit",loading:h[2],children:"找回密码"}),o[24]=h[2],o[25]=F):F=o[25],o[26]===Symbol.for("react.memo_cache_sentinel")?(W=n.jsx(U,{className:" text-xs w-full m-0",icon:n.jsx(q,{}),children:"多次发送验证码会存在收信失败的问题，请隔天重试"}),o[26]=W):W=o[26],o[27]!==p?($=n.jsx(i,{type:"link",onClick:()=>{p("login")},children:"找到密码？返回登录"}),o[27]=p,o[28]=$):$=o[28],o[29]!==F||o[30]!==$?(V=n.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[F,W,$]}),o[29]=F,o[30]=$,o[31]=V):V=o[31],o[32]!==x||o[33]!==m||o[34]!==Z||o[35]!==V||o[36]!==P?(G=n.jsx(n.Fragment,{children:n.jsxs(k,{labelCol:w,form:m,name:"findPassword-form",autoComplete:"off",onFinish:x,style:j,children:[S,P,E,D,Z,V]})}),o[32]=x,o[33]=m,o[34]=Z,o[35]=V,o[36]=P,o[37]=G):G=o[37],G}));function Oe(e){return e.user.userInfo}const ke=e.memo((function(t){const o=r.c(26),{changeType:d}=t,v=p(),{pullDataCompareTimestampClear:y}=m();let w;o[0]===Symbol.for("react.memo_cache_sentinel")?(w=[],o[0]=w):w=o[0];const[j,b]=e.useState(w),S=u(Oe);let C;o[1]!==v||o[2]!==y||o[3]!==S?(C=function(e){a(0,b),delete e.dataOption,s({url:l.login,data:e}).then((e=>{200===e.code&&e.data&&(v(h(e.data.token)),f(e.data.userInfo,S)||(v(g(e.data.userInfo)),v(x(!1))),y(void 0,void 0,e.data.token))})).finally((()=>{c(0,b)}))},o[1]=v,o[2]=y,o[3]=S,o[4]=C):C=o[4];const _=C;let P,z,R,E,A,D,O,T,I,L,Z,F;return o[5]===Symbol.for("react.memo_cache_sentinel")?(P={flex:"80px"},z={maxWidth:360,margin:"auto"},o[5]=P,o[6]=z):(P=o[5],z=o[6]),o[7]===Symbol.for("react.memo_cache_sentinel")?(R=[{validator(e,t){if(""===t||!t)return Promise.reject(new Error("请输入用户名/邮箱"));return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头"))}}],o[7]=R):R=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(E=n.jsx(k.Item,{name:"username",required:!0,rules:R,children:n.jsx(N,{prefix:n.jsx(M,{}),placeholder:"用户名/邮箱",allowClear:!0})}),o[8]=E):E=o[8],o[9]===Symbol.for("react.memo_cache_sentinel")?(A=[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],o[9]=A):A=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(k.Item,{name:"password",required:!0,rules:A,children:n.jsx(N.Password,{prefix:n.jsx(be,{}),placeholder:"密码",maxLength:32,allowClear:!0})}),o[10]=D):D=o[10],o[11]!==j[0]?(O=n.jsx(i,{type:"primary",className:"w-full",htmlType:"submit",loading:j[0],children:"登录"}),o[11]=j[0],o[12]=O):O=o[12],o[13]!==d?(T=n.jsx(i,{type:"link",onClick:()=>{d("register")},className:"px-2",children:"没有账号？立即注册"}),o[13]=d,o[14]=T):T=o[14],o[15]!==d?(I=n.jsx(i,{type:"link",onClick:()=>{d("findPassword")},className:"px-2",children:"找回密码"}),o[15]=d,o[16]=I):I=o[16],o[17]!==I||o[18]!==T?(L=n.jsxs("div",{className:"flex flex-wrap gap-x-3 justify-between w-full",children:[T,I]}),o[17]=I,o[18]=T,o[19]=L):L=o[19],o[20]!==L||o[21]!==O?(Z=n.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[O,L]}),o[20]=L,o[21]=O,o[22]=Z):Z=o[22],o[23]!==_||o[24]!==Z?(F=n.jsx(n.Fragment,{children:n.jsxs(k,{onFinish:_,autoComplete:"off",name:"login-form",labelCol:P,style:z,children:[E,D,Z]})}),o[23]=_,o[24]=Z,o[25]=F):F=o[25],F}));function Ne(e,t){return t?/^\d{1,6}$/.test(t)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function Me(e){return null==e?void 0:e.replace(/\D/g,"")}const Te=e.memo((function(t){const o=r.c(32),{changeType:p}=t,[m]=O();let u;o[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],o[0]=u):u=o[0];const[h,f]=e.useState(u);let g;o[1]!==p?(g=function(e){a(1,f),s({url:l.register,data:e}).then((e=>{200===(null==e?void 0:e.code)&&p("login")})).finally((()=>{c(1,f)}))},o[1]=p,o[2]=g):g=o[2];const x=g;let v;o[3]!==m?(v=function(){const e=m.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(a(0,f),s({url:l.emailCode,data:{email:e}}).finally((()=>{c(0,f)}))):d.error("请输入有效的邮箱地址"):d.error("请输入邮箱")},o[3]=m,o[4]=v):v=o[4];const y=v;let w,j,b,S,C,_,P,z,R,E,A,D,I,L,Z,F,W;return o[5]===Symbol.for("react.memo_cache_sentinel")?(w={flex:"80px"},o[5]=w):w=o[5],o[6]===Symbol.for("react.memo_cache_sentinel")?(j={maxWidth:360,margin:"auto"},o[6]=j):j=o[6],o[7]===Symbol.for("react.memo_cache_sentinel")?(b=[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],o[7]=b):b=o[7],o[8]===Symbol.for("react.memo_cache_sentinel")?(S=n.jsx(k.Item,{name:"username",required:!0,rules:b,children:n.jsx(N,{prefix:n.jsx(M,{}),placeholder:"用户名",allowClear:!0,maxLength:20})}),o[8]=S):S=o[8],o[9]===Symbol.for("react.memo_cache_sentinel")?(C=[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],o[9]=C):C=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(_=n.jsx(k.Item,{name:"password",required:!0,rules:C,children:n.jsx(N.Password,{autoComplete:"new-password",prefix:n.jsx(be,{}),placeholder:"密码",allowClear:!0,maxLength:32})}),o[10]=_):_=o[10],o[11]===Symbol.for("react.memo_cache_sentinel")?(P=[{validator(e,t){if(!t)return Promise.reject(new Error("请输入邮箱"));return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址"))}}],o[11]=P):P=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(z=n.jsx(k.Item,{name:"email",required:!0,className:"flex-auto",rules:P,children:n.jsx(N,{placeholder:"邮箱",prefix:n.jsx(T,{}),allowClear:!0})}),o[12]=z):z=o[12],o[13]!==y||o[14]!==h[0]?(R=n.jsxs("div",{className:"flex gap-3 items-end",children:[z,n.jsx(i,{onClick:y,loading:h[0],className:"mb-6",children:"获取验证码"})]}),o[13]=y,o[14]=h[0],o[15]=R):R=o[15],o[16]===Symbol.for("react.memo_cache_sentinel")?(E=[{validator:Ne}],o[16]=E):E=o[16],o[17]===Symbol.for("react.memo_cache_sentinel")?(A={width:"100%"},o[17]=A):A=o[17],o[18]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(k.Item,{name:"emailCode",required:!0,normalize:Me,rules:E,children:n.jsx(N,{autoComplete:"new-password",style:A,placeholder:"验证码",allowClear:!0,maxLength:6,prefix:n.jsx(ge,{})})}),o[18]=D):D=o[18],o[19]!==h[1]?(I=n.jsx(i,{type:"primary",className:"w-full",htmlType:"submit",loading:h[1],children:"注册"}),o[19]=h[1],o[20]=I):I=o[20],o[21]===Symbol.for("react.memo_cache_sentinel")?(L=n.jsx(U,{className:" text-xs w-full m-0",icon:n.jsx(q,{}),children:"多次发送验证码会存在收信失败的问题，请隔天重试"}),o[21]=L):L=o[21],o[22]!==p?(Z=n.jsx(i,{type:"link",onClick:()=>{p("login")},children:"已有账号？返回登录"}),o[22]=p,o[23]=Z):Z=o[23],o[24]!==I||o[25]!==Z?(F=n.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[I,L,Z]}),o[24]=I,o[25]=Z,o[26]=F):F=o[26],o[27]!==m||o[28]!==x||o[29]!==R||o[30]!==F?(W=n.jsx(n.Fragment,{children:n.jsxs(k,{labelCol:w,form:m,name:"register-form",autoComplete:"off",onFinish:x,style:j,children:[S,_,R,D,F]})}),o[27]=m,o[28]=x,o[29]=R,o[30]=F,o[31]=W):W=o[31],W}));const Ie=e.memo((function(){const t=r.c(14),[o,i]=e.useState("login"),{token:a}=v.useToken();let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=function(e){i(e)},t[0]=s):s=t[0];const l=s;let c,d;t[1]!==o?(c=n.jsx("div",{className:"flex flex-col items-center m-3 gap-3",children:n.jsx(V,{size:64,icon:"findPassword"===o?n.jsx(ye,{}):"register"===o?n.jsx(Re,{}):n.jsx(M,{})})}),t[1]=o,t[2]=c):c=t[2],t[3]!==a.colorPrimary?(d={color:a.colorPrimary},t[3]=a.colorPrimary,t[4]=d):d=t[4];const p="login"===o?"登录享有更多服务":"register"===o?"欢迎您的注册体验":"遗失密码？即刻找回";let m,u,h;return t[5]!==d||t[6]!==p?(m=n.jsx("p",{className:"font-medium text-lg mb-6 text-center",style:d,children:p}),t[5]=d,t[6]=p,t[7]=m):m=t[7],t[8]!==o?(u="login"===o?n.jsx(ke,{changeType:l}):"register"===o?n.jsx(Te,{changeType:l}):n.jsx(De,{changeType:l}),t[8]=o,t[9]=u):u=t[9],t[10]!==c||t[11]!==m||t[12]!==u?(h=n.jsxs(n.Fragment,{children:[c,m,u]}),t[10]=c,t[11]=m,t[12]=u,t[13]=h):h=t[13],h}));function Le(e){return e.user.token}const Ze=e.memo((function(){const t=r.c(21),{getDefaultData:o}=m();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[0]=d):d=t[0];const[p,h]=e.useState(d),f=u(Le);let g;t[1]!==f?(g=function(){a(0,h),s({url:l.setDefaultData,token:f,data:{data:y()}}).finally((()=>{c(0,h)}))},t[1]=f,t[2]=g):g=t[2];const x=g;let v,j,b,S,C,_,P,z,R;return t[3]===Symbol.for("react.memo_cache_sentinel")?(v=n.jsx(w,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),t[3]=v):v=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(j=n.jsx(_e,{}),t[4]=j):j=t[4],t[5]!==p[0]?(b=n.jsx(i,{type:"primary",icon:j,loading:p[0],children:"保存默认配置"}),t[5]=p[0],t[6]=b):b=t[6],t[7]!==x||t[8]!==b?(S=n.jsx(Q,{title:"是否确认保存？",onConfirm:x,children:b}),t[7]=x,t[8]=b,t[9]=S):S=t[9],t[10]!==o?(C=()=>{o(1,h)},t[10]=o,t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(_=n.jsx(ue,{}),t[12]=_):_=t[12],t[13]!==p[1]?(P=n.jsx(i,{loading:p[1],icon:_,children:"获取默认配置"}),t[13]=p[1],t[14]=P):P=t[14],t[15]!==C||t[16]!==P?(z=n.jsx(Q,{title:"是否确认获取？",onConfirm:C,children:P}),t[15]=C,t[16]=P,t[17]=z):z=t[17],t[18]!==S||t[19]!==z?(R=n.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[v,S,z]}),t[18]=S,t[19]=z,t[20]=R):R=t[20],R}));function Fe(){j.hide(b)}function We(){window.open(S,"_blank")}function $e(e){return e.user.userInfo}function Ue(e){return e.user.token}const qe=e.memo((function(){const t=r.c(17),o=p(),[a,c]=e.useState(!1),d=u(Ue),m=u($e);let h;t[0]!==o||t[1]!==d?(h=function(e){c(!0),s({url:l.submitAppellation,token:d,data:e}).then((e=>{200===e.code&&e.data&&(o(g(e.data)),j.hide(b))})).finally((()=>{c(!1)}))},t[0]=o,t[1]=d,t[2]=h):h=t[2];const f=h;let x,v,y,S,C,_,P;return t[3]===Symbol.for("react.memo_cache_sentinel")?(x=n.jsx(w,{message:n.jsxs("p",{children:["称号是用户的一个额外信息，通过即可开启 VIP 标识，需要云服务器的可以看一下我的推广：",n.jsx(i,{type:"link",size:"small",className:"text-xs p-0 font-medium",onClick:We,children:"雨云服务器 - 高性价比云服务器"}),"，欢迎注册/采购，感谢支持🙏"]}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),t[3]=x):x=t[3],t[4]!==m?(v=[{validator:(e,t)=>t&&""!==t?t.length>8?Promise.reject("称号名称不能超过8个字符"):t===m.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],t[4]=m,t[5]=v):v=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(y=n.jsx(N,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),t[6]=y):y=t[6],t[7]!==v?(S=n.jsx(k.Item,{label:"称号名称",required:!0,rules:v,name:"appellation",children:y}),t[7]=v,t[8]=S):S=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(C=n.jsx(i,{onClick:Fe,children:"取消"}),t[9]=C):C=t[9],t[10]!==a?(_=n.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[C,n.jsx(i,{type:"primary",htmlType:"submit",loading:a,children:"提交申请"})]}),t[10]=a,t[11]=_):_=t[11],t[12]!==f||t[13]!==S||t[14]!==_||t[15]!==m?(P=n.jsxs(n.Fragment,{children:[x,n.jsxs(k,{initialValues:m,onFinish:f,children:[S,_]})]}),t[12]=f,t[13]=S,t[14]=_,t[15]=m,t[16]=P):P=t[16],P}));var Ve=function(e,t){return(Ve=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)};var Ge,He,Be,Ye,Xe,Ke,Je,Qe,et,tt,ot=function(){return ot=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},ot.apply(this,arguments)};function rt(e,t,o,r){return new(o||(o=Promise))((function(n,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r.throw(e))}catch(t){i(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function nt(){if(Ke)return Xe;Ke=1;var e,t=function(){if(Ye)return Be;Ye=1;var e=!("undefined"==typeof window||!window.document||!window.document.createElement),t={canUseDOM:e,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:e&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:e&&!!window.screen,isInWorker:!e};return Be=t}();return t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""))
/**
   * Checks if an event is supported in the current execution environment.
   *
   * NOTE: This will not work correctly for non-generic events such as `change`,
   * `reset`, `load`, `error`, and `select`.
   *
   * Borrows from Modernizr.
   *
   * @param {string} eventNameSuffix Event name, e.g. "click".
   * @param {?boolean} capture Check if the capture phase is supported.
   * @return {boolean} True if the event is supported.
   * @internal
   * @license Modernizr 3.0.0pre (Custom Build) | MIT
   */,Xe=function(o,r){if(!t.canUseDOM||r&&!("addEventListener"in document))return!1;var n="on"+o,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&e&&"wheel"===o&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}}function it(){if(Qe)return Je;Qe=1;var e=function(){if(He)return Ge;He=1;var e,t,o,r,n,i,a,s,l,c,d,p,m,u,h,f=!1;function g(){if(!f){f=!0;var g=navigator.userAgent,x=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(g),v=/(Mac OS X)|(Windows)|(Linux)/.exec(g);if(p=/\b(iPhone|iP[ao]d)/.exec(g),m=/\b(iP[ao]d)/.exec(g),c=/Android/i.exec(g),u=/FBAN\/\w+;/i.exec(g),h=/Mobile/i.exec(g),d=!!/Win64/.exec(g),x){(e=x[1]?parseFloat(x[1]):x[5]?parseFloat(x[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(g);i=y?parseFloat(y[1])+4:e,t=x[2]?parseFloat(x[2]):NaN,o=x[3]?parseFloat(x[3]):NaN,(r=x[4]?parseFloat(x[4]):NaN)?(x=/(?:Chrome\/(\d+\.\d+))/.exec(g),n=x&&x[1]?parseFloat(x[1]):NaN):n=NaN}else e=t=o=n=r=NaN;if(v){if(v[1]){var w=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(g);a=!w||parseFloat(w[1].replace("_","."))}else a=!1;s=!!v[2],l=!!v[3]}else a=s=l=!1}}var x={ie:function(){return g()||e},ieCompatibilityMode:function(){return g()||i>e},ie64:function(){return x.ie()&&d},firefox:function(){return g()||t},opera:function(){return g()||o},webkit:function(){return g()||r},safari:function(){return x.webkit()},chrome:function(){return g()||n},windows:function(){return g()||s},osx:function(){return g()||a},linux:function(){return g()||l},iphone:function(){return g()||p},mobile:function(){return g()||p||m||c||h},nativeApp:function(){return g()||u},android:function(){return g()||c},ipad:function(){return g()||m}};return Ge=x}(),t=nt();function o(e){var t=0,o=0,r=0,n=0;return"detail"in e&&(o=e.detail),"wheelDelta"in e&&(o=-e.wheelDelta/120),"wheelDeltaY"in e&&(o=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=o,o=0),r=10*t,n=10*o,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(r=e.deltaX),(r||n)&&e.deltaMode&&(1==e.deltaMode?(r*=40,n*=40):(r*=800,n*=800)),r&&!t&&(t=r<1?-1:1),n&&!o&&(o=n<1?-1:1),{spinX:t,spinY:o,pixelX:r,pixelY:n}}return o.getEventType=function(){return e.firefox()?"DOMMouseScroll":t("wheel")?"wheel":"mousewheel"},Je=o}"function"==typeof SuppressedError&&SuppressedError;const at=C(tt?et:(tt=1,et=it()));function st(e,t,o,r,n){void 0===n&&(n=0);var i=ht(t.width,t.height,n),a=i.width,s=i.height;return{x:lt(e.x,a,o.width,r),y:lt(e.y,s,o.height,r)}}function lt(e,t,o,r){var n=t*r/2-o/2;return ft(e,-n,n)}function ct(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function dt(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function pt(e,t){return Math.min(e,Math.max(0,t))}function mt(e,t){return t}function ut(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function ht(e,t,o){var r=o*Math.PI/180;return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function ft(e,t,o){return Math.min(Math.max(e,t),o)}function gt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.filter((function(e){return"string"==typeof e&&e.length>0})).join(" ").trim()}var xt=function(t){function o(){var r=null!==t&&t.apply(this,arguments)||this;return r.cropperRef=e.createRef(),r.imageRef=e.createRef(),r.videoRef=e.createRef(),r.containerPosition={x:0,y:0},r.containerRef=null,r.styleRef=null,r.containerRect=null,r.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},r.dragStartPosition={x:0,y:0},r.dragStartCrop={x:0,y:0},r.gestureZoomStart=0,r.gestureRotationStart=0,r.isTouching=!1,r.lastPinchDistance=0,r.lastPinchRotation=0,r.rafDragTimeout=null,r.rafPinchTimeout=null,r.wheelTimer=null,r.currentDoc="undefined"!=typeof document?document:null,r.currentWindow="undefined"!=typeof window?window:null,r.resizeObserver=null,r.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},r.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&r.containerRef){var e=!0;r.resizeObserver=new window.ResizeObserver((function(t){e?e=!1:r.computeSizes()})),r.resizeObserver.observe(r.containerRef)}},r.preventZoomSafari=function(e){return e.preventDefault()},r.cleanEvents=function(){r.currentDoc&&(r.currentDoc.removeEventListener("mousemove",r.onMouseMove),r.currentDoc.removeEventListener("mouseup",r.onDragStopped),r.currentDoc.removeEventListener("touchmove",r.onTouchMove),r.currentDoc.removeEventListener("touchend",r.onDragStopped),r.currentDoc.removeEventListener("gesturemove",r.onGestureMove),r.currentDoc.removeEventListener("gestureend",r.onGestureEnd),r.currentDoc.removeEventListener("scroll",r.onScroll))},r.clearScrollEvent=function(){r.containerRef&&r.containerRef.removeEventListener("wheel",r.onWheel),r.wheelTimer&&clearTimeout(r.wheelTimer)},r.onMediaLoad=function(){var e=r.computeSizes();e&&(r.emitCropData(),r.setInitialCrop(e)),r.props.onMediaLoaded&&r.props.onMediaLoaded(r.mediaSize)},r.setInitialCrop=function(e){if(r.props.initialCroppedAreaPercentages){var t=function(e,t,o,r,n,i){var a=ht(t.width,t.height,o),s=ft(r.width/a.width*(100/e.width),n,i);return{crop:{x:s*a.width/2-r.width/2-a.width*s*(e.x/100),y:s*a.height/2-r.height/2-a.height*s*(e.y/100)},zoom:s}}(r.props.initialCroppedAreaPercentages,r.mediaSize,r.props.rotation,e,r.props.minZoom,r.props.maxZoom),o=t.crop,n=t.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(n)}else if(r.props.initialCroppedAreaPixels){var i=function(e,t,o,r,n,i){void 0===o&&(o=0);var a=ht(t.naturalWidth,t.naturalHeight,o),s=ft(function(e,t,o){var r=function(e){return e.width>e.height?e.width/e.naturalWidth:e.height/e.naturalHeight}(t);return o.height>o.width?o.height/(e.height*r):o.width/(e.width*r)}(e,t,r),n,i),l=r.height>r.width?r.height/e.height:r.width/e.width;return{crop:{x:((a.width-e.width)/2-e.x)*l,y:((a.height-e.height)/2-e.y)*l},zoom:s}}(r.props.initialCroppedAreaPixels,r.mediaSize,r.props.rotation,e,r.props.minZoom,r.props.maxZoom);o=i.crop,n=i.zoom;r.props.onCropChange(o),r.props.onZoomChange&&r.props.onZoomChange(n)}},r.computeSizes=function(){var e,t,o,n,i,a,s=r.imageRef.current||r.videoRef.current;if(s&&r.containerRef){r.containerRect=r.containerRef.getBoundingClientRect(),r.saveContainerPosition();var l=r.containerRect.width/r.containerRect.height,c=(null===(e=r.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=r.videoRef.current)||void 0===t?void 0:t.videoWidth)||0,d=(null===(o=r.imageRef.current)||void 0===o?void 0:o.naturalHeight)||(null===(n=r.videoRef.current)||void 0===n?void 0:n.videoHeight)||0,p=c/d,m=void 0;if(s.offsetWidth<c||s.offsetHeight<d)switch(r.state.mediaObjectFit){default:case"contain":m=l>p?{width:r.containerRect.height*p,height:r.containerRect.height}:{width:r.containerRect.width,height:r.containerRect.width/p};break;case"horizontal-cover":m={width:r.containerRect.width,height:r.containerRect.width/p};break;case"vertical-cover":m={width:r.containerRect.height*p,height:r.containerRect.height}}else m={width:s.offsetWidth,height:s.offsetHeight};r.mediaSize=ot(ot({},m),{naturalWidth:c,naturalHeight:d}),r.props.setMediaSize&&r.props.setMediaSize(r.mediaSize);var u=r.props.cropSize?r.props.cropSize:function(e,t,o,r,n,i){void 0===i&&(i=0);var a=ht(e,t,i),s=a.width,l=a.height,c=Math.min(s,o),d=Math.min(l,r);return c>d*n?{width:d*n,height:d}:{width:c,height:c/n}}(r.mediaSize.width,r.mediaSize.height,r.containerRect.width,r.containerRect.height,r.props.aspect,r.props.rotation);return(null===(i=r.state.cropSize)||void 0===i?void 0:i.height)===u.height&&(null===(a=r.state.cropSize)||void 0===a?void 0:a.width)===u.width||r.props.onCropSizeChange&&r.props.onCropSizeChange(u),r.setState({cropSize:u},r.recomputeCropPosition),r.props.setCropSize&&r.props.setCropSize(u),u}},r.saveContainerPosition=function(){if(r.containerRef){var e=r.containerRef.getBoundingClientRect();r.containerPosition={x:e.left,y:e.top}}},r.onMouseDown=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("mousemove",r.onMouseMove),r.currentDoc.addEventListener("mouseup",r.onDragStopped),r.saveContainerPosition(),r.onDragStart(o.getMousePoint(e)))},r.onMouseMove=function(e){return r.onDrag(o.getMousePoint(e))},r.onScroll=function(e){r.currentDoc&&(e.preventDefault(),r.saveContainerPosition())},r.onTouchStart=function(e){r.currentDoc&&(r.isTouching=!0,r.props.onTouchRequest&&!r.props.onTouchRequest(e)||(r.currentDoc.addEventListener("touchmove",r.onTouchMove,{passive:!1}),r.currentDoc.addEventListener("touchend",r.onDragStopped),r.saveContainerPosition(),2===e.touches.length?r.onPinchStart(e):1===e.touches.length&&r.onDragStart(o.getTouchPoint(e.touches[0]))))},r.onTouchMove=function(e){e.preventDefault(),2===e.touches.length?r.onPinchMove(e):1===e.touches.length&&r.onDrag(o.getTouchPoint(e.touches[0]))},r.onGestureStart=function(e){r.currentDoc&&(e.preventDefault(),r.currentDoc.addEventListener("gesturechange",r.onGestureMove),r.currentDoc.addEventListener("gestureend",r.onGestureEnd),r.gestureZoomStart=r.props.zoom,r.gestureRotationStart=r.props.rotation)},r.onGestureMove=function(e){if(e.preventDefault(),!r.isTouching){var t=o.getMousePoint(e),n=r.gestureZoomStart-1+e.scale;if(r.setNewZoom(n,t,{shouldUpdatePosition:!0}),r.props.onRotationChange){var i=r.gestureRotationStart+e.rotation;r.props.onRotationChange(i)}}},r.onGestureEnd=function(e){r.cleanEvents()},r.onDragStart=function(e){var t,o,n=e.x,i=e.y;r.dragStartPosition={x:n,y:i},r.dragStartCrop=ot({},r.props.crop),null===(o=(t=r.props).onInteractionStart)||void 0===o||o.call(t)},r.onDrag=function(e){var t=e.x,o=e.y;r.currentWindow&&(r.rafDragTimeout&&r.currentWindow.cancelAnimationFrame(r.rafDragTimeout),r.rafDragTimeout=r.currentWindow.requestAnimationFrame((function(){if(r.state.cropSize&&void 0!==t&&void 0!==o){var e=t-r.dragStartPosition.x,n=o-r.dragStartPosition.y,i={x:r.dragStartCrop.x+e,y:r.dragStartCrop.y+n},a=r.props.restrictPosition?st(i,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):i;r.props.onCropChange(a)}})))},r.onDragStopped=function(){var e,t;r.isTouching=!1,r.cleanEvents(),r.emitCropData(),null===(t=(e=r.props).onInteractionEnd)||void 0===t||t.call(e)},r.onWheel=function(e){if(r.currentWindow&&(!r.props.onWheelRequest||r.props.onWheelRequest(e))){e.preventDefault();var t=o.getMousePoint(e),n=at(e).pixelY,i=r.props.zoom-n*r.props.zoomSpeed/200;r.setNewZoom(i,t,{shouldUpdatePosition:!0}),r.state.hasWheelJustStarted||r.setState({hasWheelJustStarted:!0},(function(){var e,t;return null===(t=(e=r.props).onInteractionStart)||void 0===t?void 0:t.call(e)})),r.wheelTimer&&clearTimeout(r.wheelTimer),r.wheelTimer=r.currentWindow.setTimeout((function(){return r.setState({hasWheelJustStarted:!1},(function(){var e,t;return null===(t=(e=r.props).onInteractionEnd)||void 0===t?void 0:t.call(e)}))}),250)}},r.getPointOnContainer=function(e,t){var o=e.x,n=e.y;if(!r.containerRect)throw new Error("The Cropper is not mounted");return{x:r.containerRect.width/2-(o-t.x),y:r.containerRect.height/2-(n-t.y)}},r.getPointOnMedia=function(e){var t=e.x,o=e.y,n=r.props,i=n.crop,a=n.zoom;return{x:(t+i.x)/a,y:(o+i.y)/a}},r.setNewZoom=function(e,t,o){var n=(void 0===o?{}:o).shouldUpdatePosition,i=void 0===n||n;if(r.state.cropSize&&r.props.onZoomChange){var a=ft(e,r.props.minZoom,r.props.maxZoom);if(i){var s=r.getPointOnContainer(t,r.containerPosition),l=r.getPointOnMedia(s),c={x:l.x*a-s.x,y:l.y*a-s.y},d=r.props.restrictPosition?st(c,r.mediaSize,r.state.cropSize,a,r.props.rotation):c;r.props.onCropChange(d)}r.props.onZoomChange(a)}},r.getCropData=function(){return r.state.cropSize?function(e,t,o,r,n,i,a){void 0===i&&(i=0),void 0===a&&(a=!0);var s=a?pt:mt,l=ht(t.width,t.height,i),c=ht(t.naturalWidth,t.naturalHeight,i),d={x:s(100,((l.width-o.width/n)/2-e.x/n)/l.width*100),y:s(100,((l.height-o.height/n)/2-e.y/n)/l.height*100),width:s(100,o.width/l.width*100/n),height:s(100,o.height/l.height*100/n)},p=Math.round(s(c.width,d.width*c.width/100)),m=Math.round(s(c.height,d.height*c.height/100)),u=c.width>=c.height*r?{width:Math.round(m*r),height:m}:{width:p,height:Math.round(p/r)};return{croppedAreaPercentages:d,croppedAreaPixels:ot(ot({},u),{x:Math.round(s(c.width-u.width,d.x*c.width/100)),y:Math.round(s(c.height-u.height,d.y*c.height/100))})}}(r.props.restrictPosition?st(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop,r.mediaSize,r.state.cropSize,r.getAspect(),r.props.zoom,r.props.rotation,r.props.restrictPosition):null},r.emitCropData=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropComplete&&r.props.onCropComplete(t,o),r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.emitCropAreaChange=function(){var e=r.getCropData();if(e){var t=e.croppedAreaPercentages,o=e.croppedAreaPixels;r.props.onCropAreaChange&&r.props.onCropAreaChange(t,o)}},r.recomputeCropPosition=function(){if(r.state.cropSize){var e=r.props.restrictPosition?st(r.props.crop,r.mediaSize,r.state.cropSize,r.props.zoom,r.props.rotation):r.props.crop;r.props.onCropChange(e),r.emitCropData()}},r.onKeyDown=function(e){var t,o,n=r.props,i=n.crop,a=n.onCropChange,s=n.keyboardStep,l=n.zoom,c=n.rotation,d=s;if(r.state.cropSize){e.shiftKey&&(d*=.2);var p=ot({},i);switch(e.key){case"ArrowUp":p.y-=d,e.preventDefault();break;case"ArrowDown":p.y+=d,e.preventDefault();break;case"ArrowLeft":p.x-=d,e.preventDefault();break;case"ArrowRight":p.x+=d,e.preventDefault();break;default:return}r.props.restrictPosition&&(p=st(p,r.mediaSize,r.state.cropSize,l,c)),e.repeat||null===(o=(t=r.props).onInteractionStart)||void 0===o||o.call(t),a(p)}},r.onKeyUp=function(e){var t,o;switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":e.preventDefault();break;default:return}r.emitCropData(),null===(o=(t=r.props).onInteractionEnd)||void 0===o||o.call(t)},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}Ve(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}(o,t),o.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},o.prototype.componentWillUnmount=function(){var e,t;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null===(t=this.styleRef.parentNode)||void 0===t||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},o.prototype.componentDidUpdate=function(e){var t,o,r,n,i,a,s,l,c;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect||e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(o=this.props.cropSize)||void 0===o?void 0:o.height)||(null===(r=e.cropSize)||void 0===r?void 0:r.width)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.width)?this.computeSizes():(null===(i=e.crop)||void 0===i?void 0:i.x)===(null===(a=this.props.crop)||void 0===a?void 0:a.x)&&(null===(s=e.crop)||void 0===s?void 0:s.y)===(null===(l=this.props.crop)||void 0===l?void 0:l.y)||this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&(null===(c=this.videoRef.current)||void 0===c||c.load());var d=this.getObjectFit();d!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:d},this.computeSizes)},o.prototype.getAspect=function(){var e=this.props,t=e.cropSize,o=e.aspect;return t?t.width/t.height:o},o.prototype.getObjectFit=function(){var e,t,o,r;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var n=this.containerRect.width/this.containerRect.height;return((null===(e=this.imageRef.current)||void 0===e?void 0:e.naturalWidth)||(null===(t=this.videoRef.current)||void 0===t?void 0:t.videoWidth)||0)/((null===(o=this.imageRef.current)||void 0===o?void 0:o.naturalHeight)||(null===(r=this.videoRef.current)||void 0===r?void 0:r.videoHeight)||0)<n?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},o.prototype.onPinchStart=function(e){var t=o.getTouchPoint(e.touches[0]),r=o.getTouchPoint(e.touches[1]);this.lastPinchDistance=ct(t,r),this.lastPinchRotation=dt(t,r),this.onDragStart(ut(t,r))},o.prototype.onPinchMove=function(e){var t=this;if(this.currentDoc&&this.currentWindow){var r=o.getTouchPoint(e.touches[0]),n=o.getTouchPoint(e.touches[1]),i=ut(r,n);this.onDrag(i),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame((function(){var e=ct(r,n),o=t.props.zoom*(e/t.lastPinchDistance);t.setNewZoom(o,i,{shouldUpdatePosition:!1}),t.lastPinchDistance=e;var a=dt(r,n),s=t.props.rotation+(a-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(s),t.lastPinchRotation=a}))}},o.prototype.render=function(){var t,o=this,r=this.props,n=r.image,i=r.video,a=r.mediaProps,s=r.cropperProps,l=r.transform,c=r.crop,d=c.x,p=c.y,m=r.rotation,u=r.zoom,h=r.cropShape,f=r.showGrid,g=r.style,x=g.containerStyle,v=g.cropAreaStyle,y=g.mediaStyle,w=r.classes,j=w.containerClassName,b=w.cropAreaClassName,S=w.mediaClassName,C=null!==(t=this.state.mediaObjectFit)&&void 0!==t?t:this.getObjectFit();return e.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(e){return o.containerRef=e},"data-testid":"container",style:x,className:gt("reactEasyCrop_Container",j)},n?e.createElement("img",ot({alt:"",className:gt("reactEasyCrop_Image","contain"===C&&"reactEasyCrop_Contain","horizontal-cover"===C&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===C&&"reactEasyCrop_Cover_Vertical",S)},a,{src:n,ref:this.imageRef,style:ot(ot({},y),{transform:l||"translate(".concat(d,"px, ").concat(p,"px) rotate(").concat(m,"deg) scale(").concat(u,")")}),onLoad:this.onMediaLoad})):i&&e.createElement("video",ot({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:gt("reactEasyCrop_Video","contain"===C&&"reactEasyCrop_Contain","horizontal-cover"===C&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===C&&"reactEasyCrop_Cover_Vertical",S)},a,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:ot(ot({},y),{transform:l||"translate(".concat(d,"px, ").concat(p,"px) rotate(").concat(m,"deg) scale(").concat(u,")")}),controls:!1}),(Array.isArray(i)?i:[{src:i}]).map((function(t){return e.createElement("source",ot({key:t.src},t))}))),this.state.cropSize&&e.createElement("div",ot({ref:this.cropperRef,style:ot(ot({},v),{width:this.state.cropSize.width,height:this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:gt("reactEasyCrop_CropArea","round"===h&&"reactEasyCrop_CropAreaRound",f&&"reactEasyCrop_CropAreaGrid",b)},s)))},o.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},o.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},o}(e.Component);const vt="img-crop",yt=.1,wt=.01,jt=e.forwardRef(((t,o)=>{const{cropperRef:r,zoomSlider:a,rotationSlider:s,aspectSlider:l,showReset:c,resetBtnText:d,modalImage:p,aspect:m,minZoom:u,maxZoom:h,minAspect:f,maxAspect:g,cropShape:x,showGrid:v,cropperProps:y}=t,[w,j]=e.useState(1),[b,S]=e.useState(0),[C,_]=e.useState(m),P=e.useRef(m);P.current!==m&&(P.current=m,_(m));const z=1!==w||0!==b||C!==m,R=()=>{j(1),S(0),_(m)},[E,A]=e.useState({x:0,y:0}),D=e.useRef({width:0,height:0,x:0,y:0}),O=e.useCallback(((e,t)=>{D.current=t}),[]);e.useImperativeHandle(o,(()=>({rotation:b,cropPixelsRef:D,onReset:R})));const k="[display:flex] [align-items:center] [width:60%] [margin-inline:auto]",N="[display:flex] [align-items:center] [justify-content:center] [height:32px] [width:32px] [background:transparent] [border:0] [font-family:inherit] [font-size:18px] [cursor:pointer] disabled:[opacity:20%] disabled:[cursor:default]",M="[flex:1]";return n.jsxs(n.Fragment,{children:[n.jsx(xt,Object.assign({},y,{ref:r,image:p,crop:E,zoom:w,rotation:b,aspect:C,minZoom:u,maxZoom:h,zoomWithScroll:a,cropShape:x,showGrid:v,onCropChange:A,onZoomChange:j,onRotationChange:S,onCropComplete:O,classes:{containerClassName:`${vt}-container ![position:relative] [width:100%] [height:40vh] [&~section:first-of-type]:[margin-top:16px] [&~section:last-of-type]:[margin-bottom:16px]`,mediaClassName:`${vt}-media`}})),a&&n.jsxs("section",{className:`${vt}-control ${vt}-control-zoom ${k}`,children:[n.jsx("button",{className:N,onClick:()=>j(+(w-yt).toFixed(1)),disabled:w-yt<u,children:"－"}),n.jsx(re,{className:M,min:u,max:h,step:yt,value:w,onChange:j}),n.jsx("button",{className:N,onClick:()=>j(+(w+yt).toFixed(1)),disabled:w+yt>h,children:"＋"})]}),s&&n.jsxs("section",{className:`${vt}-control ${vt}-control-rotation ${k}`,children:[n.jsx("button",{className:`${N} [font-size:16px]`,onClick:()=>S(b-1),disabled:-180===b,children:"↺"}),n.jsx(re,{className:M,min:-180,max:180,step:1,value:b,onChange:S}),n.jsx("button",{className:`${N} [font-size:16px]`,onClick:()=>S(b+1),disabled:180===b,children:"↻"})]}),l&&n.jsxs("section",{className:`${vt}-control ${vt}-control-aspect ${k}`,children:[n.jsx("button",{className:N,onClick:()=>_(+(C-wt).toFixed(2)),disabled:C-wt<f,children:"↕"}),n.jsx(re,{className:M,min:f,max:g,step:wt,value:C,onChange:_}),n.jsx("button",{className:N,onClick:()=>_(+(C+wt).toFixed(2)),disabled:C+wt>g,children:"↔"})]}),c&&(a||s||l)&&n.jsx(i,{className:"[position:absolute] [bottom:20px]",style:z?{}:{opacity:.3,pointerEvents:"none"},onClick:R,children:d})]})}));var bt=e.memo(jt);!function(e,t){void 0===t&&(t={});var o=t.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===o&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}("/*! tailwindcss v4.1.4 | MIT License | https://tailwindcss.com */.visible{visibility:visible}.\\!\\[position\\:relative\\]{position:relative!important}.\\[position\\:absolute\\]{position:absolute}.\\[bottom\\:20px\\]{bottom:20px}.container{width:100%}.\\[margin-inline\\:auto\\]{margin-inline:auto}.\\[display\\:flex\\]{display:flex}.grid{display:grid}.\\[height\\:32px\\]{height:32px}.\\[height\\:40vh\\]{height:40vh}.\\[width\\:32px\\]{width:32px}.\\[width\\:60\\%\\]{width:60%}.\\[width\\:100\\%\\]{width:100%}.\\[flex\\:1\\]{flex:1}.\\[cursor\\:pointer\\]{cursor:pointer}.\\[align-items\\:center\\]{align-items:center}.\\[justify-content\\:center\\]{justify-content:center}.\\[font-family\\:inherit\\]{font-family:inherit}.\\[font-size\\:16px\\]{font-size:16px}.\\[font-size\\:18px\\]{font-size:18px}.\\[background\\:transparent\\]{background:transparent}.\\[border\\:0\\]{border:0}.disabled\\:\\[cursor\\:default\\]{&:disabled{cursor:default}}.disabled\\:\\[opacity\\:20\\%\\]{&:disabled{opacity:20%}}.\\[\\&\\~section\\:first-of-type\\]\\:\\[margin-top\\:16px\\]{&~section:first-of-type{margin-top:16px}}.\\[\\&\\~section\\:last-of-type\\]\\:\\[margin-bottom\\:16px\\]{&~section:last-of-type{margin-bottom:16px}}",{insertAt:"top"});const St=e.forwardRef(((t,o)=>{const{quality:r=.4,fillColor:i="white",zoomSlider:a=!0,rotationSlider:s=!1,aspectSlider:l=!1,showReset:c=!1,resetText:d,aspect:p=1,minZoom:m=1,maxZoom:u=3,minAspect:h=.5,maxAspect:f=2,cropShape:g="rect",showGrid:x=!1,cropperProps:v,modalClassName:y,modalTitle:w,modalWidth:j,modalOk:b,modalCancel:S,onModalOk:C,onModalCancel:z,modalProps:R,beforeCrop:E,children:A}=t,D=e.useRef({});D.current.onModalOk=C,D.current.onModalCancel=z,D.current.beforeCrop=E;const O=e.useRef(null),k=e.useCallback((e=>{var t;const o=document.createElement("canvas"),r=o.getContext("2d"),n=((null===(t=null==e?void 0:e.getRootNode)||void 0===t?void 0:t.call(e))||document).querySelector(`.${vt}-media`),{width:a,height:l,x:c,y:d}=O.current.cropPixelsRef.current;if(s&&0!==O.current.rotation){const{naturalWidth:e,naturalHeight:t}=n,s=O.current.rotation*(Math.PI/180),p=Math.abs(Math.sin(s)),m=Math.abs(Math.cos(s)),u=e*m+t*p,h=t*m+e*p;o.width=u,o.height=h,r.fillStyle=i,r.fillRect(0,0,u,h);const f=u/2,g=h/2;r.translate(f,g),r.rotate(s),r.translate(-f,-g);const x=(u-e)/2,v=(h-t)/2;r.drawImage(n,0,0,e,t,x,v,e,t);const y=r.getImageData(0,0,u,h);o.width=a,o.height=l,r.putImageData(y,-c,-d)}else o.width=a,o.height=l,r.fillStyle=i,r.fillRect(0,0,a,l),r.drawImage(n,c,d,a,l,0,0,a,l);return o}),[i,s]),[N,M]=e.useState(""),T=e.useRef(void 0),I=e.useRef(void 0),L=e.useCallback((e=>rt(void 0,[e],void 0,(function*({beforeUpload:e,file:t,resolve:o,reject:r}){const n=t;if("function"==typeof e)try{const r=yield e(t,[t]);o(!1!==r&&(!0!==r&&r||n))}catch(i){r(i)}else o(n)}))),[]),Z=e.useCallback((e=>(t,o)=>new Promise(((n,i)=>rt(void 0,void 0,void 0,(function*(){let a=t;if("function"==typeof D.current.beforeCrop)try{const r=yield D.current.beforeCrop(t,o);if(!1===r)return L({beforeUpload:e,file:t,resolve:n,reject:i});!0!==r&&(a=r||t)}catch(l){return L({beforeUpload:e,file:t,resolve:n,reject:i})}const s=new FileReader;s.addEventListener("load",(()=>{"string"==typeof s.result&&M(s.result)})),s.readAsDataURL(a),T.current=()=>{var e,t;M(""),O.current.onReset();let o=!1;null===(t=(e=D.current).onModalCancel)||void 0===t||t.call(e,(e=>{n(e),o=!0})),o||n(P.LIST_IGNORE)},I.current=t=>rt(void 0,void 0,void 0,(function*(){M(""),O.current.onReset();const o=k(t.target),{type:s,name:l,uid:c}=a;o.toBlob((t=>rt(void 0,void 0,void 0,(function*(){const o=new File([t],l,{type:s});Object.assign(o,{uid:c}),L({beforeUpload:e,file:o,resolve:e=>{var t,o;n(e),null===(o=(t=D.current).onModalOk)||void 0===o||o.call(t,e)},reject:e=>{var t,o;i(e),null===(o=(t=D.current).onModalOk)||void 0===o||o.call(t,e)}})}))),s,r)}))}))))),[k,r,L]),F=e.useCallback((e=>{const t=Array.isArray(e)?e[0]:e,o=t.props,{beforeUpload:r,accept:n}=o,i=function(e,t){var o={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(o[r[n]]=e[r[n]])}return o}(o,["beforeUpload","accept"]);return Object.assign(Object.assign({},t),{props:Object.assign(Object.assign({},i),{accept:n||"image/*",beforeUpload:Z(r)})})}),[Z]),W=e.useMemo((()=>{const e={};return void 0!==j&&(e.width=j),void 0!==b&&(e.okText=b),void 0!==S&&(e.cancelText=S),e}),[S,b,j]),$=`${vt}-modal${y?` ${y}`:""}`,U="zh-CN"===("undefined"==typeof window?"":window.navigator.language),q=w||(U?"编辑图片":"Edit image"),V=d||(U?"重置":"Reset");return n.jsxs(n.Fragment,{children:[F(A),N&&n.jsx(_,Object.assign({},R,W,{open:!0,title:q,onCancel:T.current,onOk:I.current,wrapClassName:$,maskClosable:!1,destroyOnClose:!0,children:n.jsx(bt,{ref:O,cropperRef:o,zoomSlider:a,rotationSlider:s,aspectSlider:l,showReset:c,resetBtnText:V,modalImage:N,aspect:p,minZoom:m,maxZoom:u,minAspect:h,maxAspect:f,cropShape:g,showGrid:x,cropperProps:v})}))]})}));function Ct(){j.hide(b)}function _t(e){return e.size>512e3&&(d.error("头像大小不能超过500KB！"),!1)}function Pt(){j.hide(b)}function zt(e,t){const o=new FileReader;o.addEventListener("load",(()=>t(o.result))),o.readAsDataURL(e)}function Rt(){j.hide(b)}function Et(e){return e.user.userInfo}function At(e){return e.user.token}const Dt=e.memo((function(){const t=r.c(27),o=p(),m=u(At),h=u(Et);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[x,v]=e.useState(f),[y,w]=e.useState(),[j,b]=e.useState();let S;t[1]!==o||t[2]!==m?(S=function(){a(0,v),s({url:l.resetAvatar,token:m}).then((e=>{200===e.code&&e.data&&(o(g(e.data)),setTimeout(Rt,0))})).finally((()=>{c(0,v)}))},t[1]=o,t[2]=m,t[3]=S):S=t[3];const C=S,_=zt;let R;t[4]===Symbol.for("react.memo_cache_sentinel")?(R=e=>{_(e.fileList[0].originFileObj,(t=>{w(t),b(e.fileList[0].originFileObj)}))},t[4]=R):R=t[4];const E=R;let A;t[5]!==o||t[6]!==j||t[7]!==m||t[8]!==h?(A=function(){j?(a(1,v),s({url:l.uploadAvatar,data:z({file:j}),token:m}).then((e=>{if(200===e.code&&e.data){const t={...h,avatar:e.data.avatar_url};o(g(t)),setTimeout(Pt,0)}})).finally((()=>{c(1,v)}))):d.error("请先选择一个图片")},t[5]=o,t[6]=j,t[7]=m,t[8]=h,t[9]=A):A=t[9];const D=A;let O,k,N,M,T,I,L;return t[10]!==y?(O=n.jsx(St,{quality:.1,rotationSlider:!0,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:n.jsx(P,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:_t,onChange:E,children:y?n.jsx("img",{src:y,alt:"avatar",style:{width:"100%"}}):n.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[n.jsx(G,{}),n.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),t[10]=y,t[11]=O):O=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(k=n.jsx(i,{onClick:Ct,children:"取消"}),t[12]=k):k=t[12],t[13]!==x[0]||t[14]!==C?(N=n.jsx(i,{loading:x[0],onClick:C,children:"恢复默认"}),t[13]=x[0],t[14]=C,t[15]=N):N=t[15],t[16]!==D?(M=()=>{D()},t[16]=D,t[17]=M):M=t[17],t[18]!==x[1]||t[19]!==M?(T=n.jsx(i,{type:"primary",onClick:M,loading:x[1],children:"保存头像"}),t[18]=x[1],t[19]=M,t[20]=T):T=t[20],t[21]!==N||t[22]!==T?(I=n.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[k,N,T]}),t[21]=N,t[22]=T,t[23]=I):I=t[23],t[24]!==O||t[25]!==I?(L=n.jsxs(n.Fragment,{children:[O,I]}),t[24]=O,t[25]=I,t[26]=L):L=t[26],L}));function Ot(){j.hide(b)}function kt(e,t){if(!t)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(t)?t.length<6||t.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function Nt(e){200===e.code&&j.hide(b)}function Mt(e){return e.user.token}const Tt=e.memo((function(){const t=r.c(19),[o]=O();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[0]=d):d=t[0];const[p,m]=e.useState(d),h=u(Mt);let f;t[1]!==h?(f=function(e){a(0,m),s({url:l.changePassword,data:e,token:h}).then(Nt).finally((()=>{c(0,m)}))},t[1]=h,t[2]=f):f=t[2];const g=f,x=kt;let v,y,w,j,b,S,C,_,P;return t[3]===Symbol.for("react.memo_cache_sentinel")?(v={flex:"80px"},t[3]=v):v=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(y=n.jsx(k.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:x}],children:n.jsx(N.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),t[4]=y):y=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(w=n.jsx(k.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:x}],children:n.jsx(N.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),t[5]=w):w=t[5],t[6]!==o?(j=[{validator(e,t){if(""===t||!t)return Promise.reject(new Error("请再次输入密码"));return t!==o.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],t[6]=o,t[7]=j):j=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(b=n.jsx(N.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),t[8]=b):b=t[8],t[9]!==j?(S=n.jsx(k.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:j,children:b}),t[9]=j,t[10]=S):S=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(C=n.jsx(i,{onClick:Ot,children:"取消"}),t[11]=C):C=t[11],t[12]!==p[0]?(_=n.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[C,n.jsx(i,{type:"primary",htmlType:"submit",loading:p[0],children:"确定"})]}),t[12]=p[0],t[13]=_):_=t[13],t[14]!==g||t[15]!==o||t[16]!==S||t[17]!==_?(P=n.jsx(n.Fragment,{children:n.jsxs(k,{form:o,autoComplete:"off",name:"edit-user-form",onFinish:g,labelCol:v,children:[y,w,S,_]})}),t[14]=g,t[15]=o,t[16]=S,t[17]=_,t[18]=P):P=t[18],P}));function It(){j.hide(b)}function Lt(e,t){return t&&t.length>20&&t.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function Zt(e){return e.user.userInfo}function Ft(e){return e.user.token}const Wt=e.memo((function(t){const o=r.c(23),{initialValues:d}=t,m=p();let h;o[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],o[0]=h):h=o[0];const[x,v]=e.useState(h),y=u(Ft),w=u(Zt);let S;o[1]!==m||o[2]!==y||o[3]!==w?(S=function(e){a(0,v),""!==e.birthday&&e.birthday||delete e.birthday,s({url:l.editUserInfo,data:e,token:y}).then((e=>{200===e.code&&e.data&&(f(e.data,w)||m(g(e.data)),j.hide(b))})).finally((()=>{c(0,v)}))},o[1]=m,o[2]=y,o[3]=w,o[4]=S):S=o[4];const C=S;let _,P,z,E,A,D,O,M,T,I,L;return o[5]!==d.birthday?(_=d.birthday&&R(d.birthday,"YYYY-MM-DD"),o[5]=d.birthday,o[6]=_):_=o[6],o[7]!==d||o[8]!==_?(P={...d,birthday:_},o[7]=d,o[8]=_,o[9]=P):P=o[9],o[10]===Symbol.for("react.memo_cache_sentinel")?(z={flex:"72px"},o[10]=z):z=o[10],o[11]===Symbol.for("react.memo_cache_sentinel")?(E=n.jsx(k.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,t)=>""!==t&&t?/^[a-zA-Z]/.test(t)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(t)?t.length<3||t.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:n.jsx(N,{placeholder:"用户名",allowClear:!0,maxLength:20})}),o[11]=E):E=o[11],o[12]===Symbol.for("react.memo_cache_sentinel")?(A=n.jsx(k.Item,{name:"nickname",label:"昵称",rules:[{validator:Lt}],children:n.jsx(N,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),o[12]=A):A=o[12],o[13]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(k.Item,{name:"sex",label:"性别",required:!0,children:n.jsx(ne,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),o[13]=D):D=o[13],o[14]===Symbol.for("react.memo_cache_sentinel")?(O=n.jsx(k.Item,{name:"phone",label:"手机号",rules:[{validator(e,t){if(""===t||!t)return Promise.resolve();return/^1[3-9]\d{9}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:n.jsx(N,{placeholder:"手机号",maxLength:11,allowClear:!0})}),o[14]=O):O=o[14],o[15]===Symbol.for("react.memo_cache_sentinel")?(M=n.jsx(k.Item,{name:"birthday",label:"生日",children:n.jsx(H,{placeholder:"生日",allowClear:!0})}),o[15]=M):M=o[15],o[16]===Symbol.for("react.memo_cache_sentinel")?(T=n.jsx(i,{onClick:It,children:"取消"}),o[16]=T):T=o[16],o[17]!==x[0]?(I=n.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[T,n.jsx(i,{type:"primary",htmlType:"submit",loading:x[0],children:"确定"})]}),o[17]=x[0],o[18]=I):I=o[18],o[19]!==C||o[20]!==I||o[21]!==P?(L=n.jsx(n.Fragment,{children:n.jsxs(k,{autoComplete:"off",initialValues:P,name:"edit-user-form",onFinish:C,labelCol:z,children:[E,A,D,O,M,I]})}),o[19]=C,o[20]=I,o[21]=P,o[22]=L):L=o[22],L}));function $t(){j.hide(b)}function Ut(e,t){return t?/^\d{1,6}$/.test(t)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function qt(e){return null==e?void 0:e.replace(/\D/g,"")}function Vt(e){return e.user.userInfo}function Gt(e){return e.user.token}const Ht=e.memo((function(){const t=r.c(22),o=p(),[m]=O();let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[0]=h):h=t[0];const[x,v]=e.useState(h),y=u(Gt),w=u(Vt);let S;t[1]!==m?(S=function(){const e=m.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(a(0,v),s({url:l.emailCode,data:{email:e}}).finally((()=>{c(0,v)}))):d.error("请输入有效的邮箱地址"):d.error("请输入邮箱")},t[1]=m,t[2]=S):S=t[2];const C=S;let _;t[3]!==o||t[4]!==y||t[5]!==w?(_=function(e){a(1,v),s({url:l.bindEmail,data:e,token:y}).then((e=>{200===e.code&&e.data&&(f(e.data,w)||o(g(e.data)),j.hide(b))})).finally((()=>{c(1,v)}))},t[3]=o,t[4]=y,t[5]=w,t[6]=_):_=t[6];const P=_;let z,R,E,A,D,M,T,I;return t[7]===Symbol.for("react.memo_cache_sentinel")?(z={flex:"72px"},t[7]=z):z=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(R=n.jsx(k.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,t)=>t?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:n.jsx(N,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),t[8]=R):R=t[8],t[9]!==C||t[10]!==x[0]?(E=n.jsxs("div",{className:"flex gap-3 items-end",children:[R,n.jsx(i,{onClick:C,loading:x[0],className:"mb-6",children:"获取验证码"})]}),t[9]=C,t[10]=x[0],t[11]=E):E=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(A=[{validator:Ut}],t[12]=A):A=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(D=n.jsx(k.Item,{name:"emailCode",required:!0,label:"验证码",normalize:qt,rules:A,children:n.jsx(N,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),t[13]=D):D=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(M=n.jsx(i,{onClick:$t,children:"取消"}),t[14]=M):M=t[14],t[15]!==x[1]?(T=n.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[M,n.jsx(i,{type:"primary",htmlType:"submit",loading:x[1],children:"确定"})]}),t[15]=x[1],t[16]=T):T=t[16],t[17]!==P||t[18]!==m||t[19]!==E||t[20]!==T?(I=n.jsx(n.Fragment,{children:n.jsxs(k,{form:m,onFinish:P,name:"user-email-form",labelCol:z,autoComplete:"off",children:[E,D,T]})}),t[17]=P,t[18]=m,t[19]=E,t[20]=T,t[21]=I):I=t[21],I}));function Bt(){j.show(b,{title:"修改密码",children:n.jsx(Tt,{}),onClosedUseTabListen:!1})}function Yt(){j.show(b,{title:"头像设置",children:n.jsx(Dt,{}),onClosedUseTabListen:!1})}function Xt(e){return e.user.token}function Kt(e){return e.user.userInfo}const Jt=e.memo((function(){var t,o;const a=r.c(89),s=p(),{pullData:c,pushData:f}=m(),v=u(Kt),y=u(Xt);let w;a[0]===Symbol.for("react.memo_cache_sentinel")?(w=[],a[0]=w):w=a[0];const[S,C]=e.useState(w);let _,P,z,R,O,k,N,M;a[1]!==v.avatar||a[2]!==v.sex?(_=(null==v?void 0:v.avatar)?E(v.avatar):1===(null==v?void 0:v.sex)?te:oe,a[1]=v.avatar,a[2]=v.sex,a[3]=_):_=a[3],a[4]!==_?(P=n.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:Yt,children:n.jsx(V,{size:72,src:_})}),a[4]=_,a[5]=P):P=a[5],a[6]!==v.appellation||a[7]!==v.appellationStatus?(z=v.appellation&&1===v.appellationStatus?n.jsx(B,{}):n.jsx(ie,{}),a[6]=v.appellation,a[7]=v.appellationStatus,a[8]=z):z=a[8],a[9]!==v.appellation||a[10]!==v.appellationStatus||a[11]!==v.userType?(R=v.appellation&&1===v.appellationStatus?"volcano":null==(t=Y.find((e=>e.userType===v.userType)))?void 0:t.color,a[9]=v.appellation,a[10]=v.appellationStatus,a[11]=v.userType,a[12]=R):R=a[12],a[13]!==v.appellation||a[14]!==v.appellationStatus||a[15]!==v.userType?(O=v.appellation&&1===v.appellationStatus?v.appellation:null==(o=Y.find((e=>e.userType===v.userType)))?void 0:o.text,a[13]=v.appellation,a[14]=v.appellationStatus,a[15]=v.userType,a[16]=O):O=a[16],a[17]!==z||a[18]!==R||a[19]!==O?(k=n.jsx(U,{icon:z,className:"m-0 flex items-center gap-1",color:R,children:O}),a[17]=z,a[18]=R,a[19]=O,a[20]=k):k=a[20],a[21]!==P||a[22]!==k?(N=n.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[P,k]}),a[21]=P,a[22]=k,a[23]=N):N=a[23],a[24]===Symbol.for("react.memo_cache_sentinel")?(M={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},a[24]=M):M=a[24];const I=v.username||"-";let L;a[25]!==I?(L={label:"用户名",children:I},a[25]=I,a[26]=L):L=a[26];const Z=v.nickname||"-";let F;a[27]!==Z?(F={label:"昵称",children:Z},a[27]=Z,a[28]=F):F=a[28];const W=1===v.sex?"女":"男";let $;a[29]!==W?($={label:"性别",children:W},a[29]=W,a[30]=$):$=a[30];const q=v.email||"-";let G;a[31]!==q?(G={label:"邮箱",children:q},a[31]=q,a[32]=G):G=a[32];const H=v.phone||"-";let Q;a[33]!==H?(Q={label:"手机号",children:H},a[33]=H,a[34]=Q):Q=a[34];const re=v.birthday||"-";let ne;a[35]!==re?(ne={label:"生日",children:re},a[35]=re,a[36]=ne):ne=a[36];const le=v.registerTime||"-";let ce,pe,me,ue,he,fe,ge,xe,ve,we;a[37]!==le?(ce={label:"注册时间",children:le},a[37]=le,a[38]=ce):ce=a[38],a[39]!==f?(pe=()=>{"1"===localStorage.getItem("focusPulling")?d.warning("数据自动同步中，请稍后再试"):f(0,C)},a[39]=f,a[40]=pe):pe=a[40],a[41]!==S[0]||a[42]!==pe?(me=n.jsx(i,{type:"link",size:"small",onClick:pe,loading:S[0],children:"上传"}),a[41]=S[0],a[42]=pe,a[43]=me):me=a[43],a[44]===Symbol.for("react.memo_cache_sentinel")?(ue=n.jsx(A,{type:"vertical"}),a[44]=ue):ue=a[44],a[45]!==c?(he=()=>{"1"===localStorage.getItem("focusPulling")?d.warning("数据自动同步中，请稍后再试"):c(1,C,void 0,!0)},a[45]=c,a[46]=he):he=a[46],a[47]!==S[1]||a[48]!==he?(fe=n.jsx(i,{type:"link",size:"small",onClick:he,loading:S[1],children:"拉取"}),a[47]=S[1],a[48]=he,a[49]=fe):fe=a[49],a[50]!==me||a[51]!==fe?(ge={label:"数据管理",children:n.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[me,ue,fe]})},a[50]=me,a[51]=fe,a[52]=ge):ge=a[52],a[53]!==L||a[54]!==F||a[55]!==$||a[56]!==G||a[57]!==Q||a[58]!==ne||a[59]!==ce||a[60]!==ge?(xe=n.jsx(X,{bordered:!0,column:1,className:"w-full mt-6",styles:M,items:[L,F,$,G,Q,ne,ce,ge]}),a[53]=L,a[54]=F,a[55]=$,a[56]=G,a[57]=Q,a[58]=ne,a[59]=ce,a[60]=ge,a[61]=xe):xe=a[61],a[62]===Symbol.for("react.memo_cache_sentinel")?(ve=n.jsx(ee,{}),a[62]=ve):ve=a[62],a[63]!==v.appellation||a[64]!==v.appellationStatus?(we=()=>{j.show(b,{title:n.jsxs("div",{className:"flex items-center gap-2",children:[v.appellation&&1===v.appellationStatus?"变更称号":"申请称号",n.jsxs(U,{color:0===v.appellationStatus?"":1===v.appellationStatus?"green":"red",icon:0===v.appellationStatus?n.jsx(ae,{}):1===v.appellationStatus?n.jsx(K,{}):n.jsx(de,{}),children:["称号状态：",0===v.appellationStatus?v.appellation?"申请中":"待申请":1===v.appellationStatus?"已荣获":"被拒绝"]})]}),children:n.jsx(qe,{}),onClosedUseTabListen:!1})},a[63]=v.appellation,a[64]=v.appellationStatus,a[65]=we):we=a[65];const je=0===v.appellationStatus?v.appellation?"称号管理":"申请称号":1===v.appellationStatus?"变更称号":"重新申请";let be,Se,Ce,_e,Pe,ze,Re,Ee,Ae,De;return a[66]!==we||a[67]!==je?(be=n.jsx(i,{icon:ve,onClick:we,children:je}),a[66]=we,a[67]=je,a[68]=be):be=a[68],a[69]===Symbol.for("react.memo_cache_sentinel")?(Se=n.jsx(se,{}),a[69]=Se):Se=a[69],a[70]!==v?(Ce=n.jsx(i,{icon:Se,onClick:()=>{j.show(b,{title:"更新资料",children:n.jsx(Wt,{initialValues:v}),onClosedUseTabListen:!1})},children:"更新资料"}),a[70]=v,a[71]=Ce):Ce=a[71],a[72]===Symbol.for("react.memo_cache_sentinel")?(_e=n.jsx(i,{icon:n.jsx(ye,{}),onClick:Bt,children:"修改密码"}),a[72]=_e):_e=a[72],a[73]===Symbol.for("react.memo_cache_sentinel")?(Pe=n.jsx(T,{}),a[73]=Pe):Pe=a[73],a[74]!==v.email?(ze=n.jsx(i,{icon:Pe,onClick:()=>{j.show(b,{title:`绑定邮箱（原邮箱：${v.email||"无"}）`,children:n.jsx(Ht,{}),onClosedUseTabListen:!1})},children:"绑定邮箱"}),a[74]=v.email,a[75]=ze):ze=a[75],a[76]===Symbol.for("react.memo_cache_sentinel")?(Re=n.jsx(J,{}),a[76]=Re):Re=a[76],a[77]!==s||a[78]!==y?(Ee=n.jsx(i,{icon:Re,danger:!0,onClick:()=>{s(h("")),s(g({})),s(x(!1)),D({url:l.logout,token:y}),d.success("退出成功")},children:"退出登录"}),a[77]=s,a[78]=y,a[79]=Ee):Ee=a[79],a[80]!==be||a[81]!==Ce||a[82]!==ze||a[83]!==Ee?(Ae=n.jsxs("div",{className:"flex flex-col my-6 gap-3",children:[be,Ce,_e,ze,Ee]}),a[80]=be,a[81]=Ce,a[82]=ze,a[83]=Ee,a[84]=Ae):Ae=a[84],a[85]!==xe||a[86]!==Ae||a[87]!==N?(De=n.jsxs(n.Fragment,{children:[N,xe,Ae]}),a[85]=xe,a[86]=Ae,a[87]=N,a[88]=De):De=a[88],De}));function Qt(){const t=r.c(11),o=p(),i=u(oo),a=u(to),s=u(eo);let c;t[0]!==o||t[1]!==i||t[2]!==a?(c=function(){D({url:l.getUserInfo,token:i}).then((e=>{200===e.code&&e.data&&(f(e.data,a)||o(g(e.data)))}))},t[0]=o,t[1]=i,t[2]=a,t[3]=c):c=t[3];const d=c;let m,h,x;return t[4]!==d||t[5]!==i?(m=()=>{i&&d()},t[4]=d,t[5]=i,t[6]=m):m=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(h=[],t[7]=h):h=t[7],e.useEffect(m,h),t[8]!==s||t[9]!==i?(x=n.jsx("div",{className:"p-6",children:i?s?n.jsx(Ze,{}):n.jsx(Jt,{}):n.jsx(Ie,{})}),t[8]=s,t[9]=i,t[10]=x):x=t[10],x}function eo(e){return e.user.isSettingDefaultData}function to(e){return e.user.userInfo}function oo(e){return e.user.token}export{Qt as default};
