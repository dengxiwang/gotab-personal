import{r as e,I as o,c as r,h as a,j as l,bY as t,B as s,U as n,m as c,dm as i,l as m,n as d,o as x,$ as h,a0 as f,v as p,q as u,t as j,k as g}from"./requestIdleCallbackPolyfill-BBqTMjVZ.js";import{u as b,F as y}from"./index-DwKjDcSq.js";import{I as v}from"./index-BW_7iWnl.js";import{C as _}from"./ColorPicker-DWC7yG55.js";import{T as C}from"./index-Cww0EXSo.js";import{R as w}from"./CloudUploadOutlined-8PkMiyQI.js";import{T as S}from"./index-CBxFLZp0.js";var P={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},k={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V160a16 16 0 0116-16zm-52 68H212v200h200zm493.33 87.69a16 16 0 010 22.62L724.31 503.33a16 16 0 01-22.62 0L520.67 322.31a16 16 0 010-22.62l181.02-181.02a16 16 0 0122.62 0zm-84.85 11.3L713 203.53 605.52 311 713 418.48zM464 544a16 16 0 0116 16v304a16 16 0 01-16 16H160a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H212v200h200zm452-68a16 16 0 0116 16v304a16 16 0 01-16 16H560a16 16 0 01-16-16V560a16 16 0 0116-16zm-52 68H612v200h200z"}}]},name:"product",theme:"outlined"};function I(){return I=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},I.apply(this,arguments)}const z=(r,a)=>e.createElement(o,I({},r,{ref:a,icon:P})),N=e.forwardRef(z);function H(){return H=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},H.apply(this,arguments)}const L=(r,a)=>e.createElement(o,H({},r,{ref:a,icon:k})),T=e.forwardRef(L),{TextArea:B}=v;function O(){h.hide(f)}function R(e){return e.toHexString()}function V(e){return e.toHexString()}function q(e){return e.toHexString()}function A(e){return e.toHexString()}function F(e){return e.user.token}const U=e.memo(function(o){const j=r.c(53),{editItem:g,type:S,refresh:P}=o,k=void 0===S?"add":S,[I]=b(),z=a(F);let N;j[0]===Symbol.for("react.memo_cache_sentinel")?(N=[],j[0]=N):N=j[0];const[H,L]=e.useState(N),[T,U]=e.useState(g);let E;j[1]!==g||j[2]!==P||j[3]!==z||j[4]!==k?(E=function(e){if(!z)return void c.error("请您先完成登录/注册");const o=i(e);m(1,L),d({url:"add"===k?x.submitRecommendApp:x.editRecommendApp,token:z,data:"add"===k?o:{...o,recommendAppId:g.id}}).then(e=>{200===e.code&&(h.hide(f),P&&P())}).finally(()=>{p(1,L)})},j[1]=g,j[2]=P,j[3]=z,j[4]=k,j[5]=E):E=j[5];const Y=E;let K,W,$,D,G,J,Q,X,Z;j[6]!==T?(K=l.jsx(M,{showItem:T}),j[6]=T,j[7]=K):K=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(W={flex:"82px"},j[8]=W):W=j[8],j[9]!==I?($=()=>{U(I.getFieldsValue())},j[9]=I,j[10]=$):$=j[10],j[11]===Symbol.for("react.memo_cache_sentinel")?(D=l.jsx(y.Item,{label:"在线链接",name:"link",required:!0,rules:[{validator:(e,o)=>o&&""!==o?t(o)?o.length>200?Promise.reject("在线链接不能超过200个字符"):Promise.resolve():Promise.reject("请输入正确的在线链接"):Promise.reject("请输入在线链接")}],children:l.jsx(v,{placeholder:"在线链接",allowClear:!0,maxLength:200})}),j[11]=D):D=j[11],j[12]===Symbol.for("react.memo_cache_sentinel")?(G=[{validator:(e,o)=>o&&""!==o?o.length>50?Promise.reject("标题/名称不能超过50个字符"):Promise.resolve():Promise.reject("请输入标题/名称")}],j[12]=G):G=j[12],j[13]===Symbol.for("react.memo_cache_sentinel")?(J=l.jsx(y.Item,{label:"标题名称",required:!0,rules:G,name:"title",children:l.jsx(v,{placeholder:"标题名称",allowClear:!0,maxLength:50,showCount:!0})}),j[13]=J):J=j[13],j[14]===Symbol.for("react.memo_cache_sentinel")?(Q=[{validator:(e,o)=>o&&""!==o?o.length>200?Promise.reject("推荐描述不能超过200个字符"):Promise.resolve():Promise.reject("请输入推荐描述")}],j[14]=Q):Q=j[14],j[15]===Symbol.for("react.memo_cache_sentinel")?(X=l.jsx(y.Item,{label:"推荐描述",required:!0,rules:Q,name:"description",children:l.jsx(B,{placeholder:"推荐描述",autoSize:{minRows:2,maxRows:2},maxLength:200,showCount:!0,allowClear:!0})}),j[15]=X):X=j[15],j[16]===Symbol.for("react.memo_cache_sentinel")?(Z=[{validator:(e,o)=>o&&""!==o?o.length>200?Promise.reject("图标地址不能超过200个字符"):Promise.resolve():Promise.reject("请输入或上传图标地址")}],j[16]=Z):Z=j[16];const ee=!z;let oe,re,ae,le,te,se,ne,ce,ie,me,de,xe;j[17]!==I||j[18]!==T||j[19]!==z?(oe=e=>e.size>204800?(c.error("图标大小不能超过200KB！"),!1):(m(0,L),d({url:x.uploadIcon,token:z,data:u({file:e})}).then(e=>{200===e.code&&e.data&&(I.setFieldValue("icon",e.data.icon_url),I.validateFields({dirty:!0}),U({...T,icon:e.data.icon_url}))}).finally(()=>{p(0,L)}),!1),j[17]=I,j[18]=T,j[19]=z,j[20]=oe):oe=j[20],j[21]!==z?(re=()=>{z||c.error("请您先完成登录/注册")},j[21]=z,j[22]=re):re=j[22],j[23]===Symbol.for("react.memo_cache_sentinel")?(ae=l.jsx(w,{}),j[23]=ae):ae=j[23],j[24]!==H[0]||j[25]!==re?(le=l.jsx(s,{onClick:re,loading:H[0],type:"text",className:"rounded-none",children:"上传",icon:ae}),j[24]=H[0],j[25]=re,j[26]=le):le=j[26],j[27]!==ee||j[28]!==oe||j[29]!==le?(te=l.jsx(y.Item,{label:"图标地址",name:"icon",required:!0,rules:Z,children:l.jsx(v,{placeholder:"图标地址",allowClear:!0,maxLength:200,addonAfter:l.jsx(n,{disabled:ee,accept:".png, .jpg, .jpeg, .svg, .webp, .ico",showUploadList:!1,beforeUpload:oe,children:le})})}),j[27]=ee,j[28]=oe,j[29]=le,j[30]=te):te=j[30],j[31]===Symbol.for("react.memo_cache_sentinel")?(se=l.jsx(y.Item,{label:"标签名称",name:"tagText",rules:[{validator:(e,o)=>o&&o.length>200?Promise.reject("标签名称不能超过5个字符"):Promise.resolve()}],children:l.jsx(v,{placeholder:"标签名称",allowClear:!0,maxLength:5})}),j[31]=se):se=j[31],j[32]===Symbol.for("react.memo_cache_sentinel")?(ne=l.jsxs("div",{className:"flex *:flex-1",children:[se,l.jsx(y.Item,{label:"标签颜色",name:"tagColor",normalize:A,children:l.jsx(_,{allowClear:!0})})]}),j[32]=ne):ne=j[32],j[33]===Symbol.for("react.memo_cache_sentinel")?(ce=l.jsx(y.Item,{label:"字体颜色",name:"fontColor",normalize:q,children:l.jsx(_,{allowClear:!0})}),j[33]=ce):ce=j[33],j[34]===Symbol.for("react.memo_cache_sentinel")?(ie=l.jsx(y.Item,{label:"背景颜色",name:"background",normalize:V,children:l.jsx(_,{allowClear:!0})}),j[34]=ie):ie=j[34],j[35]===Symbol.for("react.memo_cache_sentinel")?(me=l.jsxs("div",{className:"flex *:flex-1",children:[ce,ie,l.jsx(y.Item,{label:"图标背景",name:"iconBackground",normalize:R,children:l.jsx(_,{allowClear:!0})})]}),j[35]=me):me=j[35],j[36]!==g?(de=g&&l.jsx(y.Item,{label:"排序",name:"sort",children:l.jsx(C,{placeholder:"排序"})}),j[36]=g,j[37]=de):de=j[37],j[38]===Symbol.for("react.memo_cache_sentinel")?(xe=l.jsx(s,{onClick:O,children:"取消"}),j[38]=xe):xe=j[38];const he="add"===k?"提交推荐":"保存编辑";let fe,pe,ue;return j[39]!==H[1]||j[40]!==he?(fe=l.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[xe,l.jsx(s,{type:"primary",htmlType:"submit",loading:H[1],children:he})]}),j[39]=H[1],j[40]=he,j[41]=fe):fe=j[41],j[42]!==g||j[43]!==I||j[44]!==Y||j[45]!==te||j[46]!==de||j[47]!==fe||j[48]!==$?(pe=l.jsxs(y,{form:I,autoComplete:"off",variant:"filled",initialValues:g,labelCol:W,onFinish:Y,className:"mt-1",onValuesChange:$,children:[D,J,X,te,ne,me,de,fe]}),j[42]=g,j[43]=I,j[44]=Y,j[45]=te,j[46]=de,j[47]=fe,j[48]=$,j[49]=pe):pe=j[49],j[50]!==pe||j[51]!==K?(ue=l.jsxs(l.Fragment,{children:[K,pe]}),j[50]=pe,j[51]=K,j[52]=ue):ue=j[52],ue}),M=e.memo(e=>{const o=r.c(32),{showItem:a}=e,{token:t}=j.useToken(),n=a?.background;let c,i,m;o[0]!==n||o[1]!==t.colorBorderSecondary?(c={background:n,borderColor:t.colorBorderSecondary},o[0]=n,o[1]=t.colorBorderSecondary,o[2]=c):c=o[2],o[3]!==a||o[4]!==t.colorPrimary?(i=a?.icon?l.jsx("div",{style:{height:"42px",width:"42px",backgroundColor:a.iconBackground},className:"flex-center rounded-[10px]",children:l.jsx("img",{src:g(a.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):l.jsx(T,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:t.colorPrimary}}),o[3]=a,o[4]=t.colorPrimary,o[5]=i):i=o[5],o[6]!==a?.tagColor||o[7]!==a?.tagText?(m=a?.tagText&&l.jsx(S,{color:a?.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:a?.tagText}),o[6]=a?.tagColor,o[7]=a?.tagText,o[8]=m):m=o[8];const d=a?.fontColor;let x;o[9]!==d?(x={color:d},o[9]=d,o[10]=x):x=o[10];const h=a?.title||"标题名称";let f,p;o[11]!==x||o[12]!==h?(f=l.jsx("h1",{style:x,className:"line-clamp-1 text-left whitespace-break-spaces",children:h}),o[11]=x,o[12]=h,o[13]=f):f=o[13],o[14]!==m||o[15]!==f?(p=l.jsxs("div",{className:"text-sm mb-[4px] flex items-center",children:[m,f]}),o[14]=m,o[15]=f,o[16]=p):p=o[16];const u=a?.fontColor;let b;o[17]!==u?(b={color:u},o[17]=u,o[18]=b):b=o[18];const y=a?.description||"推荐描述";let v,_;o[19]!==b||o[20]!==y?(v=l.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:b,children:y}),o[19]=b,o[20]=y,o[21]=v):v=o[21],o[22]!==v||o[23]!==p?(_=l.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[p,v]}),o[22]=v,o[23]=p,o[24]=_):_=o[24];const C=a?.fontColor;let w,P;return o[25]!==C?(w=l.jsx(N,{className:"opacity-50",style:{color:C}}),o[25]=C,o[26]=w):w=o[26],o[27]!==c||o[28]!==_||o[29]!==w||o[30]!==i?(P=l.jsx("div",{className:"h-[88px] pb-3 w-full flex flex-col mb-2",children:l.jsxs(s,{onClick:E,target:"_blank",style:c,type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:i,children:[_,w]})}),o[27]=c,o[28]=_,o[29]=w,o[30]=i,o[31]=P):P=o[31],P});function E(){c.info("此为预览效果")}export{U as A,P as C,k as P,N as R,T as a};
