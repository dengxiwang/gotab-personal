import{c as e,r,j as s,B as l,l as t,a,O as o,G as n,X as i,v as m,Y as c,m as u,n as d,Q as f,F as p,o as j}from"./requestIdleCallbackPolyfill-D5UXfOWp.js";import{T as x}from"./TextArea-BvATmHT6.js";import{C as h}from"./contentLayout-qjVol4Hl.js";import{F as _}from"./index-CiXMHzQl.js";import{I as b}from"./index-B3JXcSyU.js";import{S as y}from"./index-CULtT6eP.js";import{R as w}from"./QuestionCircleOutlined-Cx6yB-U8.js";import"./getAllowClear-CLEcXxhr.js";import"./useForm-cby96dhC.js";import"./row-BT64AYT8.js";import"./useBreakpoint-BwSRtPvM.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./Input-mEqGoZsi.js";function g(){const g=e.c(22),[S]=_.useForm();let C;g[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],g[0]=C):C=g[0];const[v,F]=r.useState(C);let I;g[1]!==S?(I=function(){t(0,F);const e=a.getState().user.token;o({url:j.getInfoConfig,token:e}).then(e=>{if(S.setFieldsValue(e.data),!e.data.server_url&&!n()){const e=i();S.setFieldValue("server_url",e)}}).finally(()=>{m(0,F)})},g[1]=S,g[2]=I):I=g[2];const q=I;let k,N,Q;g[3]!==q?(k=()=>{q()},g[3]=q,g[4]=k):k=g[4],g[5]===Symbol.for("react.memo_cache_sentinel")?(N=[],g[5]=N):N=g[5],r.useEffect(k,N),g[6]===Symbol.for("react.memo_cache_sentinel")?(Q=function(e){if(e.server_url&&!c(e.server_url))return void u.error("后台服务地址必须以http或https开头");t(1,F);const r=a.getState().user.token;d({url:j.updateInfoConfig,token:r,data:e}).finally(()=>{m(1,F)})},g[6]=Q):Q=g[6];const O=Q;let R,T,A,B,V,z,E,G,L,P;return g[7]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(f,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"mr-1"}),"更新网页的标题、描述等项目基础信息，服务地址主要用于插件版打包使用，别的信息可以自行更改项目文件，达到更改目的！或联系作者：dengxiwang@aliyun.com"]}),className:"mb-4 p-1 px-3 text-xs font-normal w-full"}),g[7]=R):R=g[7],g[8]===Symbol.for("react.memo_cache_sentinel")?(T={flex:"120px"},g[8]=T):T=g[8],g[9]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(_.Item,{label:"网站标题",required:!0,name:"web_title",rules:[{required:!0}],children:s.jsx(b,{placeholder:"网站标题",allowClear:!0})}),g[9]=A):A=g[9],g[10]===Symbol.for("react.memo_cache_sentinel")?(B=[{required:!0}],g[10]=B):B=g[10],g[11]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(_.Item,{label:"网站描述",required:!0,name:"web_description",rules:B,children:s.jsx(x,{autoSize:{minRows:3,maxRows:3},allowClear:!0,placeholder:"网站描述，head头部中的description信息"})}),V=s.jsx(p,{}),g[11]=V,g[12]=z):(V=g[11],z=g[12]),g[13]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(_.Item,{label:"后台服务地址",required:!0,name:"server_url",rules:[{required:!0}],children:s.jsx(b,{allowClear:!0,placeholder:"后台服务地址，如：https://web.gotab.cn"})}),g[13]=E):E=g[13],g[14]!==v[1]?(G=s.jsx("div",{className:"w-full flex justify-center",children:s.jsx(l,{htmlType:"submit",type:"primary",className:"w-full max-w-64",loading:v[1],children:"保存配置"})}),g[14]=v[1],g[15]=G):G=g[15],g[16]!==S||g[17]!==G?(L=s.jsxs(_,{form:S,className:"w-full",labelCol:T,onFinish:O,children:[A,z,V,E,G]}),g[16]=S,g[17]=G,g[18]=L):L=g[18],g[19]!==v[0]||g[20]!==L?(P=s.jsxs(h,{children:[R,s.jsx("div",{className:"w-full",children:s.jsx(y,{spinning:v[0],children:L})})]}),g[19]=v[0],g[20]=L,g[21]=P):P=g[21],P}export{g as default};
