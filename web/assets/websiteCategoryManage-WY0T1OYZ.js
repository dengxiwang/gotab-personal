import{x as e,e as t,j as s,B as r,ao as i,a8 as o,aw as a,ah as l,a0 as n,ag as m,af as c,aj as d}from"./main-RpejCBsR.js";import{u as j,R as p}from"./useFresh-CPnGAo4P.js";import{r as h}from"./transformData-hq2czZI8.js";import{M as f,R as x}from"./myTable-CRFfBxBV.js";import{C as u}from"./contentLayout-CYjexQz9.js";import{F as y}from"./index-NJy1tlp1.js";import{I as b}from"./index-DJ4Q4UDS.js";import{R as _,a as g}from"./SearchOutlined-B2JWdp69.js";import{T as S}from"./index-mJdixdnj.js";import{R as w}from"./SortAscendingOutlined-DHnwuoiB.js";import{T as C}from"./index-CYaJ7OIr.js";import{P as k}from"./main-Bz7X3OC0.js";import"./index-D5IqMKmB.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-DYvhoNUM.js";import"./Overflow-BCh9wkGD.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-DEv9k294.js";import"./getAllowClear-BYRQBlOI.js";import"./Input-B4rSyk4X.js";import"./assets-CmvcfQKP.js";import"./MoneyCollectOutlined-BEJwuBNw.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DhcLARst.js";import"./styleChecker-65ImXUxL.js";import"./AlipayOutlined-7zTy6hzu.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-nJJZPdRt.js";import"./useBreakpoint-DfVTHTv0.js";import"./index-BOGE8Tfq.js";import"./row-BVZ81Qgs.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-BWCilDY2.js";import"./SortAscendingOutlined-8bEGxkuH.js";function O(){const n=e.c(40),{key:m,refresh:c}=j(),[d]=y.useForm();let p;n[0]===Symbol.for("react.memo_cache_sentinel")?(p={},n[0]=p):p=n[0];const[x,S]=t.useState(p);let w,C,k,O;n[1]===Symbol.for("react.memo_cache_sentinel")?(w={title:"分类名称",key:"name",width:160,fixed:"left"},C={title:"排序",key:"sort",width:80,render:F},k={title:"更新时间",key:"updatedTime",width:200,render:T},n[1]=w,n[2]=C,n[3]=k):(w=n[1],C=n[2],k=n[3]),n[4]!==c?(O=[w,C,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(I,{record:t,refresh:c})}],n[4]=c,n[5]=O):O=n[5];const N=O;let M,A,R,L,W,z,U,q,B,D,K,P,Q,V,E,G;return n[6]!==d?(M=()=>{const e=d.getFieldsValue();e[Math.random()]=!0,S(h(e))},n[6]=d,n[7]=M):M=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(A={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},n[8]=A):A=n[8],n[9]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:A,children:s.jsx(y.Item,{name:"name",children:s.jsx(b,{placeholder:"分类名称"})})}),n[9]=R):R=n[9],n[10]!==d?(L=()=>{d.submit()},n[10]=d,n[11]=L):L=n[11],n[12]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(_,{}),n[12]=W):W=n[12],n[13]!==L?(z=s.jsx(r,{type:"primary",onClick:L,icon:W,children:"查询"}),n[13]=L,n[14]=z):z=n[14],n[15]!==d?(U=()=>{d.resetFields();const e={};e[Math.random()]=!0,S(e)},n[15]=d,n[16]=U):U=n[16],n[17]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(g,{}),n[17]=q):q=n[17],n[18]!==U?(B=s.jsx(r,{onClick:U,icon:q,children:"重置"}),n[18]=U,n[19]=B):B=n[19],n[20]!==z||n[21]!==B?(D=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[z,B]}),n[20]=z,n[21]=B,n[22]=D):D=n[22],n[23]!==d||n[24]!==D||n[25]!==M?(K=s.jsxs(y,{className:"w-full",form:d,onFinish:M,children:[R,D]}),n[23]=d,n[24]=D,n[25]=M,n[26]=K):K=n[26],n[27]===Symbol.for("react.memo_cache_sentinel")?(P=s.jsx(i,{className:"my-3"}),n[27]=P):P=n[27],n[28]!==c?(Q=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{o.show(a,{title:"新增分类",children:s.jsx(v,{refresh:c,type:"add"})})},children:"新增分类"})}),n[28]=c,n[29]=Q):Q=n[29],n[30]!==x?(V={searchParams:x},n[30]=x,n[31]=V):V=n[31],n[32]!==N||n[33]!==m||n[34]!==V?(E=s.jsx(f,{columns:N,getListUrl:l.getWebsiteCategoryList,dataKey:"data.list",tableKey:m,params:V}),n[32]=N,n[33]=m,n[34]=V,n[35]=E):E=n[35],n[36]!==K||n[37]!==Q||n[38]!==E?(G=s.jsxs(u,{children:[K,P,Q,E]}),n[36]=K,n[37]=Q,n[38]=E,n[39]=G):G=n[39],G}function T(e,t){return s.jsx(S,{icon:s.jsx(p,{}),children:e||t.createdTime})}function F(e){return s.jsx(S,{color:"gold",icon:s.jsx(w,{}),children:e||"-"})}const v=i=>{const c=e.c(16),{editItem:d,refresh:j,type:p}=i,h=void 0===p?"add":p,[f]=y.useForm(),[x,u]=t.useState(!1);let _;c[0]!==d||c[1]!==j||c[2]!==h?(_=function(e){u(!0);const t=n.getState().user.token;m({url:"add"===h?l.addWebsiteCategory:l.editWebsiteCategory,token:t,data:"add"===h?e:{...e,id:d.id}}).then((e=>{200===e.code&&(o.hide(a),j&&j())})).finally((()=>{u(!1)}))},c[0]=d,c[1]=j,c[2]=h,c[3]=_):_=c[3];const g=_;let S,w,k,O;c[4]===Symbol.for("react.memo_cache_sentinel")?(S={flex:"82px"},c[4]=S):S=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(y.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(b,{placeholder:"分类名称"})}),c[5]=w):w=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(y.Item,{name:"sort",label:"排序",children:s.jsx(C,{placeholder:"排序"})}),c[6]=k):k=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(r,{onClick:N,children:"取消"}),c[7]=O):O=c[7];const T="add"===h?"新增分类":"编辑";let F,v;return c[8]!==x||c[9]!==T?(F=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[O,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:T})]}),c[8]=x,c[9]=T,c[10]=F):F=c[10],c[11]!==d||c[12]!==f||c[13]!==g||c[14]!==F?(v=s.jsx(s.Fragment,{children:s.jsxs(y,{form:f,autoComplete:"off",variant:"filled",initialValues:d,labelCol:S,onFinish:g,children:[w,k,F]})}),c[11]=d,c[12]=f,c[13]=g,c[14]=F,c[15]=v):v=c[15],v},I=t.memo((i=>{const j=e.c(20),{record:p,refresh:h}=i;let f;j[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],j[0]=f):f=j[0];const[u,y]=t.useState(f);let b;j[1]!==p||j[2]!==h?(b=function(){c(1,y);const e=n.getState().user.token;setTimeout((()=>{m({url:l.deleteWebsiteCategory,token:e,data:{id:p.id}}).then((e=>{200===e.code&&h()})).finally((()=>{d(1,y)}))}),500)},j[1]=p,j[2]=h,j[3]=b):b=j[3];const _=b;let g,S,w,C,O,T,F;return j[4]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},j[4]=g):g=j[4],j[5]!==p||j[6]!==h?(S=s.jsx(r,{type:"link",size:"small",style:g,onClick:()=>{o.show(a,{title:"编辑分类",children:s.jsx(v,{editItem:p,refresh:h,type:"edit"})})},children:"编辑"}),j[5]=p,j[6]=h,j[7]=S):S=j[7],j[8]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},j[8]=w):w=j[8],j[9]!==u[1]?(C=u[1]?s.jsx(x,{}):"删除",j[9]=u[1],j[10]=C):C=j[10],j[11]!==u[1]||j[12]!==C?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:u[1],style:w,children:C}),j[11]=u[1],j[12]=C,j[13]=O):O=j[13],j[14]!==_||j[15]!==O?(T=s.jsx(k,{title:"是否确认删除？",onConfirm:_,children:O}),j[14]=_,j[15]=O,j[16]=T):T=j[16],j[17]!==S||j[18]!==T?(F=s.jsxs("div",{className:"flex flex-wrap",children:[S,T]}),j[17]=S,j[18]=T,j[19]=F):F=j[19],F}));function N(){o.hide(a)}export{O as default};
