import{c as e,r as t,j as n,h as a,B as o,l as s,O as l,o as r,v as c,n as u,q as i}from"./requestIdleCallbackPolyfill-MO-SmkoS.js";import{E as m}from"./index-CnsD_rIQ.js";import d from"./markdownContent-dlq42VUZ.js";import{C as f}from"./contentLayout-DpwOHCAw.js";import{S as p}from"./index-CGfVPk6V.js";import{S as b}from"./index-x0obBUbF.js";function x(){const a=e.c(3),[o,s]=t.useState("aboutUs");let l,r;return a[0]===Symbol.for("react.memo_cache_sentinel")?(l=n.jsx(p,{options:[{label:"关于我们",value:"aboutUs"},{label:"捐赠打赏",value:"donate"}],onChange:e=>{s(e)},className:"mb-3"}),a[0]=l):l=a[0],a[1]!==o?(r=n.jsxs(f,{children:[l,n.jsx(h,{type:o})]}),a[1]=o,a[2]=r):r=a[2],r}const h=d=>{const f=e.c(29),{type:p}=d,[x,h]=t.useState("");let y;f[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],f[0]=y):y=f[0];const[C,U]=t.useState(y),S=a(j);let _;f[1]===Symbol.for("react.memo_cache_sentinel")?(_=new AbortController,f[1]=_):_=f[1];const w=t.useRef(_);let k;f[2]!==S||f[3]!==p?(k=function(){w.current.abort(),w.current=new AbortController,s(0,U),l({url:"aboutUs"===p?r.getAboutUsContent:r.getDonateContent,token:S,signal:w.current.signal}).then((e=>{200===e.code&&("aboutUs"===p?h(e.data.aboutUs):"donate"===p&&h(e.data.donate))})).finally((()=>{c(0,U)}))},f[2]=S,f[3]=p,f[4]=k):k=f[4];const v=k;let N,A,I;f[5]!==v?(N=()=>{v()},f[5]=v,f[6]=N):N=f[6],f[7]!==p?(A=[p],f[7]=p,f[8]=A):A=f[8],t.useEffect(N,A),f[9]!==S?(I=function(e){return new Promise((t=>{u({url:r.uploadImage,token:S,data:i({file:e})}).then((e=>{200===e.code&&e.data&&t(e.data.image_url)}))}))},f[9]=S,f[10]=I):I=f[10];const P=I;let q;f[11]!==x||f[12]!==S||f[13]!==p?(q=function(){s(1,U),u({url:"aboutUs"===p?r.updateAboutUsContent:r.updateDonateContent,token:S,data:{content:x}}).finally((()=>{c(1,U)}))},f[11]=x,f[12]=S,f[13]=p,f[14]=q):q=f[14];const D=q;let E,L,T,z,B,H;return f[15]===Symbol.for("react.memo_cache_sentinel")?(E={height:"calc(100% - 44px)"},L=e=>{h(e.text)},f[15]=E,f[16]=L):(E=f[15],L=f[16]),f[17]!==P||f[18]!==x?(T=n.jsx(m,{className:"flex-1",style:E,onChange:L,value:x,renderHTML:g,onImageUpload:P}),f[17]=P,f[18]=x,f[19]=T):T=f[19],f[20]!==C[1]||f[21]!==D?(z=n.jsx("div",{className:"flex justify-end gap-3 flex-wrap mt-3",children:n.jsx(o,{loading:C[1],type:"primary",onClick:D,children:"保存配置"})}),f[20]=C[1],f[21]=D,f[22]=z):z=f[22],f[23]!==z||f[24]!==T?(B=n.jsxs("main",{className:"w-full h-[480px]",children:[T,z]}),f[23]=z,f[24]=T,f[25]=B):B=f[25],f[26]!==C[0]||f[27]!==B?(H=n.jsx(b,{size:"large",spinning:C[0],wrapperClassName:"w-full",children:B}),f[26]=C[0],f[27]=B,f[28]=H):H=f[28],H};function j(e){return e.user.token}function g(e){return n.jsx(d,{content:e,replace:!1})}export{x as default};
