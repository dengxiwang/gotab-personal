import{e,C as t,f as n,bH as a,g as r,m as o,aD as s,bq as l,aJ as i,bk as u,aN as c,bw as p,bo as f,bG as d,v as m,b9 as v,ed as g,bF as b,n as y,B as x}from"./main-RpejCBsR.js";import{q as C,i as O,a as h,m as j}from"./getAllowClear-BYRQBlOI.js";import{I as w,u as E,R as $}from"./Input-B4rSyk4X.js";import{T as k}from"./TextArea-BWCilDY2.js";const P=e=>{const{componentCls:t,paddingXS:n}=e;return{[t]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,[`${t}-input-wrapper`]:{position:"relative",[`${t}-mask-icon`]:{position:"absolute",zIndex:"1",top:"50%",right:"50%",transform:"translate(50%, -50%)",pointerEvents:"none"},[`${t}-mask-input`]:{color:"transparent",caretColor:"var(--ant-color-text)"},[`${t}-mask-input[type=number]::-webkit-inner-spin-button`]:{"-webkit-appearance":"none",margin:0},[`${t}-mask-input[type=number]`]:{"-moz-appearance":"textfield"}},"&-rtl":{direction:"rtl"},[`${t}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${t}-sm ${t}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${t}-lg ${t}-input`]:{paddingInline:e.paddingXS}}}},I=r(["Input","OTP"],(e=>{const t=o(e,O(e));return[P(t)]}),h);const z=e.forwardRef(((a,r)=>{const{className:o,value:l,onChange:i,onActiveChange:u,index:c,mask:p}=a,f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(a,["className","value","onChange","onActiveChange","index","mask"]),{getPrefixCls:d}=e.useContext(t),m=d("otp"),v="string"==typeof p?p:l,g=e.useRef(null);e.useImperativeHandle(r,(()=>g.current));const b=()=>{s((()=>{var e;const t=null===(e=g.current)||void 0===e?void 0:e.input;document.activeElement===t&&t&&t.select()}))};return e.createElement("span",{className:`${m}-input-wrapper`,role:"presentation"},p&&""!==l&&void 0!==l&&e.createElement("span",{className:`${m}-mask-icon`,"aria-hidden":"true"},v),e.createElement(w,Object.assign({"aria-label":`OTP Input ${c+1}`,type:!0===p?"password":"text"},f,{ref:g,value:l,onInput:e=>{i(c,e.target.value)},onFocus:b,onKeyDown:e=>{const{key:t,ctrlKey:n,metaKey:a}=e;"ArrowLeft"===t?u(c-1):"ArrowRight"===t?u(c+1):"z"===t&&(n||a)&&e.preventDefault(),b()},onKeyUp:e=>{"Backspace"!==e.key||l||u(c-1),b()},onMouseDown:b,onMouseUp:b,className:n(o,{[`${m}-mask-input`]:p})})))}));function N(e){return(e||"").split("")}const S=t=>{const{index:n,prefixCls:a,separator:r}=t,o="function"==typeof r?r(n):r;return o?e.createElement("span",{className:`${a}-separator`},o):null},M=e.forwardRef(((r,o)=>{const{prefixCls:s,length:p=6,size:f,defaultValue:d,value:m,onChange:v,formatter:g,separator:b,variant:y,disabled:x,status:C,autoFocus:O,mask:h,type:w,onInput:E,inputMode:$}=r,k=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(r,["prefixCls","length","size","defaultValue","value","onChange","formatter","separator","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:P,direction:M}=e.useContext(t),A=P("otp",s),R=l(k,{aria:!0,data:!0,attr:!0}),[T,B,D]=I(A),F=i((e=>null!=f?f:e)),L=e.useContext(a),q=j(L.status,C),X=e.useMemo((()=>Object.assign(Object.assign({},L),{status:q,hasFeedback:!1,feedbackIcon:null})),[L,q]),G=e.useRef(null),H=e.useRef({});e.useImperativeHandle(o,(()=>({focus:()=>{var e;null===(e=H.current[0])||void 0===e||e.focus()},blur:()=>{var e;for(let t=0;t<p;t+=1)null===(e=H.current[t])||void 0===e||e.blur()},nativeElement:G.current})));const K=e=>g?g(e):e,[U,V]=e.useState((()=>N(K(d||""))));e.useEffect((()=>{void 0!==m&&V(N(m))}),[m]);const Q=u((e=>{V(e),E&&E(e),v&&e.length===p&&e.every((e=>e))&&e.some(((e,t)=>U[t]!==e))&&v(e.join(""))})),_=u(((e,t)=>{let n=c(U);for(let r=0;r<e;r+=1)n[r]||(n[r]="");t.length<=1?n[e]=t:n=n.slice(0,e).concat(N(t)),n=n.slice(0,p);for(let r=n.length-1;r>=0&&!n[r];r-=1)n.pop();const a=K(n.map((e=>e||" ")).join(""));return n=N(a).map(((e,t)=>" "!==e||n[t]?e:n[t])),n})),J=(e,t)=>{var n;const a=_(e,t),r=Math.min(e+t.length,p-1);r!==e&&void 0!==a[e]&&(null===(n=H.current[r])||void 0===n||n.focus()),Q(a)},W=e=>{var t;null===(t=H.current[e])||void 0===t||t.focus()},Y={variant:y,disabled:x,status:q,mask:h,type:w,inputMode:$};return T(e.createElement("div",Object.assign({},R,{ref:G,className:n(A,{[`${A}-sm`]:"small"===F,[`${A}-lg`]:"large"===F,[`${A}-rtl`]:"rtl"===M},D,B),role:"group"}),e.createElement(a.Provider,{value:X},Array.from({length:p}).map(((t,n)=>{const a=`otp-${n}`,r=U[n]||"";return e.createElement(e.Fragment,{key:a},e.createElement(z,Object.assign({ref:e=>{H.current[n]=e},index:n,size:F,htmlSize:1,className:`${A}-input`,onChange:J,value:r,onActiveChange:W,autoFocus:0===n&&O},Y)),n<p-1&&e.createElement(S,{separator:b,index:n,prefixCls:A}))})))))}));var A={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},R=function(t,n){return e.createElement(p,f({},t,{ref:n,icon:A}))},T=e.forwardRef(R);const B=t=>t?e.createElement(g,null):e.createElement(T,null),D={click:"onClick",hover:"onMouseOver"},F=e.forwardRef(((a,r)=>{const{disabled:o,action:s="click",visibilityToggle:l=!0,iconRender:i=B}=a,u=e.useContext(d),c=null!=o?o:u,p="object"==typeof l&&void 0!==l.visible,[f,g]=e.useState((()=>!!p&&l.visible)),b=e.useRef(null);e.useEffect((()=>{p&&g(l.visible)}),[p,l]);const y=E(b),x=()=>{var e;if(c)return;f&&y();const t=!f;g(t),"object"==typeof l&&(null===(e=l.onVisibleChange)||void 0===e||e.call(l,t))},{className:C,prefixCls:O,inputPrefixCls:h,size:j}=a,$=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(a,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:k}=e.useContext(t),P=k("input",h),I=k("input-password",O),z=l&&(t=>{const n=D[s]||"",a=i(f),r={[n]:x,className:`${t}-icon`,key:"passwordIcon",onMouseDown:e=>{e.preventDefault()},onMouseUp:e=>{e.preventDefault()}};return e.cloneElement(e.isValidElement(a)?a:e.createElement("span",null,a),r)})(I),N=n(I,C,{[`${I}-${j}`]:!!j}),S=Object.assign(Object.assign({},m($,["suffix","iconRender","visibilityToggle"])),{type:f?"text":"password",className:N,prefixCls:P,suffix:z});return j&&(S.size=j),e.createElement(w,Object.assign({ref:v(r,b)},S))}));const L=e.forwardRef(((a,r)=>{const{prefixCls:o,inputPrefixCls:s,className:l,size:u,suffix:c,enterButton:p=!1,addonAfter:f,loading:d,disabled:m,onSearch:g,onChange:C,onCompositionStart:O,onCompositionEnd:h}=a,j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(a,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:E,direction:k}=e.useContext(t),P=e.useRef(!1),I=E("input-search",o),z=E("input",s),{compactSize:N}=b(I,k),S=i((e=>{var t;return null!==(t=null!=u?u:N)&&void 0!==t?t:e})),M=e.useRef(null),A=e=>{var t;document.activeElement===(null===(t=M.current)||void 0===t?void 0:t.input)&&e.preventDefault()},R=e=>{var t,n;g&&g(null===(n=null===(t=M.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e,{source:"input"})},T="boolean"==typeof p?e.createElement($,null):null,B=`${I}-button`;let D;const F=p||{},L=F.type&&!0===F.type.__ANT_BUTTON;D=L||"button"===F.type?y(F,Object.assign({onMouseDown:A,onClick:e=>{var t,n;null===(n=null===(t=null==F?void 0:F.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),R(e)},key:"enterButton"},L?{className:B,size:S}:{})):e.createElement(x,{className:B,type:p?"primary":void 0,size:S,disabled:m,key:"enterButton",onMouseDown:A,onClick:R,loading:d,icon:T},p),f&&(D=[D,y(f,{key:"addonAfter"})]);const q=n(I,{[`${I}-rtl`]:"rtl"===k,[`${I}-${S}`]:!!S,[`${I}-with-button`]:!!p},l),X=Object.assign(Object.assign({},j),{className:q,prefixCls:z,type:"search"});return e.createElement(w,Object.assign({ref:v(M,r),onPressEnter:e=>{P.current||d||R(e)}},X,{size:S,onCompositionStart:e=>{P.current=!0,null==O||O(e)},onCompositionEnd:e=>{P.current=!1,null==h||h(e)},addonAfter:D,suffix:c,onChange:e=>{(null==e?void 0:e.target)&&"click"===e.type&&g&&g(e.target.value,e,{source:"clear"}),null==C||C(e)},disabled:m}))})),q=w;q.Group=r=>{const{getPrefixCls:o,direction:s}=e.useContext(t),{prefixCls:l,className:i}=r,u=o("input-group",l),c=o("input"),[p,f,d]=C(c),m=n(u,d,{[`${u}-lg`]:"large"===r.size,[`${u}-sm`]:"small"===r.size,[`${u}-compact`]:r.compact,[`${u}-rtl`]:"rtl"===s},f,i),v=e.useContext(a),g=e.useMemo((()=>Object.assign(Object.assign({},v),{isFormItemInput:!1})),[v]);return p(e.createElement("span",{className:m,style:r.style,onMouseEnter:r.onMouseEnter,onMouseLeave:r.onMouseLeave,onFocus:r.onFocus,onBlur:r.onBlur},e.createElement(a.Provider,{value:g},r.children)))},q.Search=L,q.TextArea=k,q.Password=F,q.OTP=M;export{q as I,T as R};
