import{c as e,r as t,j as s,B as r,F as i,Z as l,$ as o,o as a,a as n,n as m,l as c,v as d,Y as j}from"./requestIdleCallbackPolyfill-MO-SmkoS.js";import{u as p,R as h}from"./useFresh-Cf_8enuG.js";import{r as f}from"./transformData-BoL2s8hQ.js";import{M as x,R as u}from"./myTable-OfqdUn54.js";import{C as y}from"./contentLayout-DpwOHCAw.js";import{F as b}from"./index-6Tj7BH1Z.js";import{I as _}from"./index-Ct1i5EsT.js";import{R as g,a as S}from"./SearchOutlined-n0MpBIsZ.js";import{T as C}from"./index-DtuO_U9L.js";import{R as w}from"./SortAscendingOutlined-h4CSWjG-.js";import{T as k}from"./index-V3XwmAf3.js";import"./index-CjImbAgO.js";import"./index-DmDI6RXA.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-DL_AQ9uJ.js";import"./Overflow-B490_axt.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-B7mQI6Db.js";import"./getAllowClear-R1g-sqG4.js";import"./Input-CofpihmY.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-JPhmNXP6.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-CtnljbQ6.js";import"./styleChecker-CpHprrTD.js";import"./AlipayOutlined-3hyPJFA-.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-BHUQRHGb.js";import"./index-x0obBUbF.js";import"./row-BlDuXhCL.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-mc2JB1dg.js";import"./SortAscendingOutlined-8bEGxkuH.js";function O(){const n=e.c(40),{key:m,refresh:c}=p(),[d]=b.useForm();let j;n[0]===Symbol.for("react.memo_cache_sentinel")?(j={},n[0]=j):j=n[0];const[h,u]=t.useState(j);let C,w,k,O;n[1]===Symbol.for("react.memo_cache_sentinel")?(C={title:"分类名称",key:"name",width:160,fixed:"left"},w={title:"排序",key:"sort",width:80,render:T},k={title:"更新时间",key:"updatedTime",width:200,render:F},n[1]=C,n[2]=w,n[3]=k):(C=n[1],w=n[2],k=n[3]),n[4]!==c?(O=[C,w,k,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(I,{record:t,refresh:c})}],n[4]=c,n[5]=O):O=n[5];const N=O;let A,M,R,W,L,q,P,Q,z,B,K,U,V,Y,Z,D;return n[6]!==d?(A=()=>{const e=d.getFieldsValue();e[Math.random()]=!0,u(f(e))},n[6]=d,n[7]=A):A=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(M={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},n[8]=M):M=n[8],n[9]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:M,children:s.jsx(b.Item,{name:"name",children:s.jsx(_,{placeholder:"分类名称"})})}),n[9]=R):R=n[9],n[10]!==d?(W=()=>{d.submit()},n[10]=d,n[11]=W):W=n[11],n[12]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(g,{}),n[12]=L):L=n[12],n[13]!==W?(q=s.jsx(r,{type:"primary",onClick:W,icon:L,children:"查询"}),n[13]=W,n[14]=q):q=n[14],n[15]!==d?(P=()=>{d.resetFields();const e={};e[Math.random()]=!0,u(e)},n[15]=d,n[16]=P):P=n[16],n[17]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(S,{}),n[17]=Q):Q=n[17],n[18]!==P?(z=s.jsx(r,{onClick:P,icon:Q,children:"重置"}),n[18]=P,n[19]=z):z=n[19],n[20]!==q||n[21]!==z?(B=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[q,z]}),n[20]=q,n[21]=z,n[22]=B):B=n[22],n[23]!==d||n[24]!==B||n[25]!==A?(K=s.jsxs(b,{className:"w-full",form:d,onFinish:A,children:[R,B]}),n[23]=d,n[24]=B,n[25]=A,n[26]=K):K=n[26],n[27]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx(i,{className:"my-3"}),n[27]=U):U=n[27],n[28]!==c?(V=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{l.show(o,{title:"新增分类",children:s.jsx(v,{refresh:c,type:"add"})})},children:"新增分类"})}),n[28]=c,n[29]=V):V=n[29],n[30]!==h?(Y={searchParams:h},n[30]=h,n[31]=Y):Y=n[31],n[32]!==N||n[33]!==m||n[34]!==Y?(Z=s.jsx(x,{columns:N,getListUrl:a.getWebsiteCategoryList,dataKey:"data.list",tableKey:m,params:Y}),n[32]=N,n[33]=m,n[34]=Y,n[35]=Z):Z=n[35],n[36]!==K||n[37]!==V||n[38]!==Z?(D=s.jsxs(y,{children:[K,U,V,Z]}),n[36]=K,n[37]=V,n[38]=Z,n[39]=D):D=n[39],D}function F(e,t){return s.jsx(C,{icon:s.jsx(h,{}),children:e||t.createdTime})}function T(e){return s.jsx(C,{color:"gold",icon:s.jsx(w,{}),children:e||"-"})}const v=i=>{const c=e.c(16),{editItem:d,refresh:j,type:p}=i,h=void 0===p?"add":p,[f]=b.useForm(),[x,u]=t.useState(!1);let y;c[0]!==d||c[1]!==j||c[2]!==h?(y=function(e){u(!0);const t=n.getState().user.token;m({url:"add"===h?a.addWebsiteCategory:a.editWebsiteCategory,token:t,data:"add"===h?e:{...e,id:d.id}}).then((e=>{200===e.code&&(l.hide(o),j&&j())})).finally((()=>{u(!1)}))},c[0]=d,c[1]=j,c[2]=h,c[3]=y):y=c[3];const g=y;let S,C,w,O;c[4]===Symbol.for("react.memo_cache_sentinel")?(S={flex:"82px"},c[4]=S):S=c[4],c[5]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsx(b.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(_,{placeholder:"分类名称",allowClear:!0})}),c[5]=C):C=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(b.Item,{name:"sort",label:"排序",children:s.jsx(k,{placeholder:"排序"})}),c[6]=w):w=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx(r,{onClick:N,children:"取消"}),c[7]=O):O=c[7];const F="add"===h?"新增分类":"保存编辑";let T,v;return c[8]!==x||c[9]!==F?(T=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[O,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:F})]}),c[8]=x,c[9]=F,c[10]=T):T=c[10],c[11]!==d||c[12]!==f||c[13]!==g||c[14]!==T?(v=s.jsx(s.Fragment,{children:s.jsxs(b,{form:f,autoComplete:"off",variant:"filled",initialValues:d,labelCol:S,onFinish:g,children:[C,w,T]})}),c[11]=d,c[12]=f,c[13]=g,c[14]=T,c[15]=v):v=c[15],v},I=t.memo((i=>{const p=e.c(20),{record:h,refresh:f}=i;let x;p[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],p[0]=x):x=p[0];const[y,b]=t.useState(x);let _;p[1]!==h||p[2]!==f?(_=function(){c(1,b);const e=n.getState().user.token;setTimeout((()=>{m({url:a.deleteWebsiteCategory,token:e,data:{id:h.id}}).then((e=>{200===e.code&&f()})).finally((()=>{d(1,b)}))}),500)},p[1]=h,p[2]=f,p[3]=_):_=p[3];const g=_;let S,C,w,k,O,F,T;return p[4]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},p[4]=S):S=p[4],p[5]!==h||p[6]!==f?(C=s.jsx(r,{type:"link",size:"small",style:S,onClick:()=>{l.show(o,{title:"编辑分类",children:s.jsx(v,{editItem:h,refresh:f,type:"edit"})})},children:"编辑"}),p[5]=h,p[6]=f,p[7]=C):C=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},p[8]=w):w=p[8],p[9]!==y[1]?(k=y[1]?s.jsx(u,{}):"删除",p[9]=y[1],p[10]=k):k=p[10],p[11]!==y[1]||p[12]!==k?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:y[1],style:w,children:k}),p[11]=y[1],p[12]=k,p[13]=O):O=p[13],p[14]!==g||p[15]!==O?(F=s.jsx(j,{title:"是否确认删除？",onConfirm:g,children:O}),p[14]=g,p[15]=O,p[16]=F):F=p[16],p[17]!==C||p[18]!==F?(T=s.jsxs("div",{className:"flex flex-wrap",children:[C,F]}),p[17]=C,p[18]=F,p[19]=T):T=p[19],T}));function N(){l.hide(o)}export{O as default};
