import{r as e,I as r,fq as t,c as n,j as a,B as l,l as o,n as s,o as i,v as c,m,t as d,c6 as u,h as f,E as h,Q as p,Z as j,u as x,c8 as y,$ as b,a0 as g,q as _,U as w,d as v,a3 as S,k as P,F as C,a as k,fr as E,c7 as N,c9 as O,bV as z,fs as A,O as I,K as T,cM as Z,cN as L,cO as F,cP as q,cQ as $,cR as D,cS as U,cT as R,cU as V,cW as M,cX as Q,cY as Y,cV as B,cK as K,cZ as W}from"./requestIdleCallbackPolyfill-DrbyOYxo.js";import{u as X,F as J}from"./index-CtxSBgRL.js";import{I as G}from"./index-DXVxAGiN.js";import{R as H}from"./UserOutlined-9ln74CpO.js";import{a as ee}from"./MailOutlined-B72RYzGN.js";import{C as re,F as te,K as ne,S as ae,U as le,W as oe}from"./WarningOutlined-CUQAbwtO.js";import{b as se,A as ie,L as ce,I as me,D as de,d as ue,u as fe,e as he,f as pe,g as je}from"./homePage-BG9cEqeF.js";import{T as xe}from"./index-wXrs50xs.js";import{R as ye}from"./QuestionCircleOutlined-C90PHkIz.js";import{T as be}from"./index-mivHz4CX.js";import{f as ge,m as _e}from"./assets-B8Bi78Vh.js";import{M as we}from"./myModal-BtA_dosU.js";import{a as ve}from"./PlusOutlined-Bl7zRflH.js";import{S as Se}from"./index-CWcW4QWM.js";import{l as Pe,R as Ce,C as ke}from"./useFresh-BwaxHEOd.js";import{D as Ee}from"./sortableJsUtils-TxKYMW50.js";import{e as Ne}from"./spinLoading-CQD8O71c.js";import"./row-DPrcOBny.js";import"./useBreakpoint-C_tmRwP1.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./getAllowClear-DxH2wcUI.js";import"./Input-CHj16lBA.js";import"./TextArea-D1FHkTHL.js";import"./Overflow-CYqTbEan.js";import"./index-Dy164_-K.js";import"./LeftOutlined-D9Sp279J.js";import"./fullSpin-BtWau_eU.js";import"./index-DmUoX8CG.js";import"./myDrawer2-OGqlYC2W.js";import"./handleButton-B7u0xxGH.js";import"./submitForInclusion-w8FuZHnN.js";import"./CloudUploadOutlined-aQL3CUdr.js";import"./ColorPicker-CtWZI7Uq.js";import"./index-DumKYTap.js";import"./index-BuVKZRMw.js";import"./iconBase-DlfSTBym.js";import"./SearchOutlined-CH533OFL.js";import"./index-DtAQ0zSJ.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-DeQQovjG.js";import"./styleChecker-BZ5qIWnG.js";import"./sortable.esm-Bv0j-UjJ.js";import"./addRecommendAppForm-B4zr8ErT.js";import"./LikeFilled-CENkT6aQ.js";import"./markdownContent-DlAohDGR.js";function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Oe.apply(this,arguments)}const ze=(t,n)=>e.createElement(r,Oe({},t,{ref:n,icon:re})),Ae=e.forwardRef(ze);function Ie(){return Ie=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ie.apply(this,arguments)}const Te=(n,a)=>e.createElement(r,Ie({},n,{ref:a,icon:t})),Ze=e.forwardRef(Te);function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Le.apply(this,arguments)}const Fe=(t,n)=>e.createElement(r,Le({},t,{ref:n,icon:te})),qe=e.forwardRef(Fe);function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},$e.apply(this,arguments)}const De=(t,n)=>e.createElement(r,$e({},t,{ref:n,icon:ne})),Ue=e.forwardRef(De);function Re(){return Re=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Re.apply(this,arguments)}const Ve=(t,n)=>e.createElement(r,Re({},t,{ref:n,icon:ae})),Me=e.forwardRef(Ve);function Qe(){return Qe=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Qe.apply(this,arguments)}const Ye=(t,n)=>e.createElement(r,Qe({},t,{ref:n,icon:le})),Be=e.forwardRef(Ye);function Ke(){return Ke=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},Ke.apply(this,arguments)}const We=(t,n)=>e.createElement(r,Ke({},t,{ref:n,icon:oe})),Xe=e.forwardRef(We);function Je(e,r){return r?/^\d{1,6}$/.test(r)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function Ge(e){return null==e?void 0:e.replace(/\D/g,"")}const He=e.memo(function(r){const t=n.c(38),{changeType:d}=r,[u]=X();let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[h,p]=e.useState(f);let j;t[1]!==d?(j=function(e){o(2,p),s({url:i.findPassword,data:e}).then(e=>{200===(null==e?void 0:e.code)&&d("login")}).finally(()=>{c(2,p)})},t[1]=d,t[2]=j):j=t[2];const x=j;let y;t[3]!==u?(y=function(){const e=u.getFieldValue("username");if(!e||""===e)return void m.error("请输入用户名");if(!/^[a-zA-Z]/.test(e))return void m.error("用户名必须以字母开头");if(!/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(e))return void m.error("用户名只能包含字母、数字、下划线或短横线");if(e.length<3||e.length>20)return void m.error("用户名长度必须在3到20位之间");const r=u.getFieldValue("email");r&&""!==r?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?(o(1,p),s({url:i.findPasswordEmailCode,data:{email:r,username:e}}).finally(()=>{c(1,p)})):m.error("请输入有效的邮箱地址"):m.error("请输入邮箱")},t[3]=u,t[4]=y):y=t[4];const b=y;let g,_,w,v,S,P,C,k,E,N,O,z,A,I,T,Z,L,F,q,$;return t[5]===Symbol.for("react.memo_cache_sentinel")?(g={flex:"80px"},t[5]=g):g=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(_={maxWidth:360,margin:"auto"},t[6]=_):_=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(w=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z]/.test(r)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(r)?r.length<3||r.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],t[7]=w):w=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(v=a.jsx(J.Item,{name:"username",required:!0,rules:w,children:a.jsx(G,{prefix:a.jsx(H,{}),placeholder:"用户名",allowClear:!0,maxLength:20})}),t[8]=v):v=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(S=[{validator:(e,r)=>r?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],t[9]=S):S=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(P=a.jsx(J.Item,{name:"email",required:!0,className:"flex-auto",rules:S,children:a.jsx(G,{placeholder:"邮箱",prefix:a.jsx(ee,{}),allowClear:!0,maxLength:255})}),t[10]=P):P=t[10],t[11]!==b||t[12]!==h[1]?(C=a.jsxs("div",{className:"flex gap-3 items-end",children:[P,a.jsx(l,{onClick:b,loading:h[1],className:"mb-6",children:"获取验证码"})]}),t[11]=b,t[12]=h[1],t[13]=C):C=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(k=[{validator:Je}],t[14]=k):k=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(E={width:"100%"},t[15]=E):E=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(N=a.jsx(J.Item,{name:"emailCode",required:!0,normalize:Ge,rules:k,children:a.jsx(G,{autoComplete:"new-password",style:E,placeholder:"验证码",allowClear:!0,maxLength:6,prefix:a.jsx(qe,{})})}),t[16]=N):N=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(O=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(r)?r.length<6||r.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],t[17]=O):O=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(z=a.jsx(J.Item,{name:"newPassword",required:!0,rules:O,children:a.jsx(G.Password,{autoComplete:"new-password",prefix:a.jsx(se,{}),placeholder:"新密码",allowClear:!0,maxLength:32})}),t[18]=z):z=t[18],t[19]!==u?(A=[{validator(e,r){if(""===r||!r)return Promise.reject(new Error("请再次输入密码"));return r!==u.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],t[19]=u,t[20]=A):A=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(G.Password,{autoComplete:"new-password",prefix:a.jsx(se,{}),placeholder:"二次确认密码",allowClear:!0,maxLength:32}),t[21]=I):I=t[21],t[22]!==A?(T=a.jsx(J.Item,{name:"confirmPassword",required:!0,rules:A,children:I}),t[22]=A,t[23]=T):T=t[23],t[24]!==h[2]?(Z=a.jsx(l,{type:"primary",className:"w-full",htmlType:"submit",loading:h[2],children:"找回密码"}),t[24]=h[2],t[25]=Z):Z=t[25],t[26]===Symbol.for("react.memo_cache_sentinel")?(L=a.jsx(xe,{className:" text-xs w-full m-0",icon:a.jsx(ye,{}),children:"多次发送验证码会存在收信失败的问题，请隔天重试"}),t[26]=L):L=t[26],t[27]!==d?(F=a.jsx(l,{type:"link",onClick:()=>{d("login")},children:"找到密码？返回登录"}),t[27]=d,t[28]=F):F=t[28],t[29]!==Z||t[30]!==F?(q=a.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[Z,L,F]}),t[29]=Z,t[30]=F,t[31]=q):q=t[31],t[32]!==x||t[33]!==u||t[34]!==T||t[35]!==q||t[36]!==C?($=a.jsx(a.Fragment,{children:a.jsxs(J,{labelCol:g,form:u,name:"findPassword-form",autoComplete:"off",onFinish:x,style:_,children:[v,C,N,z,T,q]})}),t[32]=x,t[33]=u,t[34]=T,t[35]=q,t[36]=C,t[37]=$):$=t[37],$});function er(e,r){return r?/^\d{1,6}$/.test(r)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function rr(e){return null==e?void 0:e.replace(/\D/g,"")}const tr=e.memo(function(r){const t=n.c(32),{changeType:d}=r,[u]=X();let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=[],t[0]=f):f=t[0];const[h,p]=e.useState(f);let j;t[1]!==d?(j=function(e){o(1,p),s({url:i.register,data:e}).then(e=>{200===(null==e?void 0:e.code)&&d("login")}).finally(()=>{c(1,p)})},t[1]=d,t[2]=j):j=t[2];const x=j;let y;t[3]!==u?(y=function(){const e=u.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(o(0,p),s({url:i.emailCode,data:{email:e}}).finally(()=>{c(0,p)})):m.error("请输入有效的邮箱地址"):m.error("请输入邮箱")},t[3]=u,t[4]=y):y=t[4];const b=y;let g,_,w,v,S,P,C,k,E,N,O,z,A,I,T,Z,L;return t[5]===Symbol.for("react.memo_cache_sentinel")?(g={flex:"80px"},t[5]=g):g=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(_={maxWidth:360,margin:"auto"},t[6]=_):_=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(w=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z]/.test(r)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(r)?r.length<3||r.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],t[7]=w):w=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(v=a.jsx(J.Item,{name:"username",required:!0,rules:w,children:a.jsx(G,{prefix:a.jsx(H,{}),placeholder:"用户名",allowClear:!0,maxLength:20})}),t[8]=v):v=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(S=[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(r)?r.length<6||r.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符")):Promise.reject(new Error("请输入密码"))}],t[9]=S):S=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(P=a.jsx(J.Item,{name:"password",required:!0,rules:S,children:a.jsx(G.Password,{autoComplete:"new-password",prefix:a.jsx(se,{}),placeholder:"密码",allowClear:!0,maxLength:32})}),t[10]=P):P=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(C=[{validator(e,r){if(!r)return Promise.reject(new Error("请输入邮箱"));return/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址"))}}],t[11]=C):C=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(k=a.jsx(J.Item,{name:"email",required:!0,className:"flex-auto",rules:C,children:a.jsx(G,{placeholder:"邮箱",prefix:a.jsx(ee,{}),allowClear:!0})}),t[12]=k):k=t[12],t[13]!==b||t[14]!==h[0]?(E=a.jsxs("div",{className:"flex gap-3 items-end",children:[k,a.jsx(l,{onClick:b,loading:h[0],className:"mb-6",children:"获取验证码"})]}),t[13]=b,t[14]=h[0],t[15]=E):E=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(N=[{validator:er}],t[16]=N):N=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(O={width:"100%"},t[17]=O):O=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(z=a.jsx(J.Item,{name:"emailCode",required:!0,normalize:rr,rules:N,children:a.jsx(G,{autoComplete:"new-password",style:O,placeholder:"验证码",allowClear:!0,maxLength:6,prefix:a.jsx(qe,{})})}),t[18]=z):z=t[18],t[19]!==h[1]?(A=a.jsx(l,{type:"primary",className:"w-full",htmlType:"submit",loading:h[1],children:"注册"}),t[19]=h[1],t[20]=A):A=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(xe,{className:" text-xs w-full m-0",icon:a.jsx(ye,{}),children:"多次发送验证码会存在收信失败的问题，请隔天重试"}),t[21]=I):I=t[21],t[22]!==d?(T=a.jsx(l,{type:"link",onClick:()=>{d("login")},children:"已有账号？返回登录"}),t[22]=d,t[23]=T):T=t[23],t[24]!==A||t[25]!==T?(Z=a.jsxs("div",{className:"flex gap-3 flex-col items-center",children:[A,I,T]}),t[24]=A,t[25]=T,t[26]=Z):Z=t[26],t[27]!==u||t[28]!==x||t[29]!==E||t[30]!==Z?(L=a.jsx(a.Fragment,{children:a.jsxs(J,{labelCol:g,form:u,name:"register-form",autoComplete:"off",onFinish:x,style:_,children:[v,P,E,z,Z]})}),t[27]=u,t[28]=x,t[29]=E,t[30]=Z,t[31]=L):L=t[31],L});const nr=e.memo(function(){const r=n.c(14),[t,l]=e.useState("login"),{token:o}=d.useToken();let s;r[0]===Symbol.for("react.memo_cache_sentinel")?(s=function(e){l(e)},r[0]=s):s=r[0];const i=s;let c,m;r[1]!==t?(c=a.jsx("div",{className:"flex flex-col items-center m-3 gap-3",children:a.jsx(ie,{size:64,icon:"findPassword"===t?a.jsx(Ue,{}):"register"===t?a.jsx(Be,{}):a.jsx(H,{})})}),r[1]=t,r[2]=c):c=r[2],r[3]!==o.colorPrimary?(m={color:o.colorPrimary},r[3]=o.colorPrimary,r[4]=m):m=r[4];const u="login"===t?"登录享有更多服务":"register"===t?"欢迎您的注册体验":"遗失密码？即刻找回";let f,h,p;return r[5]!==m||r[6]!==u?(f=a.jsx("p",{className:"font-medium text-lg mb-6 text-center",style:m,children:u}),r[5]=m,r[6]=u,r[7]=f):f=r[7],r[8]!==t?(h="login"===t?a.jsx(ce,{changeType:i}):"register"===t?a.jsx(tr,{changeType:i}):a.jsx(He,{changeType:i}),r[8]=t,r[9]=h):h=r[9],r[10]!==c||r[11]!==f||r[12]!==h?(p=a.jsxs(a.Fragment,{children:[c,f,h]}),r[10]=c,r[11]=f,r[12]=h,r[13]=p):p=r[13],p});function ar(e){return e.user.token}const lr=e.memo(function(){const r=n.c(21),{getDefaultData:t}=u();let m;r[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],r[0]=m):m=r[0];const[d,x]=e.useState(m),y=f(ar);let b;r[1]!==y?(b=function(){o(0,x),s({url:i.setDefaultData,token:y,data:{data:h()}}).finally(()=>{c(0,x)})},r[1]=y,r[2]=b):b=r[2];const g=b;let _,w,v,S,P,C,k,E,N;return r[3]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsx(p,{message:"当前正处于编辑默认主页状态，保存的内容将替换用户首次进入网站时页面初始化的数据",banner:!0}),r[3]=_):_=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(Me,{}),r[4]=w):w=r[4],r[5]!==d[0]?(v=a.jsx(l,{type:"primary",icon:w,loading:d[0],children:"保存默认配置"}),r[5]=d[0],r[6]=v):v=r[6],r[7]!==g||r[8]!==v?(S=a.jsx(j,{title:"是否确认保存？",onConfirm:g,children:v}),r[7]=g,r[8]=v,r[9]=S):S=r[9],r[10]!==t?(P=()=>{t(1,x)},r[10]=t,r[11]=P):P=r[11],r[12]===Symbol.for("react.memo_cache_sentinel")?(C=a.jsx(Ze,{}),r[12]=C):C=r[12],r[13]!==d[1]?(k=a.jsx(l,{loading:d[1],icon:C,children:"获取默认配置"}),r[13]=d[1],r[14]=k):k=r[14],r[15]!==P||r[16]!==k?(E=a.jsx(j,{title:"是否确认获取？",onConfirm:P,children:k}),r[15]=P,r[16]=k,r[17]=E):E=r[17],r[18]!==S||r[19]!==E?(N=a.jsxs("main",{className:"flex flex-col gap-3 *:border *:p-3",children:[_,S,E]}),r[18]=S,r[19]=E,r[20]=N):N=r[20],N});function or(){b.hide(g)}function sr(e){return e.user.userInfo}function ir(e){return e.user.token}const cr=e.memo(function(){const r=n.c(17),t=x(),[o,c]=e.useState(!1),m=f(ir),d=f(sr);let u;r[0]!==t||r[1]!==m?(u=function(e){c(!0),s({url:i.submitAppellation,token:m,data:e}).then(e=>{200===e.code&&e.data&&(t(y(e.data)),b.hide(g))}).finally(()=>{c(!1)})},r[0]=t,r[1]=m,r[2]=u):u=r[2];const h=u;let j,_,w,v,S,P,C;return r[3]===Symbol.for("react.memo_cache_sentinel")?(j=a.jsx(p,{message:a.jsx("p",{children:"称号是用户的一个额外信息，申请通过即可开启 VIP 标识！"}),className:"mb-3 py-1 px-3 text-xs font-medium",type:"warning"}),r[3]=j):j=r[3],r[4]!==d?(_=[{validator:(e,r)=>r&&""!==r?r.length>8?Promise.reject("称号名称不能超过8个字符"):r===d.appellation?Promise.reject("称号名称不能与当前称号相同"):Promise.resolve():Promise.reject("请输入称号名称")}],r[4]=d,r[5]=_):_=r[5],r[6]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(G,{placeholder:"称号名称",maxLength:8,allowClear:!0,showCount:!0}),r[6]=w):w=r[6],r[7]!==_?(v=a.jsx(J.Item,{label:"称号名称",required:!0,rules:_,name:"appellation",children:w}),r[7]=_,r[8]=v):v=r[8],r[9]===Symbol.for("react.memo_cache_sentinel")?(S=a.jsx(l,{onClick:or,children:"取消"}),r[9]=S):S=r[9],r[10]!==o?(P=a.jsxs("div",{className:"flex justify-end gap-3 flex-wrap items-center",children:[S,a.jsx(l,{type:"primary",htmlType:"submit",loading:o,children:"提交申请"})]}),r[10]=o,r[11]=P):P=r[11],r[12]!==h||r[13]!==v||r[14]!==P||r[15]!==d?(C=a.jsxs(a.Fragment,{children:[j,a.jsxs(J,{initialValues:d,onFinish:h,children:[v,P]})]}),r[12]=h,r[13]=v,r[14]=P,r[15]=d,r[16]=C):C=r[16],C});function mr(){b.hide(g)}function dr(){b.hide(g)}function ur(){b.hide(g)}function fr(e,r){const t=new FileReader;let n=!1;const a=()=>{n||r(t.result)};t.addEventListener("loadend",a),t.readAsDataURL(e);return()=>{n=!0,t.removeEventListener("loadend",a),t.abort()}}function hr(e){return e.user.userInfo}function pr(e){return e.user.token}const jr=e.memo(function(){const r=n.c(31),t=x(),d=f(pr),u=f(hr);let h;r[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],r[0]=h):h=r[0];const[p,j]=e.useState(h),[b,g]=e.useState(),[v,S]=e.useState(null),[P,C]=e.useState(null);let k,E;r[1]!==P?(k=()=>()=>{P&&P()},E=[P],r[1]=P,r[2]=k,r[3]=E):(k=r[2],E=r[3]),e.useEffect(k,E);const N=fr;let O;r[4]!==t||r[5]!==d?(O=()=>{o(0,j),s({url:i.resetAvatar,token:d}).then(e=>{200===e.code&&e.data&&(t(y(e.data)),setTimeout(ur,0))}).finally(()=>{c(0,j)})},r[4]=t,r[5]=d,r[6]=O):O=r[6];const z=O;let A;r[7]!==t||r[8]!==v||r[9]!==d||r[10]!==u?(A=()=>{v?(o(1,j),s({url:i.uploadAvatar,data:_({file:v}),token:d}).then(e=>{if(200===e.code&&e.data){const r={...u,avatar:e.data.avatar_url};t(y(r)),setTimeout(dr,0)}}).finally(()=>{c(1,j)})):m.error("请先选择一个图片")},r[7]=t,r[8]=v,r[9]=d,r[10]=u,r[11]=A):A=r[11];const I=A;let T,Z,L,F,q,$,D,U,R;return r[12]!==P?(T=()=>()=>{P&&P()},Z=[P],r[12]=P,r[13]=T,r[14]=Z):(T=r[13],Z=r[14]),e.useEffect(T,Z),r[15]===Symbol.for("react.memo_cache_sentinel")?(L=e=>{if(e.size>512e3)return m.error("头像大小不能超过500KB！"),!1;const r=N(e,r=>{g(r),S(e)});return C(()=>r),!1},r[15]=L):L=r[15],r[16]!==b?(F=a.jsx(me,{quality:.1,modalTitle:"裁剪图片",modalOk:"确定",modalCancel:"取消",children:a.jsx(w,{maxCount:1,accept:".png, .jpeg, .jpg",name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:L,children:b?a.jsx("img",{src:b,alt:"avatar",style:{width:"100%"}}):a.jsxs("button",{style:{border:0,background:"none"},type:"button",children:[a.jsx(ve,{}),a.jsx("div",{style:{marginTop:8},children:"上传头像"})]})})}),r[16]=b,r[17]=F):F=r[17],r[18]===Symbol.for("react.memo_cache_sentinel")?(q=a.jsx(l,{onClick:mr,children:"取消"}),r[18]=q):q=r[18],r[19]!==p[0]||r[20]!==z?($=a.jsx(l,{loading:p[0],onClick:z,children:"恢复默认"}),r[19]=p[0],r[20]=z,r[21]=$):$=r[21],r[22]!==p[1]||r[23]!==I?(D=a.jsx(l,{type:"primary",onClick:I,loading:p[1],children:"保存头像"}),r[22]=p[1],r[23]=I,r[24]=D):D=r[24],r[25]!==$||r[26]!==D?(U=a.jsxs("div",{className:"flex flex-wrap gap-3 justify-end mt-3",children:[q,$,D]}),r[25]=$,r[26]=D,r[27]=U):U=r[27],r[28]!==U||r[29]!==F?(R=a.jsxs(a.Fragment,{children:[F,U]}),r[28]=U,r[29]=F,r[30]=R):R=r[30],R});function xr(){b.hide(g)}function yr(e,r){if(!r)return Promise.reject(new Error("请输入密码"));return/^[a-zA-Z0-9_\-!@#$%^&*()+={}[\]:;"'<>.,?/~`|]+$/.test(r)?r.length<6||r.length>32?Promise.reject(new Error("密码长度必须在6到32位之间")):Promise.resolve():Promise.reject(new Error("密码只能包含字母、数字、下划线、短横线以及其他常用特殊字符"))}function br(e){200===e.code&&b.hide(g)}function gr(e){return e.user.token}const _r=e.memo(function(){const r=n.c(19),[t]=X();let m;r[0]===Symbol.for("react.memo_cache_sentinel")?(m=[],r[0]=m):m=r[0];const[d,u]=e.useState(m),h=f(gr);let p;r[1]!==h?(p=function(e){o(0,u),s({url:i.changePassword,data:e,token:h}).then(br).finally(()=>{c(0,u)})},r[1]=h,r[2]=p):p=r[2];const j=p,x=yr;let y,b,g,_,w,v,S,P,C;return r[3]===Symbol.for("react.memo_cache_sentinel")?(y={flex:"80px"},r[3]=y):y=r[3],r[4]===Symbol.for("react.memo_cache_sentinel")?(b=a.jsx(J.Item,{label:"原密码",required:!0,name:"oldPassword",rules:[{validator:x}],children:a.jsx(G.Password,{autoComplete:"new-password",placeholder:"原密码",maxLength:32,allowClear:!0})}),r[4]=b):b=r[4],r[5]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsx(J.Item,{label:"新密码",required:!0,name:"newPassword",rules:[{validator:x}],children:a.jsx(G.Password,{autoComplete:"new-password",placeholder:"新密码",maxLength:32,allowClear:!0})}),r[5]=g):g=r[5],r[6]!==t?(_=[{validator(e,r){if(""===r||!r)return Promise.reject(new Error("请再次输入密码"));return r!==t.getFieldValue("newPassword")?Promise.reject(new Error("两次输入的密码不一致")):Promise.resolve()}}],r[6]=t,r[7]=_):_=r[7],r[8]===Symbol.for("react.memo_cache_sentinel")?(w=a.jsx(G.Password,{autoComplete:"new-password",placeholder:"重新输入新密码",maxLength:32,allowClear:!0}),r[8]=w):w=r[8],r[9]!==_?(v=a.jsx(J.Item,{label:"确认密码",required:!0,name:"confirmPassword",rules:_,children:w}),r[9]=_,r[10]=v):v=r[10],r[11]===Symbol.for("react.memo_cache_sentinel")?(S=a.jsx(l,{onClick:xr,children:"取消"}),r[11]=S):S=r[11],r[12]!==d[0]?(P=a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[S,a.jsx(l,{type:"primary",htmlType:"submit",loading:d[0],children:"确定"})]}),r[12]=d[0],r[13]=P):P=r[13],r[14]!==j||r[15]!==t||r[16]!==v||r[17]!==P?(C=a.jsx(a.Fragment,{children:a.jsxs(J,{form:t,autoComplete:"off",name:"edit-user-form",onFinish:j,labelCol:y,children:[b,g,v,P]})}),r[14]=j,r[15]=t,r[16]=v,r[17]=P,r[18]=C):C=r[18],C});function wr(){b.hide(g)}function vr(e,r){return r&&r.length>20&&r.length>20?Promise.reject(new Error("昵称长度不能超过20个字符")):Promise.resolve()}function Sr(e){return e.user.userInfo}function Pr(e){return e.user.token}const Cr=e.memo(function(r){const t=n.c(23),{initialValues:m}=r,d=x();let u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],t[0]=u):u=t[0];const[h,p]=e.useState(u),j=f(Pr),_=f(Sr);let w;t[1]!==d||t[2]!==j||t[3]!==_?(w=function(e){o(0,p),""!==e.birthday&&e.birthday||delete e.birthday,s({url:i.editUserInfo,data:e,token:j}).then(e=>{200===e.code&&e.data&&(S(e.data,_)||d(y(e.data)),b.hide(g))}).finally(()=>{c(0,p)})},t[1]=d,t[2]=j,t[3]=_,t[4]=w):w=t[4];const P=w;let C,k,E,N,O,z,A,I,T,Z,L;return t[5]!==m.birthday?(C=m.birthday&&v(m.birthday,"YYYY-MM-DD"),t[5]=m.birthday,t[6]=C):C=t[6],t[7]!==m||t[8]!==C?(k={...m,birthday:C},t[7]=m,t[8]=C,t[9]=k):k=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(E={flex:"72px"},t[10]=E):E=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(N=a.jsx(J.Item,{name:"username",label:"用户名",required:!0,rules:[{validator:(e,r)=>""!==r&&r?/^[a-zA-Z]/.test(r)?/^[a-zA-Z][a-zA-Z0-9_-]*$/.test(r)?r.length<3||r.length>20?Promise.reject(new Error("用户名长度必须在3到20位之间")):Promise.resolve():Promise.reject(new Error("用户名只能包含字母、数字、下划线或短横线")):Promise.reject(new Error("用户名必须以字母开头")):Promise.reject(new Error("请输入用户名"))}],children:a.jsx(G,{placeholder:"用户名",allowClear:!0,maxLength:20})}),t[11]=N):N=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(O=a.jsx(J.Item,{name:"nickname",label:"昵称",rules:[{validator:vr}],children:a.jsx(G,{placeholder:"昵称",maxLength:20,showCount:!0,allowClear:!0})}),t[12]=O):O=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(z=a.jsx(J.Item,{name:"sex",label:"性别",required:!0,children:a.jsx(Se,{placeholder:"性别",options:[{label:"男",value:0},{label:"女",value:1}]})}),t[13]=z):z=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(A=a.jsx(J.Item,{name:"phone",label:"手机号",rules:[{validator(e,r){if(""===r||!r)return Promise.resolve();return/^1[3-9]\d{9}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入正确的手机号码"))}}],children:a.jsx(G,{placeholder:"手机号",maxLength:11,allowClear:!0})}),t[14]=A):A=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(J.Item,{name:"birthday",label:"生日",children:a.jsx(de,{placeholder:"生日",allowClear:!0})}),t[15]=I):I=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(T=a.jsx(l,{onClick:wr,children:"取消"}),t[16]=T):T=t[16],t[17]!==h[0]?(Z=a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[T,a.jsx(l,{type:"primary",htmlType:"submit",loading:h[0],children:"确定"})]}),t[17]=h[0],t[18]=Z):Z=t[18],t[19]!==P||t[20]!==Z||t[21]!==k?(L=a.jsx(a.Fragment,{children:a.jsxs(J,{autoComplete:"off",initialValues:k,name:"edit-user-form",onFinish:P,labelCol:E,children:[N,O,z,A,I,Z]})}),t[19]=P,t[20]=Z,t[21]=k,t[22]=L):L=t[22],L});function kr(){b.hide(g)}function Er(e,r){return r?/^\d{1,6}$/.test(r)?Promise.resolve():Promise.reject(new Error("验证码只能包含数字")):Promise.reject(new Error("请输入验证码"))}function Nr(e){return null==e?void 0:e.replace(/\D/g,"")}function Or(e){return e.user.userInfo}function zr(e){return e.user.token}const Ar=e.memo(function(){const r=n.c(22),t=x(),[d]=X();let u;r[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],r[0]=u):u=r[0];const[h,p]=e.useState(u),j=f(zr),_=f(Or);let w;r[1]!==d?(w=function(){const e=d.getFieldValue("email");e&&""!==e?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)?(o(0,p),s({url:i.emailCode,data:{email:e}}).finally(()=>{c(0,p)})):m.error("请输入有效的邮箱地址"):m.error("请输入邮箱")},r[1]=d,r[2]=w):w=r[2];const v=w;let P;r[3]!==t||r[4]!==j||r[5]!==_?(P=function(e){o(1,p),s({url:i.bindEmail,data:e,token:j}).then(e=>{200===e.code&&e.data&&(S(e.data,_)||t(y(e.data)),b.hide(g))}).finally(()=>{c(1,p)})},r[3]=t,r[4]=j,r[5]=_,r[6]=P):P=r[6];const C=P;let k,E,N,O,z,A,I,T;return r[7]===Symbol.for("react.memo_cache_sentinel")?(k={flex:"72px"},r[7]=k):k=r[7],r[8]===Symbol.for("react.memo_cache_sentinel")?(E=a.jsx(J.Item,{name:"email",required:!0,className:"flex-auto",label:"新邮箱",rules:[{validator:(e,r)=>r?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(r)?Promise.resolve():Promise.reject(new Error("请输入有效的邮箱地址")):Promise.reject(new Error("请输入邮箱"))}],children:a.jsx(G,{placeholder:"邮箱",allowClear:!0,maxLength:255})}),r[8]=E):E=r[8],r[9]!==v||r[10]!==h[0]?(N=a.jsxs("div",{className:"flex gap-3 items-end",children:[E,a.jsx(l,{onClick:v,loading:h[0],className:"mb-6",children:"获取验证码"})]}),r[9]=v,r[10]=h[0],r[11]=N):N=r[11],r[12]===Symbol.for("react.memo_cache_sentinel")?(O=[{validator:Er}],r[12]=O):O=r[12],r[13]===Symbol.for("react.memo_cache_sentinel")?(z=a.jsx(J.Item,{name:"emailCode",required:!0,label:"验证码",normalize:Nr,rules:O,children:a.jsx(G,{autoComplete:"new-password",style:{width:"100%"},placeholder:"验证码",allowClear:!0,maxLength:6})}),r[13]=z):z=r[13],r[14]===Symbol.for("react.memo_cache_sentinel")?(A=a.jsx(l,{onClick:kr,children:"取消"}),r[14]=A):A=r[14],r[15]!==h[1]?(I=a.jsxs("div",{className:"flex flex-wrap justify-end gap-3",children:[A,a.jsx(l,{type:"primary",htmlType:"submit",loading:h[1],children:"确定"})]}),r[15]=h[1],r[16]=I):I=r[16],r[17]!==C||r[18]!==d||r[19]!==N||r[20]!==I?(T=a.jsx(a.Fragment,{children:a.jsxs(J,{form:d,onFinish:C,name:"user-email-form",labelCol:k,autoComplete:"off",children:[N,z,I]})}),r[17]=C,r[18]=d,r[19]=N,r[20]=I,r[21]=T):T=r[21],T});function Ir(){b.show(g,{title:"注销账户",children:a.jsx(Ur,{})})}function Tr(){b.show(g,{title:"退出登录",children:a.jsx(Dr,{})})}function Zr(){b.show(g,{title:"修改密码",children:a.jsx(_r,{}),onClosedUseTabListen:!1})}function Lr(){m.success("数据合并完成")}function Fr(){b.show(g,{title:"头像设置",children:a.jsx(jr,{}),onClosedUseTabListen:!1})}function qr(e){return e.user.userInfo}const $r=e.memo(function(){var r,t;const o=n.c(92),{pullData:s,pushData:i,getDefaultDataClear:c}=u(),d=f(qr);let h;o[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],o[0]=h):h=o[0];const[p,x]=e.useState(h);let y,_,w,v,S,k,E,N;o[1]!==d.avatar||o[2]!==d.sex?(y=(null==d?void 0:d.avatar)?P(d.avatar):1===(null==d?void 0:d.sex)?ge:_e,o[1]=d.avatar,o[2]=d.sex,o[3]=y):y=o[3],o[4]!==y?(_=a.jsx("div",{className:"p-[2px] border-dashed border rounded-full hover:border-blue-400 cursor-pointer transition-main",onClick:Fr,children:a.jsx(ie,{size:72,src:y})}),o[4]=y,o[5]=_):_=o[5],o[6]!==d.appellation||o[7]!==d.appellationStatus?(w=d.appellation&&1===d.appellationStatus?a.jsx(ue,{}):a.jsx(Pe,{}),o[6]=d.appellation,o[7]=d.appellationStatus,o[8]=w):w=o[8],o[9]!==d.appellation||o[10]!==d.appellationStatus||o[11]!==d.userType?(v=d.appellation&&1===d.appellationStatus?"volcano":null==(r=fe.find(e=>e.userType===d.userType))?void 0:r.color,o[9]=d.appellation,o[10]=d.appellationStatus,o[11]=d.userType,o[12]=v):v=o[12],o[13]!==d.appellation||o[14]!==d.appellationStatus||o[15]!==d.userType?(S=d.appellation&&1===d.appellationStatus?d.appellation:null==(t=fe.find(e=>e.userType===d.userType))?void 0:t.text,o[13]=d.appellation,o[14]=d.appellationStatus,o[15]=d.userType,o[16]=S):S=o[16],o[17]!==w||o[18]!==v||o[19]!==S?(k=a.jsx(xe,{icon:w,className:"m-0 flex items-center gap-1",color:v,children:S}),o[17]=w,o[18]=v,o[19]=S,o[20]=k):k=o[20],o[21]!==_||o[22]!==k?(E=a.jsxs("div",{className:"flex flex-col items-center m-3 gap-3",children:[_,k]}),o[21]=_,o[22]=k,o[23]=E):E=o[23],o[24]===Symbol.for("react.memo_cache_sentinel")?(N={label:{padding:"8px 16px"},content:{padding:"8px 16px",textAlign:"end"}},o[24]=N):N=o[24];const O=d.username||"-";let z;o[25]!==O?(z={label:"用户名",children:O},o[25]=O,o[26]=z):z=o[26];const A=d.nickname||"-";let I;o[27]!==A?(I={label:"昵称",children:A},o[27]=A,o[28]=I):I=o[28];const T=1===d.sex?"女":"男";let Z;o[29]!==T?(Z={label:"性别",children:T},o[29]=T,o[30]=Z):Z=o[30];const L=d.email||"-";let F;o[31]!==L?(F={label:"邮箱",children:L},o[31]=L,o[32]=F):F=o[32];const q=d.phone||"-";let $;o[33]!==q?($={label:"手机号",children:q},o[33]=q,o[34]=$):$=o[34];const D=d.birthday||"-";let U;o[35]!==D?(U={label:"生日",children:D},o[35]=D,o[36]=U):U=o[36];const R=d.registerTime||"-";let V,M,Q,Y,B,K,W,X,J,G,H,re,te;o[37]!==R?(V={label:"注册时间",children:R},o[37]=R,o[38]=V):V=o[38],o[39]!==i?(M=()=>{"1"===localStorage.getItem("focusPulling")?m.warning("数据自动同步中，请稍后再试"):i(0,x)},o[39]=i,o[40]=M):M=o[40],o[41]!==p[0]||o[42]!==M?(Q=a.jsx(l,{type:"link",size:"small",onClick:M,loading:p[0],children:"上传"}),o[41]=p[0],o[42]=M,o[43]=Q):Q=o[43],o[44]===Symbol.for("react.memo_cache_sentinel")?(Y=a.jsx(C,{type:"vertical"}),o[44]=Y):Y=o[44],o[45]!==s?(B=()=>{"1"===localStorage.getItem("focusPulling")?m.warning("数据自动同步中，请稍后再试"):s(1,x,void 0,!0)},o[45]=s,o[46]=B):B=o[46],o[47]!==p[1]||o[48]!==B?(K=a.jsx(l,{type:"link",size:"small",onClick:B,loading:p[1],children:"拉取"}),o[47]=p[1],o[48]=B,o[49]=K):K=o[49],o[50]!==Q||o[51]!==K?(W={label:"数据管理",children:a.jsxs("div",{className:"flex justify-end flex-wrap *:p-0 items-center",children:[Q,Y,K]})},o[50]=Q,o[51]=K,o[52]=W):W=o[52],o[53]!==c?(X=()=>{c(void 0,void 0,Lr,!0)},o[53]=c,o[54]=X):X=o[54],o[55]===Symbol.for("react.memo_cache_sentinel")?(J=a.jsx(l,{type:"link",size:"small",className:"p-0",children:"合并数据"}),o[55]=J):J=o[55],o[56]!==X?(G={label:"主页初始化数据",children:a.jsx(a.Fragment,{children:a.jsx(j,{title:"将与本地数据差异化合并",onConfirm:X,children:J})})},o[56]=X,o[57]=G):G=o[57],o[58]!==z||o[59]!==I||o[60]!==Z||o[61]!==F||o[62]!==$||o[63]!==U||o[64]!==V||o[65]!==W||o[66]!==G?(H=a.jsx(Ee,{bordered:!0,column:1,className:"w-full mt-6",styles:N,items:[z,I,Z,F,$,U,V,W,G]}),o[58]=z,o[59]=I,o[60]=Z,o[61]=F,o[62]=$,o[63]=U,o[64]=V,o[65]=W,o[66]=G,o[67]=H):H=o[67],o[68]===Symbol.for("react.memo_cache_sentinel")?(re=a.jsx(be,{}),o[68]=re):re=o[68],o[69]!==d.appellation||o[70]!==d.appellationStatus?(te=()=>{b.show(g,{title:a.jsxs("div",{className:"flex items-center gap-2",children:[d.appellation&&1===d.appellationStatus?"变更称号":"申请称号",a.jsxs(xe,{color:0===d.appellationStatus?"":1===d.appellationStatus?"green":"red",icon:0===d.appellationStatus?a.jsx(Ce,{}):1===d.appellationStatus?a.jsx(he,{}):a.jsx(Ae,{}),children:["称号状态：",0===d.appellationStatus?d.appellation?"申请中":"待申请":1===d.appellationStatus?"已荣获":"被拒绝"]})]}),children:a.jsx(cr,{}),onClosedUseTabListen:!1})},o[69]=d.appellation,o[70]=d.appellationStatus,o[71]=te):te=o[71];const ne=0===d.appellationStatus?d.appellation?"称号管理":"申请称号":1===d.appellationStatus?"变更称号":"重新申请";let ae,le,oe,se,ce,me,de,je,ye,we;return o[72]!==te||o[73]!==ne?(ae=a.jsx(l,{icon:re,onClick:te,children:ne}),o[72]=te,o[73]=ne,o[74]=ae):ae=o[74],o[75]===Symbol.for("react.memo_cache_sentinel")?(le=a.jsx(Ne,{}),o[75]=le):le=o[75],o[76]!==d?(oe=a.jsx(l,{icon:le,onClick:()=>{b.show(g,{title:"更新资料",children:a.jsx(Cr,{initialValues:d}),onClosedUseTabListen:!1})},children:"更新资料"}),o[76]=d,o[77]=oe):oe=o[77],o[78]===Symbol.for("react.memo_cache_sentinel")?(se=a.jsx(l,{icon:a.jsx(Ue,{}),onClick:Zr,children:"修改密码"}),o[78]=se):se=o[78],o[79]===Symbol.for("react.memo_cache_sentinel")?(ce=a.jsx(ee,{}),o[79]=ce):ce=o[79],o[80]!==d.email?(me=a.jsx(l,{icon:ce,onClick:()=>{b.show(g,{title:`绑定邮箱（原邮箱：${d.email||"无"}）`,children:a.jsx(Ar,{}),onClosedUseTabListen:!1})},children:"绑定邮箱"}),o[80]=d.email,o[81]=me):me=o[81],o[82]===Symbol.for("react.memo_cache_sentinel")?(de=a.jsx(l,{icon:a.jsx(pe,{}),danger:!0,onClick:Tr,children:"退出登录"}),o[82]=de):de=o[82],o[83]===Symbol.for("react.memo_cache_sentinel")?(je=a.jsx(l,{icon:a.jsx(Xe,{}),type:"text",danger:!0,size:"small",className:"text-xs",onClick:Ir,children:"注销账户？请慎重操作！"}),o[83]=je):je=o[83],o[84]!==ae||o[85]!==oe||o[86]!==me?(ye=a.jsxs("div",{className:"flex flex-col mt-6 gap-3",children:[ae,oe,se,me,de,je]}),o[84]=ae,o[85]=oe,o[86]=me,o[87]=ye):ye=o[87],o[88]!==H||o[89]!==ye||o[90]!==E?(we=a.jsxs(a.Fragment,{children:[E,H,ye]}),o[88]=H,o[89]=ye,o[90]=E,o[91]=we):we=o[91],we}),Dr=()=>{const r=n.c(14),t=x(),{getDefaultDataClear:o}=u(),s=f(Rr),[c,d]=e.useState(!1);let h;r[0]!==c||r[1]!==t||r[2]!==o||r[3]!==s?(h=function(){if(t(N("")),t(y({})),t(O(!1)),I({url:i.logout,token:s}),m.success("退出成功"),b.hide(g),z||(b.hide(je),b.hide(we)),c||!z){o(10,void 0,e=>{T(e)&&(t(Z()),t(L()),t(F()),t(q()),t($()),t(D()),t(U()),t(R()),t(V()),t(M()),t(Q()),t(Y()),t(B()),t(K()))}),W();const e=k.getState().stateUtils.mySwiper;if(e){k.getState().swiper.loop?null==e||e.slideToLoop(0):null==e||e.slideTo(0)}}},r[0]=c,r[1]=t,r[2]=o,r[3]=s,r[4]=h):h=r[4];const j=h;let _,w,v,S,P;return r[5]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsx(p,{message:"退出后将停止在不同设备或浏览器间同步数据。",type:"error",showIcon:!0,banner:!0,icon:a.jsx(A,{}),className:"rounded-md"}),r[5]=_):_=r[5],r[6]!==c?(w=z&&a.jsxs("div",{className:"flex gap-2 items-center pointer-events-auto cursor-pointer w-fit",onClick:()=>{d(!c)},children:[a.jsx(ke,{checked:c,className:"pointer-events-none"}),a.jsx("p",{children:"退出清空本地数据"})]}),r[6]=c,r[7]=w):w=r[7],r[8]===Symbol.for("react.memo_cache_sentinel")?(v=a.jsx(l,{onClick:Vr,children:"取消"}),r[8]=v):v=r[8],r[9]!==j?(S=a.jsxs("div",{className:"flex gap-3 justify-end",children:[v,a.jsx(l,{danger:!0,type:"primary",onClick:j,children:"确定"})]}),r[9]=j,r[10]=S):S=r[10],r[11]!==w||r[12]!==S?(P=a.jsxs("div",{className:"flex flex-col gap-4",children:[_,w,S]}),r[11]=w,r[12]=S,r[13]=P):P=r[13],P},Ur=()=>{const r=n.c(7),t=x(),[o,s]=e.useState(!1);let c;r[0]!==t?(c=function(){s(!0);const e=k.getState().user.token;E({url:i.logOff,token:e}).then(e=>{200===e.code&&(t(N("")),t(y({})),t(O(!1)),b.hide(g),z||(b.hide(je),b.hide(we)))}).finally(()=>{s(!1)})},r[0]=t,r[1]=c):c=r[1];const m=c;let d,u,f;return r[2]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsx(p,{message:"是否确认注销账户？注销后账户数据将被完全清理，请您慎重操作，如有问题，欢迎联系管理员！",type:"error",showIcon:!0,banner:!0,icon:a.jsx(A,{}),className:"rounded-md"}),r[2]=d):d=r[2],r[3]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(l,{onClick:Mr,children:"取消"}),r[3]=u):u=r[3],r[4]!==o||r[5]!==m?(f=a.jsxs("div",{className:"flex flex-col gap-4",children:[d,a.jsxs("div",{className:"flex gap-3 justify-end",children:[u,a.jsx(l,{danger:!0,type:"primary",onClick:m,loading:o,children:"确定"})]})]}),r[4]=o,r[5]=m,r[6]=f):f=r[6],f};function Rr(e){return e.user.token}function Vr(){b.hide(g)}function Mr(){b.hide(g)}function Qr(){const r=n.c(11),t=x(),l=f(Kr),o=f(Br),s=f(Yr);let c;r[0]!==t||r[1]!==l||r[2]!==o?(c=function(){I({url:i.getUserInfo,token:l}).then(e=>{200===e.code&&e.data&&(S(e.data,o)||t(y(e.data)))})},r[0]=t,r[1]=l,r[2]=o,r[3]=c):c=r[3];const m=c;let d,u,h;return r[4]!==m||r[5]!==l?(d=()=>{l&&m()},r[4]=m,r[5]=l,r[6]=d):d=r[6],r[7]===Symbol.for("react.memo_cache_sentinel")?(u=[],r[7]=u):u=r[7],e.useEffect(d,u),r[8]!==s||r[9]!==l?(h=a.jsx("div",{className:"p-6",children:l?s?a.jsx(lr,{}):a.jsx($r,{}):a.jsx(nr,{})}),r[8]=s,r[9]=l,r[10]=h):h=r[10],h}function Yr(e){return e.user.isSettingDefaultData}function Br(e){return e.user.userInfo}function Kr(e){return e.user.token}export{Qr as default};
