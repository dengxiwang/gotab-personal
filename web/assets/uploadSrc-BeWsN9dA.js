import{c as e,r as t,j as r,B as s,F as i,o,k as l,l as n,a,n as c,v as m,a5 as d,Y as f}from"./requestIdleCallbackPolyfill-CPe9lTcM.js";import{I as p}from"./assets-B8Bi78Vh.js";import{u as h}from"./useFresh-B4NNdaER.js";import{r as j}from"./transformData-CKPSW77P.js";import{M as u,R as x}from"./myTable-DqOepQDp.js";import{C as y}from"./contentLayout-DS5K_zbp.js";import{F as b}from"./index-CNjKVAUo.js";import{I as _}from"./index-DSLgkNIi.js";import{R as k,a as w}from"./SearchOutlined-TAPHIrkP.js";import{T as g}from"./index-BhwolGP3.js";import{R as S}from"./UserOutlined-khYKPFdf.js";import{I as C}from"./index-H5vT6yOi.js";import{R as F}from"./MailOutlined-BWjHQnOt.js";import"./index-DrLdoldb.js";import"./Overflow-DzHFI1dW.js";import"./getAllowClear-C7x5Ty1a.js";import"./Input-eJls-qed.js";import"./MoneyCollectOutlined-BimJI-5s.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-BMDWT7zy.js";import"./styleChecker-CS8iJfqg.js";import"./AlipayOutlined-kRmwWEYR.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-CQXTZWaW.js";import"./index-BdbaD8Fj.js";import"./useBreakpoint-DNPDEdTQ.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-BEfeEYtU.js";import"./row-Dt3IKLYa.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-vRztATkp.js";import"./LeftOutlined-D9Sp279J.js";function O(){const l=e.c(42),{key:n,refresh:a}=h(),[c]=b.useForm();let m;l[0]===Symbol.for("react.memo_cache_sentinel")?(m={},l[0]=m):m=l[0];const[d,f]=t.useState(m);let p,x,g,S,C,F,O,N;l[1]===Symbol.for("react.memo_cache_sentinel")?(p={title:"用户",key:"username",width:160,fixed:"left",render:B},x={title:"预览",key:"filePath",width:200,className:"flex-center",render:v},g={title:"资源类型",key:"srcType",width:120,render:T},S={title:"文件类型",key:"fileType",width:120},C={title:"文件大小",key:"fileSize",width:120,render:P},F={title:"文件地址",key:"filePath",width:420,render:I},O={type:"time",title:"上传时间",key:"createdTime",width:200},l[1]=p,l[2]=x,l[3]=g,l[4]=S,l[5]=C,l[6]=F,l[7]=O):(p=l[1],x=l[2],g=l[3],S=l[4],C=l[5],F=l[6],O=l[7]),l[8]!==a?(N=[p,x,g,S,C,F,O,{title:"操作",fixed:"right",width:120,render:(e,t)=>r.jsx(M,{record:t,refresh:a})}],l[8]=a,l[9]=N):N=l[9];const A=N;let z,R,U,$,L,K,Q,Y,q,D,G,H,V,W,Z,E;return l[10]!==c?(z=()=>{const e=c.getFieldsValue();e[Math.random()]=!0,f(j(e))},l[10]=c,l[11]=z):z=l[11],l[12]===Symbol.for("react.memo_cache_sentinel")?(R={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},l[12]=R):R=l[12],l[13]===Symbol.for("react.memo_cache_sentinel")?(U=r.jsx(b.Item,{name:"username",children:r.jsx(_,{placeholder:"用户名"})}),l[13]=U):U=l[13],l[14]===Symbol.for("react.memo_cache_sentinel")?($=r.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:R,children:[U,r.jsx(b.Item,{name:"filePath",children:r.jsx(_,{placeholder:"文件地址"})})]}),l[14]=$):$=l[14],l[15]!==c?(L=()=>{c.submit()},l[15]=c,l[16]=L):L=l[16],l[17]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(k,{}),l[17]=K):K=l[17],l[18]!==L?(Q=r.jsx(s,{type:"primary",onClick:L,icon:K,children:"查询"}),l[18]=L,l[19]=Q):Q=l[19],l[20]!==c?(Y=()=>{c.resetFields();const e={};e[Math.random()]=!0,f(e)},l[20]=c,l[21]=Y):Y=l[21],l[22]===Symbol.for("react.memo_cache_sentinel")?(q=r.jsx(w,{}),l[22]=q):q=l[22],l[23]!==Y?(D=r.jsx(s,{onClick:Y,icon:q,children:"重置"}),l[23]=Y,l[24]=D):D=l[24],l[25]!==Q||l[26]!==D?(G=r.jsxs("div",{className:"flex flex-wrap gap-3",children:[Q,D]}),l[25]=Q,l[26]=D,l[27]=G):G=l[27],l[28]!==c||l[29]!==G||l[30]!==z?(H=r.jsxs(b,{className:"w-full",form:c,onFinish:z,children:[$,G]}),l[28]=c,l[29]=G,l[30]=z,l[31]=H):H=l[31],l[32]===Symbol.for("react.memo_cache_sentinel")?(V=r.jsx(i,{className:"my-3"}),l[32]=V):V=l[32],l[33]!==d?(W={searchParams:d},l[33]=d,l[34]=W):W=l[34],l[35]!==A||l[36]!==n||l[37]!==W?(Z=r.jsx(u,{columns:A,getListUrl:o.getUploadSrcList,dataKey:"data.list",tableKey:n,params:W}),l[35]=A,l[36]=n,l[37]=W,l[38]=Z):Z=l[38],l[39]!==H||l[40]!==Z?(E=r.jsxs(y,{children:[H,V,Z]}),l[39]=H,l[40]=Z,l[41]=E):E=l[41],E}function I(e){return r.jsx(g,{color:"blue",onClick:()=>{e&&window.open(l(e),"_blank")},className:"cursor-pointer",icon:r.jsx(F,{}),children:e||"-"})}function P(e){return r.jsx("span",{children:e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(2)}KB`:e<1073741824?`${(e/1024/1024).toFixed(2)}MB`:`${(e/1024/1024/1024).toFixed(2)}GB`})}function T(e){return r.jsx(g,{color:0===e?"blue":1===e?"green":2===e?"purple":3===e?"cyan":4===e?"red":5===e?"orange":6===e?"magenta":"volcano",children:0===e?"其他图片":1===e?"头像":2===e?"静态壁纸":3===e?"动态壁纸":4===e?"上传的图标":5===e?"自动获取的图标":6===e?"资源库的图标":e})}function v(e){return r.jsx(C,{src:l(e),height:48,fallback:p,loading:"lazy"})}function B(e,t){return r.jsx(g,{color:e||"0"===t.userId?"geekblue":"red",bordered:!1,icon:r.jsx(S,{}),children:e||("0"===t.userId?"游客":"已注销")})}const M=t.memo((i=>{const p=e.c(20),{record:h,refresh:j}=i;let u;p[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],p[0]=u):u=p[0];const[y,b]=t.useState(u);let _;p[1]!==h.id||p[2]!==j?(_=function(){n(1,b);const e=a.getState().user.token;setTimeout((()=>{c({url:o.deleteUploadSrc,token:e,data:{ids:[h.id]}}).then((e=>{200===e.code&&j()})).finally((()=>{m(1,b)}))}),500)},p[1]=h.id,p[2]=j,p[3]=_):_=p[3];const k=_;let w;p[4]===Symbol.for("react.memo_cache_sentinel")?(w=function(e){fetch(l(e),{headers:new Headers({Authorization:"Bearer "+a.getState().user.token})}).then(N).then((t=>{d.saveAs(t,e.split("/").pop()||"file")})).catch(A)},p[4]=w):w=p[4];const g=w;let S,C,F,O,I,P,T;return p[5]===Symbol.for("react.memo_cache_sentinel")?(S={width:"44px"},p[5]=S):S=p[5],p[6]!==h.filePath?(C=r.jsx(s,{type:"link",size:"small",style:S,onClick:()=>{g(h.filePath)},children:"下载"}),p[6]=h.filePath,p[7]=C):C=p[7],p[8]===Symbol.for("react.memo_cache_sentinel")?(F={width:"44px"},p[8]=F):F=p[8],p[9]!==y[1]?(O=y[1]?r.jsx(x,{}):"删除",p[9]=y[1],p[10]=O):O=p[10],p[11]!==y[1]||p[12]!==O?(I=r.jsx(s,{danger:!0,type:"link",size:"small",disabled:y[1],style:F,children:O}),p[11]=y[1],p[12]=O,p[13]=I):I=p[13],p[14]!==k||p[15]!==I?(P=r.jsx(f,{title:"是否删除附件？",onConfirm:k,children:I}),p[14]=k,p[15]=I,p[16]=P):P=p[16],p[17]!==C||p[18]!==P?(T=r.jsxs("div",{className:"flex flex-wrap",children:[C,P]}),p[17]=C,p[18]=P,p[19]=T):T=p[19],T}));function N(e){return e.blob()}function A(){return alert("文件下载失败")}export{O as default};
