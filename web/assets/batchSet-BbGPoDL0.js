import{u as e,h as t,r as i,j as s,cv as r,Q as n,B as o,Z as a,g6 as l,C as m,m as c,g7 as d,g8 as u,g9 as p,y as j,ga as h,V as x,bX as g,z as f,gb as b}from"./requestIdleCallbackPolyfill-DuXR6Mmk.js";import{l as C,M as y}from"./homePage-BMwq1FXb.js";import{k as v,j as w}from"./sortableJsUtils-DI3fcbTj.js";import{R as k}from"./QuestionCircleOutlined-BiPPkPpK.js";import{C as D}from"./useFresh-Do_Ws6bQ.js";import{S}from"./index-COg7AUHb.js";import{C as F}from"./ColorPicker-Byf6q6el.js";import"./fullSpin-Bu9E-UgA.js";import"./index-BR_vpJNT.js";import"./myDrawer2-tklTaCYh.js";import"./handleButton-Cvl2vIli.js";import"./myModal-BvN7GT0N.js";import"./submitForInclusion-_XyO0pW_.js";import"./index-BMudaHuW.js";import"./row-BxBkKylz.js";import"./useBreakpoint-BLWHdwqk.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-BrsrGf5j.js";import"./getAllowClear-BFzTGu2W.js";import"./Input-DeCKxNbM.js";import"./TextArea-Cr0GXhmp.js";import"./CloudUploadOutlined-Clxird1Z.js";import"./index-CsFfv6FV.js";import"./assets-B8Bi78Vh.js";import"./iconBase-DcT7EL5-.js";import"./index-CBlsidtm.js";import"./MailOutlined-kR6rLhHd.js";import"./Overflow-BhMs7XL1.js";import"./index-mmVZs6--.js";import"./LeftOutlined-D9Sp279J.js";import"./PlusOutlined-BYc4BpPG.js";import"./SearchOutlined-CzyPD-25.js";import"./spinLoading-B6-A3G_X.js";import"./LikeFilled-BjB1_RYz.js";import"./index-ffXlViMr.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-DDnMjEWA.js";import"./styleChecker-Dktf464x.js";import"./sortable.esm-BbtDOPOV.js";import"./addRecommendAppForm-GN59AeeH.js";import"./UserOutlined-CwFVHM6E.js";import"./markdownContent-fUeTi6R3.js";import"./index-CeCo6Hjn.js";import"./index-CqnYxUI_.js";function O(){const O=e(),T=t((e=>e.appData.listData)),M=t((e=>e.appData.freeDragListData)),P=t((e=>e.home.showFreeDrag)),$=t((e=>e.home.freeDragGridX)),I=t((e=>e.home.freeDragGridY)),R=t((e=>e.card.gridColumnWidth)),B=t((e=>e.card.gridRowHeight)),G=t((e=>e.card.columnGap)),L=t((e=>e.card.rowGap)),[Q,U]=i.useState("icon"),[z,H]=i.useState("11"),[W,A]=i.useState("#ffffff"),[N,X]=i.useState("#000000"),[q,V]=i.useState([]),[Y,E]=i.useState(0),J=[{label:"展示样式",content:s.jsx(s.Fragment,{children:s.jsx(S,{value:Q,onChange:e=>{U(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片展示样式",options:[{label:"纯图",value:"icon"},{label:"文本",value:"text"},{label:"横版",value:"icon-h"},{label:"竖版",value:"icon-v"}]})})},{label:"卡片大小",content:s.jsx(s.Fragment,{children:s.jsx(S,{value:z,onChange:e=>{H(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片尺寸大小",options:C})})},{label:"背景颜色",content:s.jsx(s.Fragment,{children:s.jsx(F,{showText:!0,value:W,onChange:e=>{A(e.toHexString())}})})},{label:"文字颜色",content:s.jsx(s.Fragment,{children:s.jsx(F,{showText:!0,value:N,onChange:e=>{X(e.toHexString())}})})},{label:`图标间距（${Y}px）`,content:s.jsx(s.Fragment,{children:s.jsx(y,{value:Y,min:0,max:48,onChange:e=>{E(e)}})})}],[K,Z]=i.useState(!1);const _=i.useRef(null);i.useEffect((()=>()=>{_.current&&(clearTimeout(_.current),_.current=null)}),[]);const ee=[{label:"卡片内字体颜色(非卡片名称）",content:s.jsx(s.Fragment,{children:s.jsx(a,{title:"是否确认调整",onConfirm:()=>{const e=l(T);O(m(e[0])),c.success(`成功调整了${e[1]}个字体颜色`)},children:s.jsx(o,{type:"link",children:"调整"})})})},{label:"移除相同ID、空文件夹",content:s.jsx(s.Fragment,{children:s.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=d(T),t=v(u(p(j(T)))),i=d(t);O(m(t)),c.success(`成功移除了${e-i}个数据`)},children:s.jsx(o,{type:"link",children:"移除"})})})},{label:"更新ID为文本类型",content:s.jsx(a,{icon:s.jsx(x,{style:{color:"blue"}}),title:"该更新有利无害",onConfirm:()=>{const e=h(j(T));O(m(e[0])),c.success(`成功移除了${e[1]}个数据ID`)},children:s.jsx(o,{type:"link",children:"更新"})})},{label:"移除所有空白占位卡片",content:s.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=j(T),t=g(e);O(m(t[0])),c.success(`成功移除了${t[1]}个空白占位卡片`)},children:s.jsx(o,{type:"link",children:"移除"})})},{label:"整理全屏自由拖拽",content:s.jsx(a,{title:"是否确认整理",onConfirm:()=>{if(!P)return void c.error("整理失败，全屏自由拖拽布局未启用");const e=window.innerWidth,t=window.innerHeight,i=j(M).map((i=>{const s=Math.round(i.x/$)*$,r=Math.round(i.y/I)*I,n=w(i.size,R,B,L,G),o=e-n.width,a=t-n.height,l=Math.min(o,s),m=Math.min(a,r);return{...i,x:l,y:m}}));c.success("整理完成"),O(f(i))},children:s.jsx(o,{type:"link",children:"整理"})})}];return s.jsxs(s.Fragment,{children:[s.jsx(r,{items:ee,groupTitle:"一键优化",gap:20,bottomDivider:!0}),s.jsx(r,{items:J,groupTitle:"手动控制",gap:20,bottomDivider:!0}),s.jsx(n,{message:"请在下方选择需要调整的参数",banner:!0,type:"info",icon:s.jsx(k,{}),className:"mb-5 rounded-md"}),s.jsx(D.Group,{options:[{label:"展示样式",value:"showType"},{label:"卡片大小",value:"size"},{label:"背景颜色",value:"bgColor"},{label:"文字颜色",value:"textColor"},{label:"图标间距",value:"iconPadding"}],className:"mb-6",value:q,onChange:e=>{V(e)}}),s.jsx(o,{type:"primary",onClick:function(){q.length<=0?c.error("请选择确认调整的参数信息"):(Z(!0),_.current&&clearTimeout(_.current),_.current=setTimeout((async()=>{try{const e=await async function(e,t,i){return new Promise(((s,r)=>{try{s(b(e,t,i))}catch(n){r(n)}}))}(T,q,{linkCardBgColor:W,linkCardShowType:Q,linkCardSize:z,linkCardTextColor:N,imgPaddingNum:Y});O(m(e[0])),c.success(`成功调整了${e[1]}个链接卡片`)}catch(e){c.error("调整链接卡片时发生错误")}finally{Z(!1)}}),500))},loading:K,children:"调整卡片"})]})}export{O as default};
