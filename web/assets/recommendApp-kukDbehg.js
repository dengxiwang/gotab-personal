import{c as e,j as t,r as i,B as s,Q as r,F as o,o as l,a as n,l as a,n as m,v as c,Z as d}from"./requestIdleCallbackPolyfill-D8B_BKnT.js";import{u as p}from"./useFresh-BUuBr55E.js";import{M as j,R as u}from"./myTable-Bw5nZYMM.js";import{C as h}from"./contentLayout-Cec8vBj1.js";import{R as f}from"./ReloadOutlined-CuNj8-CB.js";import{R as x}from"./QuestionCircleOutlined-DhOL6WUE.js";import{I as y}from"./index-DnSEZuBE.js";import{T as k}from"./index-BCDvAev9.js";import{R as w}from"./UserOutlined-BslMzFSD.js";import"./index-CI9JbC4F.js";import"./MailOutlined-R82Bt56K.js";import"./Overflow-BfGTIhT_.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-D4WtNhOo.js";import"./getAllowClear-CQLKcf9H.js";import"./Input-D9mDpepV.js";import"./transformData-I6KNoMyM.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-BSdsMMzq.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-CWgDWLMJ.js";import"./styleChecker-DVoz1gP1.js";import"./AlipayOutlined-wNzKHUw3.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-wRQlRSG9.js";import"./index-Cygrp0aV.js";import"./ReloadOutlined-B00s2TmV.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./LeftOutlined-D9Sp279J.js";function g(){const i=e.c(21),{key:n,refresh:a}=p();let m,c,d,u,y,k,w,g;i[0]===Symbol.for("react.memo_cache_sentinel")?(m={title:"应用标题",key:"title",width:160,fixed:"left"},c={title:"应用描述",key:"description",width:460},d={title:"图标",key:"icon",width:100,render:O},u={title:"链接",key:"link",width:120,render:C},y={title:"标签",width:120,render:_},k={title:"提交人",key:"username",width:160,render:b},w={type:"time",title:"提交时间",key:"createdTime",width:200},i[0]=m,i[1]=c,i[2]=d,i[3]=u,i[4]=y,i[5]=k,i[6]=w):(m=i[0],c=i[1],d=i[2],u=i[3],y=i[4],k=i[5],w=i[6]),i[7]!==a?(g=[m,c,d,u,y,k,w,{title:"操作",fixed:"right",width:180,render:(e,i)=>t.jsx(S,{record:i,refresh:a})}],i[7]=a,i[8]=g):g=i[8];const R=g;let A,v,N,T,Q,z,L;return i[9]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(f,{}),i[9]=A):A=i[9],i[10]!==a?(v=t.jsx(s,{type:"primary",icon:A,onClick:()=>{a()},children:"刷新列表"}),i[10]=a,i[11]=v):v=i[11],i[12]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(r,{type:"warning",description:t.jsxs(t.Fragment,{children:[t.jsx(x,{className:"mr-1"}),"应用推荐将展示在 “ 每日宝藏 ” 中，服务端设置了 5 分钟缓存，如需查看最新的 “ 每日宝藏 ” 列表，请等待缓存失效或重启服务"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),T=t.jsx(o,{className:"my-3"}),i[12]=N,i[13]=T):(N=i[12],T=i[13]),i[14]===Symbol.for("react.memo_cache_sentinel")?(Q={searchParams:{status:0}},i[14]=Q):Q=i[14],i[15]!==R||i[16]!==n?(z=t.jsx(j,{columns:R,getListUrl:l.getAwaitingApprovalRecommendAppList,dataKey:"data.list",tableKey:n,params:Q}),i[15]=R,i[16]=n,i[17]=z):z=i[17],i[18]!==z||i[19]!==v?(L=t.jsxs(h,{children:[v,N,T,z]}),i[18]=z,i[19]=v,i[20]=L):L=i[20],L}function b(e){return t.jsx(k,{color:e?"geekblue":"red",bordered:!1,icon:t.jsx(w,{}),children:e||"已注销"})}function _(e,i){return t.jsx(k,{color:i.tagColor,children:i.tagText||"-"})}function C(e){return t.jsx(s,{type:"link",size:"small",onClick:()=>{e&&window.open(e,"_blank")},children:e||"-"})}function O(e,i){return e?t.jsx(y,{src:e,width:"auto",height:32,className:"p-2 rounded-lg",style:{backgroundColor:i.iconBackground},preview:{maskClassName:"rounded-lg"}}):"-"}const S=i.memo(r=>{const o=e.c(42),{record:p,refresh:j}=r;let h;o[0]===Symbol.for("react.memo_cache_sentinel")?(h=[],o[0]=h):h=o[0];const[f,x]=i.useState(h);let y;o[1]!==p||o[2]!==j?(y=function(){const e=n.getState().user.token;a(0,x),setTimeout(()=>{m({url:l.approveRecommendApp,token:e,data:{id:p.id}}).then(e=>{200===e.code&&j()}).finally(()=>{c(0,x)})},500)},o[1]=p,o[2]=j,o[3]=y):y=o[3];const k=y;let w;o[4]!==p||o[5]!==j?(w=function(e,t){a(t,x);const i=n.getState().user.token;setTimeout(()=>{m({url:"reject"===e?l.rejectRecommendApp:l.deleteRecommendApp,token:i,data:{id:p.id}}).then(e=>{200===e.code&&j()}).finally(()=>{c(t,x)})},500)},o[4]=p,o[5]=j,o[6]=w):w=o[6];const g=w;let b,_,C,O,S;o[7]===Symbol.for("react.memo_cache_sentinel")?(b={width:"44px"},o[7]=b):b=o[7],o[8]!==f[0]?(_=f[0]?t.jsx(u,{}):"通过",o[8]=f[0],o[9]=_):_=o[9],o[10]!==f[0]||o[11]!==_?(C=t.jsx(s,{type:"link",size:"small",disabled:f[0],style:b,children:_}),o[10]=f[0],o[11]=_,o[12]=C):C=o[12],o[13]!==k||o[14]!==C?(O=t.jsx(d,{title:"是否确认审核通过？",onConfirm:k,children:C}),o[13]=k,o[14]=C,o[15]=O):O=o[15],o[16]!==g?(S=()=>{g("reject",1)},o[16]=g,o[17]=S):S=o[17];const R=f[1]||f[2];let A,v,N,T,Q;o[18]===Symbol.for("react.memo_cache_sentinel")?(A={width:"44px"},o[18]=A):A=o[18],o[19]!==f[1]?(v=f[1]?t.jsx(u,{}):"驳回",o[19]=f[1],o[20]=v):v=o[20],o[21]!==v||o[22]!==R?(N=t.jsx(s,{danger:!0,type:"link",size:"small",disabled:R,style:A,children:v}),o[21]=v,o[22]=R,o[23]=N):N=o[23],o[24]!==N||o[25]!==S?(T=t.jsx(d,{title:"是否确认驳回申请",onConfirm:S,children:N}),o[24]=N,o[25]=S,o[26]=T):T=o[26],o[27]!==g?(Q=()=>{g("delete",2)},o[27]=g,o[28]=Q):Q=o[28];const z=f[1]||f[2];let L,M,B,F,I;return o[29]===Symbol.for("react.memo_cache_sentinel")?(L={width:"44px"},o[29]=L):L=o[29],o[30]!==f[2]?(M=f[2]?t.jsx(u,{}):"删除",o[30]=f[2],o[31]=M):M=o[31],o[32]!==z||o[33]!==M?(B=t.jsx(s,{danger:!0,type:"link",size:"small",disabled:z,style:L,children:M}),o[32]=z,o[33]=M,o[34]=B):B=o[34],o[35]!==Q||o[36]!==B?(F=t.jsx(d,{title:"是否确认删除该申请？",onConfirm:Q,children:B}),o[35]=Q,o[36]=B,o[37]=F):F=o[37],o[38]!==T||o[39]!==F||o[40]!==O?(I=t.jsxs("div",{className:"flex flex-wrap",children:[O,T,F]}),o[38]=T,o[39]=F,o[40]=O,o[41]=I):I=o[41],I});export{g as default};
