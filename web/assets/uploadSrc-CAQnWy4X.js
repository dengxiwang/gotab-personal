import{x as e,e as t,j as r,B as s,ao as i,ah as o,ad as l,af as a,a0 as n,ag as m,aj as c,aD as d}from"./requestIdleCallbackPolyfill-CT2Uunzs.js";import{I as f}from"./assets-CmvcfQKP.js";import{u as p}from"./useFresh-CGeh22C4.js";import{r as h}from"./transformData-D5arJeXA.js";import{M as j,R as u}from"./myTable-DFZSMHtZ.js";import{C as x}from"./contentLayout-odUVCfUr.js";import{F as y}from"./index-B5l_nge6.js";import{I as b}from"./index-Dgw5cqVQ.js";import{R as _,a as k}from"./SearchOutlined-CCB0jfzY.js";import{T as w}from"./index-f4najWpg.js";import{R as g}from"./UserOutlined-HtHoo4Ia.js";import{I as S}from"./index-BbIXSvcQ.js";import{R as C}from"./MailOutlined-G-2gGlXX.js";import{P as O}from"./main-DyIzdR1k.js";import"./index-C1J7OQZZ.js";import"./Overflow-Dd87tN43.js";import"./getAllowClear-BfnEnRnP.js";import"./Input-BiSwrENd.js";import"./MoneyCollectOutlined-DlFUXkT9.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-DcBGJWNw.js";import"./styleChecker-Cxx79Q8k.js";import"./AlipayOutlined-OZZKbO3G.js";import"./AlipayOutlined-tZM3mGx9.js";import"./index-CESJ98W-.js";import"./index-C2t7G4dJ.js";import"./useBreakpoint-DKl-R_5q.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-kmb97xVR.js";import"./row-DFvObsCi.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-CCBBim-V.js";import"./LeftOutlined-D9Sp279J.js";function F(){const l=e.c(42),{key:a,refresh:n}=p(),[m]=y.useForm();let c;l[0]===Symbol.for("react.memo_cache_sentinel")?(c={},l[0]=c):c=l[0];const[d,f]=t.useState(c);let u,w,g,S,C,O,F,v;l[1]===Symbol.for("react.memo_cache_sentinel")?(u={title:"用户",key:"username",width:160,fixed:"left",render:M},w={title:"预览",key:"filePath",width:200,className:"flex-center",render:B},g={title:"资源类型",key:"srcType",width:120,render:T},S={title:"文件类型",key:"fileType",width:120},C={title:"文件大小",key:"fileSize",width:120,render:P},O={title:"文件地址",key:"filePath",width:420,render:I},F={type:"time",title:"上传时间",key:"createdTime",width:200},l[1]=u,l[2]=w,l[3]=g,l[4]=S,l[5]=C,l[6]=O,l[7]=F):(u=l[1],w=l[2],g=l[3],S=l[4],C=l[5],O=l[6],F=l[7]),l[8]!==n?(v=[u,w,g,S,C,O,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>r.jsx(N,{record:t,refresh:n})}],l[8]=n,l[9]=v):v=l[9];const A=v;let z,L,R,U,$,K,D,G,H,Q,V,q,E,J,X,Y;return l[10]!==m?(z=()=>{const e=m.getFieldsValue();e[Math.random()]=!0,f(h(e))},l[10]=m,l[11]=z):z=l[11],l[12]===Symbol.for("react.memo_cache_sentinel")?(L={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},l[12]=L):L=l[12],l[13]===Symbol.for("react.memo_cache_sentinel")?(R=r.jsx(y.Item,{name:"username",children:r.jsx(b,{placeholder:"用户名"})}),l[13]=R):R=l[13],l[14]===Symbol.for("react.memo_cache_sentinel")?(U=r.jsxs("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:L,children:[R,r.jsx(y.Item,{name:"filePath",children:r.jsx(b,{placeholder:"文件地址"})})]}),l[14]=U):U=l[14],l[15]!==m?($=()=>{m.submit()},l[15]=m,l[16]=$):$=l[16],l[17]===Symbol.for("react.memo_cache_sentinel")?(K=r.jsx(_,{}),l[17]=K):K=l[17],l[18]!==$?(D=r.jsx(s,{type:"primary",onClick:$,icon:K,children:"查询"}),l[18]=$,l[19]=D):D=l[19],l[20]!==m?(G=()=>{m.resetFields();const e={};e[Math.random()]=!0,f(e)},l[20]=m,l[21]=G):G=l[21],l[22]===Symbol.for("react.memo_cache_sentinel")?(H=r.jsx(k,{}),l[22]=H):H=l[22],l[23]!==G?(Q=r.jsx(s,{onClick:G,icon:H,children:"重置"}),l[23]=G,l[24]=Q):Q=l[24],l[25]!==D||l[26]!==Q?(V=r.jsxs("div",{className:"flex flex-wrap gap-3",children:[D,Q]}),l[25]=D,l[26]=Q,l[27]=V):V=l[27],l[28]!==m||l[29]!==V||l[30]!==z?(q=r.jsxs(y,{className:"w-full",form:m,onFinish:z,children:[U,V]}),l[28]=m,l[29]=V,l[30]=z,l[31]=q):q=l[31],l[32]===Symbol.for("react.memo_cache_sentinel")?(E=r.jsx(i,{className:"my-3"}),l[32]=E):E=l[32],l[33]!==d?(J={searchParams:d},l[33]=d,l[34]=J):J=l[34],l[35]!==A||l[36]!==a||l[37]!==J?(X=r.jsx(j,{columns:A,getListUrl:o.getUploadSrcList,dataKey:"data.list",tableKey:a,params:J}),l[35]=A,l[36]=a,l[37]=J,l[38]=X):X=l[38],l[39]!==q||l[40]!==X?(Y=r.jsxs(x,{children:[q,E,X]}),l[39]=q,l[40]=X,l[41]=Y):Y=l[41],Y}function I(e){return r.jsx(w,{color:"blue",onClick:()=>{e&&window.open(l(e),"_blank")},className:"cursor-pointer",icon:r.jsx(C,{}),children:e||"-"})}function P(e){return r.jsx("span",{children:e<1024?`${e}B`:e<1048576?`${(e/1024).toFixed(2)}KB`:e<1073741824?`${(e/1024/1024).toFixed(2)}MB`:`${(e/1024/1024/1024).toFixed(2)}GB`})}function T(e){return r.jsx(w,{color:0===e?"blue":1===e?"green":2===e?"purple":3===e?"cyan":4===e?"red":5===e?"orange":6===e?"magenta":"volcano",children:0===e?"其他图片":1===e?"头像":2===e?"静态壁纸":3===e?"动态壁纸":4===e?"上传的图标":5===e?"自动获取的图标":6===e?"资源库的图标":e})}function B(e){return r.jsx(S,{src:l(e),height:48,fallback:f,loading:"lazy"})}function M(e,t){return r.jsx(w,{color:e||"0"===t.userId?"geekblue":"red",bordered:!1,icon:r.jsx(g,{}),children:e||("0"===t.userId?"游客":"已注销")})}const N=t.memo((i=>{const f=e.c(20),{record:p,refresh:h}=i;let j;f[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],f[0]=j):j=f[0];const[x,y]=t.useState(j);let b;f[1]!==p.id||f[2]!==h?(b=function(){a(1,y);const e=n.getState().user.token;setTimeout((()=>{m({url:o.deleteUploadSrc,token:e,data:{ids:[p.id]}}).then((e=>{200===e.code&&h()})).finally((()=>{c(1,y)}))}),500)},f[1]=p.id,f[2]=h,f[3]=b):b=f[3];const _=b;let k;f[4]===Symbol.for("react.memo_cache_sentinel")?(k=function(e){fetch(l(e),{headers:new Headers({Authorization:"Bearer "+n.getState().user.token})}).then(v).then((t=>{d.saveAs(t,e.split("/").pop()||"file")})).catch(A)},f[4]=k):k=f[4];const w=k;let g,S,C,F,I,P,T;return f[5]===Symbol.for("react.memo_cache_sentinel")?(g={width:"44px"},f[5]=g):g=f[5],f[6]!==p.filePath?(S=r.jsx(s,{type:"link",size:"small",style:g,onClick:()=>{w(p.filePath)},children:"下载"}),f[6]=p.filePath,f[7]=S):S=f[7],f[8]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},f[8]=C):C=f[8],f[9]!==x[1]?(F=x[1]?r.jsx(u,{}):"删除",f[9]=x[1],f[10]=F):F=f[10],f[11]!==x[1]||f[12]!==F?(I=r.jsx(s,{danger:!0,type:"link",size:"small",disabled:x[1],style:C,children:F}),f[11]=x[1],f[12]=F,f[13]=I):I=f[13],f[14]!==_||f[15]!==I?(P=r.jsx(O,{title:"是否删除附件？",onConfirm:_,children:I}),f[14]=_,f[15]=I,f[16]=P):P=f[16],f[17]!==S||f[18]!==P?(T=r.jsxs("div",{className:"flex flex-wrap",children:[S,P]}),f[17]=S,f[18]=P,f[19]=T):T=f[19],T}));function v(e){return e.blob()}function A(){return alert("文件下载失败")}export{F as default};
