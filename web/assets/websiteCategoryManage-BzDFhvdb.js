import{c as e,r as t,j as s,B as r,Q as i,F as l,$ as o,a0 as a,o as n,a as m,n as c,l as d,v as p,Z as j}from"./requestIdleCallbackPolyfill-DrbyOYxo.js";import{u as f,R as h}from"./useFresh-BwaxHEOd.js";import{r as x}from"./transformData-DqRCM8Rz.js";import{M as u,R as y}from"./myTable-75RjSkyx.js";import{C as b}from"./contentLayout-C-OSk3fI.js";import{F as _}from"./index-CtxSBgRL.js";import{I as g}from"./index-DXVxAGiN.js";import{R as C,a as S}from"./SearchOutlined-CH533OFL.js";import{R as w}from"./QuestionCircleOutlined-C90PHkIz.js";import{T as k}from"./index-wXrs50xs.js";import{R as O}from"./SortAscendingOutlined-Dj82zmah.js";import{T as F}from"./index-BuVKZRMw.js";import"./index-DtAQ0zSJ.js";import"./index-Dy164_-K.js";import"./LeftOutlined-D9Sp279J.js";import"./MailOutlined-B72RYzGN.js";import"./Overflow-CYqTbEan.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./index-CWcW4QWM.js";import"./getAllowClear-DxH2wcUI.js";import"./Input-CHj16lBA.js";import"./assets-B8Bi78Vh.js";import"./MoneyCollectOutlined-cZCK45xC.js";import"./MoneyCollectOutlined-4QlEwa2l.js";import"./index-CpHSqX2X.js";import"./styleChecker-BZ5qIWnG.js";import"./AlipayOutlined-DIg5ymCY.js";import"./AlipayOutlined-tZM3mGx9.js";import"./useBreakpoint-C_tmRwP1.js";import"./index-DmUoX8CG.js";import"./row-DPrcOBny.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./TextArea-D1FHkTHL.js";import"./SortAscendingOutlined-8bEGxkuH.js";function T(){const m=e.c(41),{key:c,refresh:d}=f(),[p]=_.useForm();let j;m[0]===Symbol.for("react.memo_cache_sentinel")?(j={},m[0]=j):j=m[0];const[h,y]=t.useState(j);let k,O,F,T;m[1]===Symbol.for("react.memo_cache_sentinel")?(k={title:"分类名称",key:"name",width:160,fixed:"left"},O={title:"排序",key:"sort",width:80,render:N},F={title:"更新时间",key:"updatedTime",width:200,render:v},m[1]=k,m[2]=O,m[3]=F):(k=m[1],O=m[2],F=m[3]),m[4]!==d?(T=[k,O,F,{title:"操作",fixed:"right",width:120,render:(e,t)=>s.jsx(A,{record:t,refresh:d})}],m[4]=d,m[5]=T):T=m[5];const M=T;let R,Q,W,L,q,P,z,B,K,U,V,Z,D,X,Y,$,E;return m[6]!==p?(R=()=>{const e=p.getFieldsValue();e[Math.random()]=!0,y(x(e))},m[6]=p,m[7]=R):R=m[7],m[8]===Symbol.for("react.memo_cache_sentinel")?(Q={gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gridTemplateRows:"32px"},m[8]=Q):Q=m[8],m[9]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx("div",{className:"gap-3 flex-wrap grid w-full mb-3",style:Q,children:s.jsx(_.Item,{name:"name",children:s.jsx(g,{placeholder:"分类名称"})})}),m[9]=W):W=m[9],m[10]!==p?(L=()=>{p.submit()},m[10]=p,m[11]=L):L=m[11],m[12]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(C,{}),m[12]=q):q=m[12],m[13]!==L?(P=s.jsx(r,{type:"primary",onClick:L,icon:q,children:"查询"}),m[13]=L,m[14]=P):P=m[14],m[15]!==p?(z=()=>{p.resetFields();const e={};e[Math.random()]=!0,y(e)},m[15]=p,m[16]=z):z=m[16],m[17]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(S,{}),m[17]=B):B=m[17],m[18]!==z?(K=s.jsx(r,{onClick:z,icon:B,children:"重置"}),m[18]=z,m[19]=K):K=m[19],m[20]!==P||m[21]!==K?(U=s.jsxs("div",{className:"flex flex-wrap gap-3",children:[P,K]}),m[20]=P,m[21]=K,m[22]=U):U=m[22],m[23]!==p||m[24]!==U||m[25]!==R?(V=s.jsxs(_,{className:"w-full",form:p,onFinish:R,children:[W,U]}),m[23]=p,m[24]=U,m[25]=R,m[26]=V):V=m[26],m[27]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(i,{type:"warning",description:s.jsxs(s.Fragment,{children:[s.jsx(w,{className:"mr-1"}),"收录分类在前端获取列表时做了 10 分钟的缓存效果，可能存在数据不及时更新情况，请重启或等待缓存失效"]}),className:"mt-3 p-1 px-3 text-xs font-normal w-full"}),D=s.jsx(l,{className:"my-3"}),m[27]=Z,m[28]=D):(Z=m[27],D=m[28]),m[29]!==d?(X=s.jsx("div",{className:"mb-3",children:s.jsx(r,{type:"primary",onClick:()=>{o.show(a,{title:"新增分类",children:s.jsx(I,{refresh:d,type:"add"})})},children:"新增分类"})}),m[29]=d,m[30]=X):X=m[30],m[31]!==h?(Y={searchParams:h},m[31]=h,m[32]=Y):Y=m[32],m[33]!==M||m[34]!==c||m[35]!==Y?($=s.jsx(u,{columns:M,getListUrl:n.getWebsiteCategoryList,dataKey:"data.list",tableKey:c,params:Y}),m[33]=M,m[34]=c,m[35]=Y,m[36]=$):$=m[36],m[37]!==V||m[38]!==X||m[39]!==$?(E=s.jsxs(b,{children:[V,Z,D,X,$]}),m[37]=V,m[38]=X,m[39]=$,m[40]=E):E=m[40],E}function v(e,t){return s.jsx(k,{icon:s.jsx(h,{}),children:e||t.createdTime})}function N(e){return s.jsx(k,{color:"gold",icon:s.jsx(O,{}),children:e||"-"})}const I=i=>{const l=e.c(16),{editItem:d,refresh:p,type:j}=i,f=void 0===j?"add":j,[h]=_.useForm(),[x,u]=t.useState(!1);let y;l[0]!==d||l[1]!==p||l[2]!==f?(y=function(e){u(!0);const t=m.getState().user.token;c({url:"add"===f?n.addWebsiteCategory:n.editWebsiteCategory,token:t,data:"add"===f?e:{...e,id:d.id}}).then(e=>{200===e.code&&(o.hide(a),p&&p())}).finally(()=>{u(!1)})},l[0]=d,l[1]=p,l[2]=f,l[3]=y):y=l[3];const b=y;let C,S,w,k;l[4]===Symbol.for("react.memo_cache_sentinel")?(C={flex:"82px"},l[4]=C):C=l[4],l[5]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(_.Item,{name:"name",label:"分类名称",required:!0,rules:[{required:!0}],children:s.jsx(g,{placeholder:"分类名称",allowClear:!0})}),l[5]=S):S=l[5],l[6]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(_.Item,{name:"sort",label:"排序",children:s.jsx(F,{placeholder:"排序"})}),l[6]=w):w=l[6],l[7]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(r,{onClick:M,children:"取消"}),l[7]=k):k=l[7];const O="add"===f?"新增分类":"保存编辑";let T,v;return l[8]!==x||l[9]!==O?(T=s.jsxs("div",{className:"flex justify-end gap-3 flex-wrap",children:[k,s.jsx(r,{type:"primary",htmlType:"submit",loading:x,children:O})]}),l[8]=x,l[9]=O,l[10]=T):T=l[10],l[11]!==d||l[12]!==h||l[13]!==b||l[14]!==T?(v=s.jsx(s.Fragment,{children:s.jsxs(_,{form:h,autoComplete:"off",variant:"filled",initialValues:d,labelCol:C,onFinish:b,children:[S,w,T]})}),l[11]=d,l[12]=h,l[13]=b,l[14]=T,l[15]=v):v=l[15],v},A=t.memo(i=>{const l=e.c(20),{record:f,refresh:h}=i;let x;l[0]===Symbol.for("react.memo_cache_sentinel")?(x=[],l[0]=x):x=l[0];const[u,b]=t.useState(x);let _;l[1]!==f||l[2]!==h?(_=function(){d(1,b);const e=m.getState().user.token;setTimeout(()=>{c({url:n.deleteWebsiteCategory,token:e,data:{id:f.id}}).then(e=>{200===e.code&&h()}).finally(()=>{p(1,b)})},500)},l[1]=f,l[2]=h,l[3]=_):_=l[3];const g=_;let C,S,w,k,O,F,T;return l[4]===Symbol.for("react.memo_cache_sentinel")?(C={width:"44px"},l[4]=C):C=l[4],l[5]!==f||l[6]!==h?(S=s.jsx(r,{type:"link",size:"small",style:C,onClick:()=>{o.show(a,{title:"编辑分类",children:s.jsx(I,{editItem:f,refresh:h,type:"edit"})})},children:"编辑"}),l[5]=f,l[6]=h,l[7]=S):S=l[7],l[8]===Symbol.for("react.memo_cache_sentinel")?(w={width:"44px"},l[8]=w):w=l[8],l[9]!==u[1]?(k=u[1]?s.jsx(y,{}):"删除",l[9]=u[1],l[10]=k):k=l[10],l[11]!==u[1]||l[12]!==k?(O=s.jsx(r,{danger:!0,type:"link",size:"small",disabled:u[1],style:w,children:k}),l[11]=u[1],l[12]=k,l[13]=O):O=l[13],l[14]!==g||l[15]!==O?(F=s.jsx(j,{title:"是否确认删除？",onConfirm:g,children:O}),l[14]=g,l[15]=O,l[16]=F):F=l[16],l[17]!==S||l[18]!==F?(T=s.jsxs("div",{className:"flex flex-wrap",children:[S,F]}),l[17]=S,l[18]=F,l[19]=T):T=l[19],T});function M(){o.hide(a)}export{T as default};
