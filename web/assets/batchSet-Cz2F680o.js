import{u as e,h as t,r as i,j as r,cr as s,Q as n,B as o,Z as a,g1 as l,C as m,m as c,g2 as d,g3 as u,g4 as p,y as j,g5 as h,V as x,bQ as g,z as f,g6 as b}from"./main-BznldwrR.js";import{l as C,M as y}from"./homePage-BDbKLh0S.js";import{k as v,j as w}from"./sortableJsUtils-ChHfWt-3.js";import{R as k}from"./QuestionCircleOutlined-Cbz-ZHDf.js";import{C as D}from"./useFresh-BBfhmAj4.js";import{S}from"./index-pOq2t2PQ.js";import{C as F}from"./ColorPicker-BC4IJn7Q.js";import"./fullSpin-zybnquud.js";import"./index-DJHRXG-n.js";import"./myDrawer2-CTfcu_pk.js";import"./handleButton-CvdVWmsL.js";import"./myModal-BapWhRog.js";import"./submitForInclusion-CVB6QWUr.js";import"./index-CM88uxhR.js";import"./row-CgX7p7wl.js";import"./useBreakpoint-BajckZld.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-CU_E_toA.js";import"./getAllowClear-Bhk0ADw3.js";import"./Input-MFSIJ5db.js";import"./TextArea-CUVoyy7V.js";import"./CloudUploadOutlined-BdmG5-Xi.js";import"./index-Cv7tdZmO.js";import"./assets-B8Bi78Vh.js";import"./iconBase-CAkAxsGz.js";import"./index-BJB7vPB3.js";import"./MailOutlined-CI-nFNPu.js";import"./Overflow-t0s94lkY.js";import"./index-DbTnZT_A.js";import"./LeftOutlined-D9Sp279J.js";import"./PlusOutlined-CczGP1IR.js";import"./SearchOutlined-DHK_Zbuv.js";import"./spinLoading-5DQDZ9X0.js";import"./LikeFilled-_bk5cjch.js";import"./index-B5NmSUX2.js";import"./ReloadOutlined-B00s2TmV.js";import"./LeftOutlined-DgtXDiAO.js";import"./styleChecker-CNiLJu-y.js";import"./UserOutlined-CKr-E0CC.js";import"./addRecommendAppForm-BrCfWqVv.js";import"./markdownContent-_QQqxXX2.js";import"./index-5PKwAW1Y.js";import"./index-DncNCKRz.js";function T(){const T=e(),O=t(e=>e.appData.listData),M=t(e=>e.appData.freeDragListData),P=t(e=>e.home.showFreeDrag),$=t(e=>e.home.freeDragGridX),Q=t(e=>e.home.freeDragGridY),B=t(e=>e.card.gridColumnWidth),G=t(e=>e.card.gridRowHeight),I=t(e=>e.card.columnGap),L=t(e=>e.card.rowGap),[R,U]=i.useState("icon"),[W,z]=i.useState("11"),[H,A]=i.useState("#ffffff"),[N,J]=i.useState("#000000"),[X,q]=i.useState([]),[E,V]=i.useState(0),Y=[{label:"展示样式",content:r.jsx(r.Fragment,{children:r.jsx(S,{value:R,onChange:e=>{U(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片展示样式",options:[{label:"纯图",value:"icon"},{label:"文本",value:"text"},{label:"横版",value:"icon-h"},{label:"竖版",value:"icon-v"}]})})},{label:"卡片大小",content:r.jsx(r.Fragment,{children:r.jsx(S,{value:W,onChange:e=>{z(e)},variant:"filled",style:{width:"100%",maxWidth:256},placeholder:"请选择链接卡片尺寸大小",options:C})})},{label:"背景颜色",content:r.jsx(r.Fragment,{children:r.jsx(F,{showText:!0,value:H,onChange:e=>{A(e.toHexString())}})})},{label:"文字颜色",content:r.jsx(r.Fragment,{children:r.jsx(F,{showText:!0,value:N,onChange:e=>{J(e.toHexString())}})})},{label:`图标间距（${E}px）`,content:r.jsx(r.Fragment,{children:r.jsx(y,{value:E,min:0,max:48,onChange:e=>{V(e)}})})}],[Z,K]=i.useState(!1);const _=i.useRef(null);i.useEffect(()=>()=>{_.current&&(clearTimeout(_.current),_.current=null)},[]);const ee=[{label:"卡片内字体颜色(非卡片名称）",content:r.jsx(r.Fragment,{children:r.jsx(a,{title:"是否确认调整",onConfirm:()=>{const e=l(O);T(m(e[0])),c.success(`成功调整了${e[1]}个字体颜色`)},children:r.jsx(o,{type:"link",children:"调整"})})})},{label:"移除相同ID、空文件夹",content:r.jsx(r.Fragment,{children:r.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=d(O),t=v(u(p(j(O)))),i=d(t);T(m(t)),c.success(`成功移除了${e-i}个数据`)},children:r.jsx(o,{type:"link",children:"移除"})})})},{label:"更新ID为文本类型",content:r.jsx(a,{icon:r.jsx(x,{style:{color:"blue"}}),title:"该更新有利无害",onConfirm:()=>{const e=h(j(O));T(m(e[0])),c.success(`成功移除了${e[1]}个数据ID`)},children:r.jsx(o,{type:"link",children:"更新"})})},{label:"移除所有空白占位卡片",content:r.jsx(a,{title:"是否确认移除",onConfirm:()=>{const e=j(O),t=g(e);T(m(t[0])),c.success(`成功移除了${t[1]}个空白占位卡片`)},children:r.jsx(o,{type:"link",children:"移除"})})},{label:"整理全屏自由拖拽",content:r.jsx(a,{title:"是否确认整理",onConfirm:()=>{if(!P)return void c.error("整理失败，全屏自由拖拽布局未启用");const e=window.innerWidth,t=window.innerHeight,i=j(M).map(i=>{const r=Math.round(i.x/$)*$,s=Math.round(i.y/Q)*Q,n=w(i.size,B,G,L,I),o=e-n.width,a=t-n.height,l=Math.min(o,r),m=Math.min(a,s);return{...i,x:l,y:m}});c.success("整理完成"),T(f(i))},children:r.jsx(o,{type:"link",children:"整理"})})}];return r.jsxs(r.Fragment,{children:[r.jsx(s,{items:ee,groupTitle:"一键优化",gap:20,bottomDivider:!0}),r.jsx(s,{items:Y,groupTitle:"手动控制",gap:20,bottomDivider:!0}),r.jsx(n,{message:"请在下方选择需要调整的参数",banner:!0,type:"info",icon:r.jsx(k,{}),className:"mb-5 rounded-md"}),r.jsx(D.Group,{options:[{label:"展示样式",value:"showType"},{label:"卡片大小",value:"size"},{label:"背景颜色",value:"bgColor"},{label:"文字颜色",value:"textColor"},{label:"图标间距",value:"iconPadding"}],className:"mb-6",value:X,onChange:e=>{q(e)}}),r.jsx(o,{type:"primary",onClick:function(){X.length<=0?c.error("请选择确认调整的参数信息"):(K(!0),_.current&&clearTimeout(_.current),_.current=setTimeout(async()=>{try{const e=await async function(e,t,i){return new Promise((r,s)=>{try{r(b(e,t,i))}catch(n){s(n)}})}(O,X,{linkCardBgColor:H,linkCardShowType:R,linkCardSize:W,linkCardTextColor:N,imgPaddingNum:E});T(m(e[0])),c.success(`成功调整了${e[1]}个链接卡片`)}catch(e){c.error("调整链接卡片时发生错误")}finally{K(!1)}},500))},loading:Z,children:"调整卡片"})]})}export{T as default};
