import{c as e,t,r as o,j as s,B as a,k as i,O as r,o as l,a3 as n,v as c,bX as m,l as d,aM as p}from"./requestIdleCallbackPolyfill-BBqTMjVZ.js";import{L as x,E as h}from"./index-DF0Jxszk.js";import{F as f}from"./fullSpin-DWWgSI0O.js";import{T as u}from"./index-CBxFLZp0.js";import{R as j,a as g}from"./addRecommendAppForm-B5HsNO6X.js";import"./Overflow-BXYGHNtC.js";import"./getAllowClear-DdLfhXWE.js";import"./Input-0IrDrwpC.js";import"./index-BdV7gE6d.js";import"./index-DwKjDcSq.js";import"./row-DaQsKPAm.js";import"./useBreakpoint-CEAbgQvq.js";import"./mediaQueryUtil-DPPPwwPM.js";import"./QuestionCircleOutlined-DSm95oJP.js";import"./index-BW_7iWnl.js";import"./TextArea-w8mxCDWN.js";import"./ColorPicker-DWC7yG55.js";import"./index-CxbuYqcE.js";import"./index-Cww0EXSo.js";import"./CloudUploadOutlined-8PkMiyQI.js";function b(){const p=e.c(22),{token:b}=t.useToken(),S=o.useRef(null),[_,k]=o.useState();let w;p[0]===Symbol.for("react.memo_cache_sentinel")?(w=[],p[0]=w):w=p[0];const[v,C]=o.useState(w);let N;p[1]===Symbol.for("react.memo_cache_sentinel")?(N=[],p[1]=N):N=p[1];const[T,E]=o.useState(N);let A;p[2]===Symbol.for("react.memo_cache_sentinel")?(A=[],p[2]=A):A=p[2];const[B,P]=o.useState(A);let R;p[3]===Symbol.for("react.memo_cache_sentinel")?(R=[],p[3]=R):R=p[3];const[I,L]=o.useState(R);let M;p[4]===Symbol.for("react.memo_cache_sentinel")?(M=function(e,t){const o=[...t.filter(t=>!e.some(e=>e.id===t.id)),...e];P(o)},p[4]=M):M=p[4];const O=M;let H;p[5]!==v||p[6]!==T?(H=function(){r({url:l.getRecommendAppList}).then(e=>{200===e.code&&e.data&&!n(e.data,v)&&o.startTransition(()=>{C(e.data),O(e.data,T)})}).finally(()=>{c(1,L)})},p[5]=v,p[6]=T,p[7]=H):H=p[7];const W=H;let z;p[8]!==v||p[9]!==T?(z=function(){const e=globalThis.siteConfig?.server_url;if(!e||"https://web.gotab.cn"===m(e,"https://"))return;d(0,L);const t="https://web.gotab.cn".endsWith("/")?"https://web.gotab.cn":"https://web.gotab.cn/";r({url:t+"api/recommendApp",catchMsg:!1}).then(e=>{if(200===e.code&&e.data&&!n(e.data,T)){const t=e.data.map(y);o.startTransition(()=>{E(t),O(v,t)})}}).finally(()=>{c(0,L)})},p[8]=v,p[9]=T,p[10]=z):z=p[10];const F=z;let Q,U,q,D;return p[11]!==W||p[12]!==F?(Q=()=>{k(S.current?.clientHeight),d(1,L),W(),F()},p[11]=W,p[12]=F,p[13]=Q):Q=p[13],p[14]===Symbol.for("react.memo_cache_sentinel")?(U=[],p[14]=U):U=p[14],o.useLayoutEffect(Q,U),p[15]===Symbol.for("react.memo_cache_sentinel")?(q={height:"calc(100% + 16px)"},p[15]=q):q=p[15],p[16]!==_||p[17]!==I[0]||p[18]!==I[1]||p[19]!==B||p[20]!==b?(D=s.jsx("div",{ref:S,style:q,children:I[0]||I[1]?s.jsx(f,{}):B.length>0?s.jsx(x,{data:B,height:_,itemHeight:88,itemKey:"id",styles:{verticalScrollBar:{display:"none"}},children:e=>s.jsx("div",{className:"h-[88px] pb-3",children:s.jsxs(a,{href:e.link,target:"_blank",style:{background:e.background,borderColor:b.colorBorderSecondary},type:"text",className:"border h-[76px] rounded-md p-3 flex items-center gap-3 cursor-pointer",icon:e.icon?s.jsx("div",{style:{height:"42px",width:"42px",background:e.iconBackground},className:"flex-center rounded-[10px] overflow-hidden",children:s.jsx("img",{src:i(e.icon),alt:"",style:{maxWidth:"42px",maxHeight:"42px"}})}):s.jsx(g,{className:"flex-center",style:{height:"42px",width:"42px",fontSize:"20px",color:b.colorPrimary}}),children:[s.jsxs("div",{className:"flex-1 font-medium flex flex-col items-start",children:[s.jsxs("div",{className:"text-sm mb-[4px] flex items-center",children:[e.tagText&&s.jsx(u,{color:e?.tagColor,className:"m-0 origin-left mr-2",style:{zoom:.75},children:e.tagText}),s.jsx("h1",{className:"line-clamp-1 whitespace-break-spaces text-left",style:{color:e?.fontColor},children:e.title})]}),s.jsx("div",{className:"line-clamp-2 text-xs m-0 opacity-50 whitespace-break-spaces text-left",style:{color:e?.fontColor},children:e?.description})]}),s.jsx(j,{className:"opacity-50",style:{color:e?.fontColor}})]})},e.id)}):s.jsx(h,{image:h.PRESENTED_IMAGE_SIMPLE})}),p[16]=_,p[17]=I[0],p[18]=I[1],p[19]=B,p[20]=b,p[21]=D):D=p[21],D}function y(e){return{...e,icon:p(e.icon)}}export{b as default};
