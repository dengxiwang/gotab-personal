import{x as e,e as t,j as a,ac as n,B as o,af as s,at as l,ah as r,aj as c,ag as i,ai as u}from"./requestIdleCallbackPolyfill-DVdtTnyH.js";import{E as m}from"./index-59jecBLq.js";import f from"./markdownContent-B0W8wkgT.js";import{C as d}from"./contentLayout-BiXaL5ck.js";import{S as p}from"./index-Dh-5kge8.js";import{S as x}from"./index-LyMllqsd.js";function b(){const n=e.c(3),[o,s]=t.useState("aboutUs");let l,r;return n[0]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(p,{options:[{label:"关于我们",value:"aboutUs"},{label:"捐赠打赏",value:"donate"}],onChange:e=>{s(e)},className:"mb-3"}),n[0]=l):l=n[0],n[1]!==o?(r=a.jsxs(d,{children:[l,a.jsx(j,{type:o})]}),n[1]=o,n[2]=r):r=n[2],r}const j=f=>{const d=e.c(29),{type:p}=f,[b,j]=t.useState("");let y;d[0]===Symbol.for("react.memo_cache_sentinel")?(y=[],d[0]=y):y=d[0];const[C,S]=t.useState(y),U=n(h);let _;d[1]===Symbol.for("react.memo_cache_sentinel")?(_=new AbortController,d[1]=_):_=d[1];const w=t.useRef(_);let k;d[2]!==U||d[3]!==p?(k=function(){w.current.abort(),w.current=new AbortController,s(0,S),l({url:"aboutUs"===p?r.getAboutUsContent:r.getDonateContent,token:U,signal:w.current.signal}).then((e=>{200===e.code&&("aboutUs"===p?j(e.data.aboutUs):"donate"===p&&j(e.data.donate))})).finally((()=>{c(0,S)}))},d[2]=U,d[3]=p,d[4]=k):k=d[4];const N=k;let v,A,I;d[5]!==N?(v=()=>{N()},d[5]=N,d[6]=v):v=d[6],d[7]!==p?(A=[p],d[7]=p,d[8]=A):A=d[8],t.useEffect(v,A),d[9]!==U?(I=function(e){return new Promise((t=>{i({url:r.uploadImage,token:U,data:u({file:e})}).then((e=>{200===e.code&&e.data&&t(e.data.image_url)}))}))},d[9]=U,d[10]=I):I=d[10];const D=I;let E;d[11]!==b||d[12]!==U||d[13]!==p?(E=function(){s(1,S),i({url:"aboutUs"===p?r.updateAboutUsContent:r.updateDonateContent,token:U,data:{content:b}}).finally((()=>{c(1,S)}))},d[11]=b,d[12]=U,d[13]=p,d[14]=E):E=d[14];const L=E;let M,P,T,q,z,B;return d[15]===Symbol.for("react.memo_cache_sentinel")?(M={height:"calc(100% - 44px)"},P=e=>{j(e.text)},d[15]=M,d[16]=P):(M=d[15],P=d[16]),d[17]!==D||d[18]!==b?(T=a.jsx(m,{className:"flex-1",style:M,onChange:P,value:b,renderHTML:g,onImageUpload:D}),d[17]=D,d[18]=b,d[19]=T):T=d[19],d[20]!==C[1]||d[21]!==L?(q=a.jsx("div",{className:"flex justify-end gap-3 flex-wrap mt-3",children:a.jsx(o,{loading:C[1],type:"primary",onClick:L,children:"保存配置"})}),d[20]=C[1],d[21]=L,d[22]=q):q=d[22],d[23]!==q||d[24]!==T?(z=a.jsxs("main",{className:"w-full h-[480px]",children:[T,q]}),d[23]=q,d[24]=T,d[25]=z):z=d[25],d[26]!==C[0]||d[27]!==z?(B=a.jsx(x,{size:"large",spinning:C[0],wrapperClassName:"w-full",children:z}),d[26]=C[0],d[27]=z,d[28]=B):B=d[28],B};function h(e){return e.user.token}function g(e){return a.jsx(f,{content:e,replace:!1})}export{b as default};
